<div id="header-html">
	<div class="row print-heading" style="line-height:1.1;padding:10px">
		<div class="col-xs-3 column-break">
			<div id="company-logo-container"></div>
		</div>
		<div class="col-xs-6 column-break text-center">
			<h3 style="margin-bottom:5px; margin-top:10px;"><b>{%= filters.company %}</b></h3>
			<div id="company-previously-known-as" style="font-size:0.85em; margin-bottom:10px;"></div>
			<div style="margin-top:15px;">
				<h4 style="margin-bottom:5px;">
					{% if (filters.party_name) { %}
						<b>{%= filters.party_name %}</b>
					{% } else if (filters.party && filters.party.length) { %}
						<b>{%= filters.party[0] %}</b>
					{% } else if (filters.account) { %}
						<b>{%= filters.account %}</b>
					{% } %}
				</h4>
				{% if (filters.tax_id) { %}
					<div style="font-size:0.9em; margin-bottom:5px;">{%= __("Tax Id: ")%}{%= filters.tax_id %}</div>
				{% } %}
				<div id="party-address-container" style="font-size:0.85rem; text-align:left; display:inline-block;"></div>
			</div>
		</div>
		<div class="col-xs-3 column-break text-right">
			<h2 style="margin-top:5mm; margin-bottom:15px;"><b>{%= __("Party Ledger") %}</b></h2>
			<div class="invoice-meta">
				<table class="table-condensed no-border" style="width:100%; font-size:0.9em; text-align:left;">
					<tr>
						<td><b>{%= __("From Date:") %}</b></td>
						<td>{%= frappe.datetime.str_to_user(filters.from_date) %}</td>
					</tr>
					<tr>
						<td><b>{%= __("To Date:") %}</b></td>
						<td><b>{%= frappe.datetime.str_to_user(filters.to_date) %}</b></td>
					</tr>
				</table>
			</div>
		</div>
	</div>
</div>
<table class="table table-bordered">
	<thead>
		<tr>
			<th style="width: 10%">{%= __("Date") %}</th>
			<th style="width: 25%">{%= __("Reference") %}</th>
			<!-- <th style="width: 25%">{%= __("Remarks") %}</th> -->
			<th style="width: 20%">{%= __("Debit") %}</th>
			<th style="width: 20%">{%= __("Credit") %}</th>
			<th style="width: 20%">{%= __("Balance") %}</th>
		</tr>
	</thead>
	<tbody>
		{% for(var i=0, l=data.length; i<l; i++) { %}
			<tr style="page-break-inside: avoid;">
			{% if(data[i].posting_date) { %}
				<td>{%= frappe.datetime.str_to_user(data[i].posting_date) %}</td>
				{% var longest_word = cstr(data[i].remarks || data[i].bill_no || "").split(" ").reduce((longest, word) => word.length > longest.length ? word : longest, ""); %}
				<td {% if longest_word.length > 45 %} class="overflow-wrap-anywhere" {% endif %}>
					{%= data[i].voucher_type %}
					<br>{%= data[i].voucher_no %}

					{% if(!(filters.party || filters.account)) { %}
						<br>{%= data[i].party || data[i].account %}
					{% } %}

					{% if(data[i].bill_no) { %}
						<br><small class="text-muted">{%= __("Bill No") %}: {%= data[i].bill_no %}</small>
					{% } %}

					{% if(data[i].remarks) { %}
						<br><small>{%= __("Remarks") %}: {%= data[i].remarks %}</small>
					{% } %}
				</td>

				<td style="text-align: right">
					{%= format_currency(data[i].debit, filters.presentation_currency || data[i].account_currency) %}
				</td>
				<td style="text-align: right">
					{%= format_currency(data[i].credit, filters.presentation_currency || data[i].account_currency) %}
				</td>
			{% } else { %}
				<td></td>
				<!-- <td></td> -->
				<td><b>{%= frappe.format(data[i].account, {fieldtype: "Link"}) || "&nbsp;" %}</b></td>
				<td style="text-align: right">
					{%= data[i].account && format_currency(data[i].debit, filters.presentation_currency || data[i].account_currency) %}
				</td>
				<td style="text-align: right">
					{%= data[i].account && format_currency(data[i].credit, filters.presentation_currency || data[i].account_currency) %}
				</td>
			{% } %}
				<td style="text-align: right">
			 		{%=
						data[i].balance
						%}				
				</td>
			</tr>
		{% } %}
	</tbody>
</table>
<p class="text-right text-muted">Printed On {%= frappe.datetime.str_to_user(frappe.datetime.get_datetime_as_string()) %}</p>

<div id="footer-html">
	<div class="text-center small page-footer-1">
		{%= __("Page {0} of {1}", ['<span class="page"></span>', '<span class="topage"></span>']) %}<br>This is a computer generated document and does not require a signature.
	</div>
</div>