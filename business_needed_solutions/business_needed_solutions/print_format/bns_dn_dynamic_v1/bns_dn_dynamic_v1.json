{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-04-07 09:41:06.887838",
 "css": "br {\n    line-height:5px;\n}\n\n.text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Delivery Note",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n{% set bns_settings = frappe.get_doc(\"BNS Settings\") %}\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;padding:10px\">\n            <div class=\"col-xs-3 column-break\">\n                {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n                {% if company_logo %}\n                <div>\n                    <img width=\"100%\" src=\"{{ company_logo }}\">\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 column-break text-center\">\n                <h2 style=\"margin:0;\">{{ doc.company }}</h2>\n                <div style=\"font-size:0.85rem\">\n                    <b>{% set seller_address = frappe.db.get_value(\"Address\", doc.company_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                        {{ format_address(seller_address) }}\n                        {% if doc.company_gstin %}\n                        GST: {{ doc.company_gstin }}<br>\n                        {% endif %}\n                        <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                    </b>\n                </div>\n            </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;\"><b>\n                        {% if doc.is_return %}\n                        Delivery Note Return\n                        {% else %}\n                        {% if doc.status == \"Draft\" %}\n                        Draft Delivery Note\n                        {% elif doc.status == \"Cancelled\" %}\n                        Cancelled Delivery Note\n                        {% else %}\n                        Delivery Note\n                        {% endif %}\n                        {% endif %}\n                    </b>\n                </h2>\n                <div class=\"row\" style=\"font-size:0.6rem\">\n                    <div class=\"col-xs-5 text-left\" style=\"text-wrap: nowrap;font-size:0.45rem\"><b>DN Date:<br>DN No:<br>Place of Supply:</b></div>\n                    <div class=\"col-xs-7 text-right\" style=\"text-wrap: nowrap;\">{{ frappe.utils.formatdate(doc.posting_date) }}<br><b>{{ doc.name }}</b><br>\n                        <div>{{doc.place_of_supply}}</div>\n                    </div>\n                    <!--<div class=\"col-xs-5 column-break\" style=\"\"></div>-->\n                </div>\n            </div>\n        </div>\n    </div>\n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td colspan=6 rowspan=5>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Buyer Details</u></b></h6>\n                            <p><b>{{ doc.customer_name }}</b></p>\n                            {% set customer_address = frappe.db.get_value(\"Address\", doc.customer_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(customer_address) }}\n\n                            {% if doc.billing_address_gstin %}\n                            GST: <u>{{ doc.billing_address_gstin }}</u><br>\n                            {% endif %}\n                            {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer_name, \"pan\")%}\n                            {% if customer_pan %}\n                            PAN: {{ customer_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address_name }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% if shipping_address.gstin %}\n                            GST: <u>{{ shipping_address.gstin }}</u><br>\n                            {% endif %}\n                            {% endif %}\n                            {% if doc.dispatch_address %}\n                            <h6><b><u>Dispatch Details</u></b></h6>\n                            <p><b>{{ frappe.db.get_value(\"Address\", doc.dispatch_address_name, \"address_title\") }}</b></p>\n                            <!--<p>{{doc.dispatch_address}}</p>-->\n                            {% set dispatch_address = frappe.db.get_value(\"Address\", doc.dispatch_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                            {{ format_address(dispatch_address) }}\n                            {% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Transporter:</h6>\n                            {% if doc.transporter_name %}\n                            {{ doc.transporter_name }} <br>\n                            {{ doc.gst_transporter_id }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Vehicle No:</h6>\n                            {% if doc.vehicle_no %}\n                            {{ doc.vehicle_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Buyer's PO No:</h6>\n                            {% if doc.po_no %}\n                            {{ doc.po_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>PO Date:</h6>\n                            {% if doc.po_date %}\n                            {{ doc.po_date }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            {% if doc.ewaybill %}\n                            <h6>e-Waybill No:</h6>\n                            {{ doc.ewaybill }}\n                            </div>\n                            {% endif %}\n                            <h6>Builty No:</h6>\n                            {% if doc.custom_builty_no %}\n                            {{ doc.custom_builty_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Remarks:</h6>\n                            {% if doc.remarks %}\n                            {{ doc.remarks }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% if doc.incoterm or doc.named_place  %}\n                    <tr>\n                        <td colspan=3>\n                            <h6>Incoterm:</h6>\n                            {% if doc.incoterm %}\n                            {{ doc.incoterm }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Named Place:</h6>\n                            {% if doc.named_place %}\n                            {{ doc.named_place }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% endif %}\n                    <tr>\n                        <td colspan=2>\n                            \n                            <h6>Destination:</h6>\n                            {% if doc.custom_destination %}\n                            {{doc.custom_destination}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td rowspan=2 colspan=4>\n                            <h6>Terms of Delivery:</h6>\n                            {% if doc.custom_terms_of_delivery %}\n                            {{ doc.custom_terms_of_delivery }}\n                            {% elif doc.custom_terms_of_delivery_new %}\n                            {{ doc.custom_terms_of_delivery_new }}\n                            {% else %}<br><br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=2 rowspan=1>\n                            <h6>Doc No:</h6>\n                            {% if doc.custom_doc_no %}\n                            {{doc.custom_doc_no}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <!--</div>-->\n        <div class=\"col-xs-12 column-break item-det\">\n            <table class=\"table table-bordered e-invoice-table\">\n            <thead>\n                <tr>\n                    <th colspan=\"2\">#</th>\n                    <th colspan=\"24\">Item</th>\n                    <th colspan=\"7\">HSN/SAC</th>\n                    <th colspan=\"7\">Qty</th>\n                    {% if bns_settings.rate_incl_tax %}\n                    <th colspan=\"9\">Rate(Inc Tax)</th>\n                    {% endif %}\n                    {% if bns_settings.rate_excl_tax %}\n                    <th colspan=\"9\">Rate(Exc Tax)</th>\n                    {% endif %}\n                    {% if bns_settings.discount_type == \"Triple Compounded\" %}\n                    <th colspan=\"4\">D1</th>\n                    <th colspan=\"4\">D2</th>\n                    <th colspan=\"4\">D3</th>\n                    {% else %}\n                    <th colspan=\"4\">Disc</th>\n                    {% endif %}\n                    <th colspan=\"11\">Net Total</th>\n                </tr>\n            </thead>\n            \n                <tbody>\n                    {% for item in doc.items %}\n                    <tr class=\"no-break\">\n                        <td colspan=\"2\">{{ loop.index }}</td>\n                        <td colspan=\"24\">\n                            <b style=\"font-size:0.5rem;\">{{ item.item_name }}</b><br>\n                            {% if item.barcode %}\n                            <p style=\"font-size:0.35rem;\">\n                                EAN: {{ item.barcode }}\n                            </p>\n                            {% endif %}\n                        </td>\n                        <td colspan=\"7\" style=\"font-size:0.45rem;\">{{ item.gst_hsn_code }}</td>\n                        <td colspan=\"7\" class=\"text-left\" style=\"line-height: 95%;\"><b>\n                            {% set is_uom_whole = frappe.db.get_value(\"UOM\", item.uom, \"must_be_whole_number\") %}\n                            {% set is_stock_uom_whole = frappe.db.get_value(\"UOM\", item.stock_uom, \"must_be_whole_number\") %}\n                            \n                            <!--{% if item.weight_uom == \"Kg\" and item.weight_uom!=item.uom%}-->\n                            <!--    <p style=\"font-size:0.6rem;\">-->\n                            <!--        {{ item.total_weight }} Kg-->\n                            <!--    </p>-->\n                            <!--{% elif item.weight_uom == \"Gram\" and item.weight_uom!=\"Kg\" and item.weight_uom!=\"Gram\"%}-->\n                            <!--    <p style=\"font-size:0.6rem;\">-->\n                            <!--        {{ item.total_weight/1000 }} Kg-->\n                            <!--    </p>-->\n                            <!--{% endif %}-->\n                            <span style=\"font-size:0.5rem;\">\n                                {% if is_uom_whole %}\n                                    {{ item.qty | int}}\n                                {% else %}\n                                    {{ item.qty}}\n                                {% endif %}\n                            </span>\n                            <span style=\"font-size:0.45rem;\">\n                                {{ item.uom }}\n                            </span>\n                            {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                            {% set print_uom_conversion = frappe.db.get_value(\n                                \"UOM Conversion Detail\",\n                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                \"conversion_factor\"\n                            ) %}\n                            <!--{% if item.uom != item.stock_uom %}-->\n                            <!--    <p style=\"font-size:0.35rem;\">-->\n                            <!--        {% if is_stock_uom_whole %}-->\n                            <!--            {{item.conversion_factor | int}}-->\n                            <!--        {% else %}-->\n                            <!--            {{item.conversion_factor}}-->\n                            <!--        {% endif %}-->\n                            <!--        {{item.stock_uom}}/{{ item.uom }}-->\n                            <!--    </p>-->\n                            <!--{% endif %}-->\n                            {% if print_uom and item.uom != print_uom %}\n                                {% set print_uom_qty = item.conversion_factor/print_uom_conversion %}\n                                <p style=\"font-size:0.35rem;\">\n                                    {% if is_stock_uom_whole %}\n                                        {{print_uom_qty | int}}\n                                    {% else %}\n                                        {{print_uom_qty}}\n                                    {% endif %}\n                                    {{print_uom}}/{{ item.uom }}\n                                </p>\n                            {% endif %}\n                            </b>\n                        </td>\n                        {% if doc.taxes and doc.taxes|length > 0 %}\n                            {% if doc.taxes[0].included_in_print_rate == 1 %}\n                            \n                                {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                                {% set inclusive_rate = item.price_list_rate %}\n                                {% set exclusive_rate = inclusive_rate*100/(100+gst_rate) %}\n                            \n                            {% else %}\n                            \n                                {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                                {% set exclusive_rate = item.price_list_rate %}\n                                {% set inclusive_rate = exclusive_rate*(100+gst_rate)/100 %}\n                            \n                            {% endif %}\n                        {% endif %}\n                        {% if bns_settings.rate_incl_tax %}\n                        <td colspan=\"9\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </span>\n                                \n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <span style=\"font-size:0.45rem;\">\n                                            {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate * print_uom_conversion / item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                            </span>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = inclusive_rate * item.qty / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = inclusive_rate * item.qty * 1000 / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% endif %}\n                        \n                        {% if bns_settings.rate_excl_tax %}\n                        <td colspan=\"9\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </span>\n                                \n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <span style=\"font-size:0.45rem;\">\n                                            {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate * print_uom_conversion / item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                            </span>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = exclusive_rate * item.qty / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = exclusive_rate * item.qty * 1000 / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% endif %}\n                        \n                        {% if bns_settings.discount_type != \"Single\" %}\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d1_ == 0.0 else item.custom_d1_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d2_ == 0.0 else item.custom_d2_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d3_ == 0.0 else item.custom_d3_ ~ '%' }}</td>\n                        {% else %}\n                        <td colspan=\"4\">{{ item.discount_percentage }}% </td>\n                        {% endif %}\n                        <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(\"{:.2f}\".format(item.net_amount), currency=doc.currency) }}</b></td>\n                        \n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        </div>\n\n\n\n    <!--</div>-->\n\n    <!--<div class=\"no-break\">-->\n        <table class=\"table table-bordered e-invoice-table\">\n            <tbody>\n                <tr>\n                    <td rowspan=1 colspan=2 style=\"vertical-align:top !important;\"><b>T&C</b></td>\n                    <td class=\"text-right\">Total Taxable Value</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.net_total), currency=doc.currency) }}</td>\n                </tr>\n                {% set ns = namespace(freight_row=false) %}\n                \n                {% for tax_row in doc.taxes %}\n                    {% if \"Freight and Forwarding Charges\" in tax_row.account_head %}\n                        {% set ns.freight_row = tax_row %}\n                    {% endif %}\n                {% endfor %}\n                {% set freight_row = ns.freight_row %}\n                {% if freight_row %}\n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges-freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                    <tr>\n                        <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                {% else %}\n                    \n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms %}<span style=\"font-size:0.5rem;\">{{doc.terms}}</span>{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges), currency=doc.currency) }}</td>\n                    </tr>\n                {% endif %}\n                \n                {% if doc.discount_amount %}\n                <tr>\n                    <td class=\"text-right\">Additional Discount</td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.discount_amount, currency=\"INR\") }}</b></td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td class=\"text-right\"><b>Grand Total</b></td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.rounded_total, currency=\"INR\") }}</b></td>\n                </tr>\n                <tr>\n                    <td colspan=2>\n                        <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.in_words }}</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    <!--</div>-->\n    {{ doc.gst_breakup_table }}\n    <div class=\"no-break\">\n        <table style=\"table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4>\n                    <b>Bank Details</b>\n                </td>\n                <td colspan=4>\n                    <b>Pre Authenticated By. : </b>{{doc.company}}\n                </td>\n            </tr>\n            <tr rowspan=3>\n                <td rowspan=1 colspan=4>\n                    {% set bank_account = frappe.db.get_value(\"Bank Account\", {\"company\": doc.company, \"is_default\": 1}, [\"account_name\",\"bank\", \"bank_account_no\", \"branch_code\",\"iban\"], as_dict=True) %}\n                    {% if bank_account.account_name %}\n                    Account Name: <b><i>{{ bank_account.account_name }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank %}\n                    Bank Name: <b><i>{{ bank_account.bank }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank_account_no %}\n                    Account Number: <b><i>{{ bank_account.bank_account_no }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.branch_code %}\n                    Branch Code (IFSC): <b><i>{{ bank_account.branch_code }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.iban %}\n                    IBAN: <b><i>{{ bank_account.iban }}</i></b><br>\n                    {% endif %}\n                </td>\n                <td colspan=4><br><br><br><br></td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4><b>{% if doc.custom_is_print==1%} Payment Terms {% endif %}</b></td>\n                <td colspan=2>\n                    Authorised Signatory\n                </td>\n                <td colspan=2>\n                    Issuing Signatory\n                </td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=2 colspan=4>\n                    {% if doc.payment_schedule and doc.custom_is_print==1 %}\n                    <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                        <thead>\n                            <tr>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for row in doc.payment_schedule %}\n                            <tr>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                            </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                    {% endif %}\n                </td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n            </tr>\n            <tr rowspan=1>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n            </tr>\n        </table>\n    <!--</div>-->\n\n\n\n    {% if doc.ewaybill %}\n    {% set e_waybill_data = frappe.db.get_value(\"e-Waybill Log\", {\"reference_name\": doc.name, \"reference_doctype\": \"Sales Invoice\"}, \"data\") %}\n    <div class=\"page-break\"></div>\n    {% set data = _dict(json.loads(e_waybill_data)) %}\n    {%- set irn = doc.irn -%}\n\n    {% if data.supplyType == \"O\" %}\n    {% set generated_by = data.fromTrdName %}\n    {% else %}\n    {% set generated_by = data.toTrdName %}\n    {% endif %}\n\n    <div class=\"ewaybill-page-layout\">\n        <table class=\"table borderless\" style=\"border:0\">\n            <tbody>\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <h1 class=\"title\">e-Waybill</h1>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img src=\"data:image/png;base64,{{ get_e_waybill_qr_code(data.ewbNo,data.userGstin, data.ewayBillDate) }}\" class=\"qr-code\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table class=\"table borderless\">\n            <tbody>\n                <tr>\n                    <td style=\"width: 200px\">\n                        <span>e-Waybill No:</span>\n                    </td>\n                    <td>\n                        <span class=\"e-waybill-number\">\n                            <strong>{{ add_spacing(data.ewbNo, 4) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>e-Waybill Date:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \"\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Generated By:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>\n                                {{ add_spacing(data.userGstin, 5) }} - {{ generated_by }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid From:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \" \") }}\n                                {{ \" [\" }}{{ data.actualDist }}{{ \"Kms]\" }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid Until:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.validUpto[:10] }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if irn %}\n                <tr>\n                    <td>\n                        <span>IRN:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ irn }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - A</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Supplier</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.fromGstin, 5) }}-{{ data.fromTrdName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Dispatch</td>\n                    <td>\n                        <span>\n                            <strong>{{ data.fromPlace }},\n                                {{ get_state(data.actFromStateCode) }} -\n                                {{ data.fromPincode }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Recipient</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.toGstin, 5) }}-{{ data.toTrdName }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Delivery</td>\n                    <td>\n                        <span><strong>\n                                {{ data.toPlace }},\n                                {{ get_state(data.actToStateCode) }} -{{ data.toPincode }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document No.</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docNo }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document Date</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docDate }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Transaction Type:</span>\n                    </td>\n                    <td>\n                        <span><strong>{{ get_transport_type(data.transactionType) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Value of Goods</td>\n                    <td>\n                        <span class=\"classfont\">\n                            <strong>\n                                {{ frappe.utils.fmt_money(data.totInvValue, currency=\"INR\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>HSN Code</td>\n                    <td>\n                        <span class=\"form-control1\" onkeydown=\"expandtext(this);\">\n                            <strong>{{ data.itemList[0].hsnCode }}\n                                {%if data.itemList[0].productDesc%}\n                                {{ \" - \" ~data.itemList[0].productDesc }}\n                                {%endif%}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Reason for Transportation</td>\n                    <td>\n                        <span>\n                            <strong>{{ get_supply_type(data.supplyType) }} - {{ get_sub_supply_type(data.subSupplyType) }} </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Transporter</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.transporterId, 5) }}-\n                                {{ data.transporterName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if data.VehiclListDetails|length > 0 %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - B</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div>\n                            <table cellspacing=\"0\" cellpadding=\"3\" rules=\"all\" class=\"table table-responsive vehicle-info\" border=\"1\">\n                                <tbody>\n                                    <tr>\n                                        <th scope=\"col\">Mode</th>\n                                        <th scope=\"col\">\n                                            Vehicle / Trans <br />\n                                            Doc No &amp; Dt.\n                                        </th>\n                                        <th scope=\"col\">From</th>\n                                        <th scope=\"col\">Entered Date</th>\n                                        <th scope=\"col\">Entered By</th>\n                                        <th scope=\"col\">\n                                            Cdata No. <br />\n                                            (If any)\n                                        </th>\n                                        <th scope=\"col\">\n                                            Multi Veh.Info <br />\n                                            (If any)\n                                        </th>\n                                    </tr>\n                                    {% for detail in data.VehiclListDetails %}\n                                    <tr>\n                                        <td>\n                                            {{ get_transport_mode(detail.transMode) }}\n                                        </td>\n                                        <td>\n                                            {{ detail.vehicleNo }} /\n                                            {{ detail.transDocNo }} Dt:\n                                            {{ detail.transDocDate }}\n                                        </td>\n                                        <td>{{ detail.fromPlace }}</td>\n                                        <td>\n                                            {{ detail.enteredDate |\n                                                replace(\":00 \", \" \") }}\n                                        </td>\n                                        <td>{{ detail.userGSTINTransin }}</td>\n                                        <td>-</td>\n                                        <td>-</td>\n                                    </tr>\n                                    {% endfor%}\n                                </tbody>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img class=\"barcode\" src=\"data:image/png;base64,{{ get_ewaybill_barcode(data.ewbNo) }}\">\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    {% endif %}\n\n\n\n\n\n    <div id=\"footer-html\" class=\"visible-pdf\">\n        <p class=\"text-center small page-number visible-pdf\">\n            {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n        </p>\n    </div>\n<!--</div>-->",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 0.0,
 "margin_left": 0.0,
 "margin_right": 0.0,
 "margin_top": 0.0,
 "modified": "2025-04-07 14:33:50.128374",
 "modified_by": "Administrator",
 "module": "Business Needed Solutions",
 "name": "BNS DN Dynamic V1",
 "owner": "Administrator",
 "page_number": "Bottom Center",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}