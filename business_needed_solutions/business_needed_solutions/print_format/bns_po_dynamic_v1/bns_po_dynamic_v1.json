{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-11-19 02:08:55.052294",
 "css": ".text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Purchase Order",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% set e_invoice_log = None %}\n{% if doc.irn %}\n{% set e_invoice_log = frappe.db.get_value(\n        \"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True\n    ) %}\n{% set invoice_data = e_invoice_log and e_invoice_log.invoice_data and _dict(json.loads(e_invoice_log.invoice_data)) or None %}\n{% endif %}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n{% set bns_settings = frappe.get_doc(\"BNS Settings\") %}\n{% set base_currency = frappe.db.get_value(\"Company\", doc.company, \"default_currency\") %}\n\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;\">\n            \n        <div class=\"col-xs-3 column-break\">\n            {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n            {% if company_logo %}\n            <div>\n                <img height=\"125px\" width=\"150px\" src=\"{{ company_logo }}\">\n            </div>\n            {% endif %}\n        </div>\n        <div class=\"col-xs-6 column-break text-center\">\n            <h3 style=\"margin:0;\"><b>{{ doc.company }}</b></h3>\n            {% if frappe.db.get_value(\"Company\",doc.company,\"bns_previously_known_as\") %}\n                <div style=\"font-size:0.85em;\">Previously Known As: {{frappe.db.get_value(\"Company\",doc.company,\"bns_previously_known_as\")}}</div>\n            {% endif %}\n            <div style=\"font-size:0.85rem\">\n                {% set seller_address = frappe.db.get_value(\"Address\", doc.billing_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                    {{ format_address(seller_address) }}\n                    {% if doc.company_gstin %}\n                    GST: {{ doc.company_gstin }}<br>\n                    {% endif %}\n                    <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                \n            </div>\n        </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;font-size:0.95rem\"><b>\n                    {% if doc.status == \"Draft\" %}\n                        Draft PO\n                    {% elif doc.status == \"On Hold\" %}\n                        On Hold PO\n                    {% elif doc.status == \"To Receive and Bill\" %}\n                        PO \u2013 To Receive and Bill\n                    {% elif doc.status == \"To Bill\" %}\n                        PO \u2013 To Bill\n                    {% elif doc.status == \"To Receive\" %}\n                        PO \u2013 To Receive\n                    {% elif doc.status == \"Completed\" %}\n                        Completed PO\n                    {% elif doc.status == \"Cancelled\" %}\n                        Cancelled PO\n                    {% elif doc.status == \"Closed\" %}\n                        Closed PO\n                    {% elif doc.status == \"Delivered\" %}\n                        Delivered PO\n                    {% else %}\n                        Purchase Order\n                    {% endif %}\n                </b></h2>\n                <div class=\"po-meta\">\n                  <table class=\"table-condensed no-border\" style=\"width:100%; font-size:0.6rem; text-align:left;\">\n                    <tr>\n                      <td style=\"white-space:nowrap;\"><b>PO Date:</b></td>\n                      <td>{{ frappe.utils.formatdate(doc.transaction_date) }}</td>\n                    </tr>\n                    <tr>\n                      <td style=\"white-space:nowrap;\"><b>Delivery Date:</b></td>\n                      <td>{{ frappe.utils.formatdate(doc.schedule_date) }}</td>\n                    </tr>\n                    <tr>\n                      <td style=\"white-space:nowrap;\"><b>PO No:</b></td>\n                      <td><b>{{ doc.name }}</b></td>\n                    </tr>\n                  </table>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Supplier Details</u></b></h6>\n                            <p><b>{{ doc.supplier_name }}</b></p>\n                            {% set supplier_address = frappe.db.get_value(\"Address\", doc.supplier_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(supplier_address) }}\n\n                            {% if doc.supplier_gstin %}\n                            GST: <u>{{ doc.supplier_gstin }}</u><br>\n                            {% endif %}\n                            {% set supplier_pan = frappe.db.get_value(\"Customer\", doc.supplier_name, \"pan\")%}\n                            {% if supplier_pan %}\n                            PAN: {{ supplier_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            </td><td>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% endif %}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <table class=\"table table-bordered item-det\">\n<thead>\n    <tr>\n        <th colspan=\"2\">#</th>\n        <th colspan=\"24\">Item</th>\n        <th colspan=\"7\">HSN/SAC</th>\n        <th colspan=\"7\">Qty</th>\n        {% if bns_settings.rate_excl_tax %}\n        <th colspan=\"9\">Rate(Exc Tax)</th>\n        {% endif %}\n        {% if doc.is_print_gst_rate_per_row %}\n        <th colspan=\"4\">GST</th>\n        {% endif %}\n        {% if bns_settings.rate_incl_tax %}\n        <th colspan=\"9\">Rate(Inc Tax)</th>\n        {% endif %}\n\n        <th colspan=\"4\">Disc</th>\n        {% if bns_settings.is_item_amount_tax_incl %}\n        <th colspan=\"11\">Amount(Incl)</th>\n        {% else %}\n        <th colspan=\"11\">Amount(Excl)</th>\n        {% endif %}\n    </tr>\n</thead>\n\n    <tbody>\n        {% for item in doc.items %}\n        <tr class=\"no-break {{ 'odd' if loop.index is odd else 'even' }}\">\n            <td colspan=\"2\">{{ loop.index }}</td>\n            <td colspan=\"24\" class=\"item-det-item-name\">\n                <b>{% if bns_settings.show_item_code or doc.bns_show_item_code %}{{ item.item_code }}: {% endif %}{{ item.item_name }}</b><br>\n                {% if item.barcode and (doc.bns_show_item_barcode or bns_settings.bns_show_item_barcode) %}\n                <p style=\"font-size:0.75em;\">\n                    EAN: {{ item.barcode }}\n                </p>\n                {% endif %}\n            </td>\n            <td colspan=\"7\">{{ item.gst_hsn_code }}</td>\n            <td colspan=\"7\">\n                <b>\n                    <span>{{ item.qty }} {{ item.uom }}</span>\n                    {% if bns_settings.secondary_rate_display %}\n                        {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                            {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                            {% if print_uom and item.uom != print_uom %}\n                                {% set print_uom_conversion = frappe.db.get_value(\n                                    \"UOM Conversion Detail\",\n                                    {\"parent\": item.item_code, \"uom\": print_uom},\n                                    \"conversion_factor\"\n                                ) %}\n                                <br>\n                                <small style=\"font-size:0.7em;\">{{ (item.conversion_factor * item.qty / print_uom_conversion ) | int }} {{ print_uom }} </small>\n                                \n                            {% endif %}\n                        {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                            {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                <br>\n                                <small style=\"font-size:0.6em;\">{{ item.total_weight }} Kg</small>\n                            {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                <br>\n                                <small style=\"font-size:0.6rem;\">{{ item.total_weight / 1000 }} Kg</small>\n                            {% endif %}\n                        {% endif %}\n                    {% endif %}\n                </b>\n            </td>\n            {% if doc.taxes[0].included_in_print_rate == 1 %}\n            \n                {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                {% set inclusive_rate = item.base_price_list_rate %}\n                {% set exclusive_rate = inclusive_rate*100/(100+gst_rate) %}\n            \n            {% else %}\n            \n                {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                {% set exclusive_rate = item.base_price_list_rate %}\n                {% set inclusive_rate = exclusive_rate*(100+gst_rate)/100 %}\n            \n            {% endif %}\n            \n            {% if bns_settings.rate_excl_tax %}\n            <td colspan=\"9\">\n                <b>\n                    <span>\n                    {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate), currency=base_currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                    </span>\n                    \n                    {% if bns_settings.secondary_rate_display %}\n                        {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                            {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                            {% if print_uom and item.uom != print_uom %}\n                                {% set print_uom_conversion = frappe.db.get_value(\n                                    \"UOM Conversion Detail\",\n                                    {\"parent\": item.item_code, \"uom\": print_uom},\n                                    \"conversion_factor\"\n                                ) %}\n                                <br>\n                                <span style=\"font-size:0.9em;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate * print_uom_conversion / item.conversion_factor), currency=base_currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                </span>\n                            {% endif %}\n                        {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                            {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                <p style=\"font-size:0.8em;\">\n                                    {% set calculated_value = exclusive_rate * item.qty / item.total_weight %}\n                                    {{ frappe.utils.fmt_money(calculated_value, currency=base_currency) }}/Kg\n                                </p>\n                            {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                <p style=\"font-size:0.8em;\">\n                                    {% set calculated_value = exclusive_rate * item.qty * 1000 / item.total_weight %}\n                                    {{ frappe.utils.fmt_money(calculated_value, currency=base_currency) }}/Kg\n                                </p>\n                            {% endif %}\n                        {% endif %}\n                    {% endif %}\n                </b>\n            </td>\n            {% endif %}\n            \n            {% if doc.is_print_gst_rate_per_row %}\n                <td colspan=\"4\">{{ gst_rate | round(0) | int }}%</td>\n            {% endif %}\n            \n            {% if bns_settings.rate_incl_tax %}\n            <td colspan=\"9\">\n                <b>\n                    <span>\n                    {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate), currency=base_currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                    </span>\n                    \n                    {% if bns_settings.secondary_rate_display %}\n                        {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                            {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                            {% if print_uom and item.uom != print_uom %}\n                                {% set print_uom_conversion = frappe.db.get_value(\n                                    \"UOM Conversion Detail\",\n                                    {\"parent\": item.item_code, \"uom\": print_uom},\n                                    \"conversion_factor\"\n                                ) %}\n                                <br>\n                                <span style=\"font-size:0.9em;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate * print_uom_conversion / item.conversion_factor), currency=base_currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                </span>\n                            {% endif %}\n                        {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                            {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                <p style=\"font-size:0.8em;\">\n                                    {% set calculated_value = inclusive_rate * item.qty / item.total_weight %}\n                                    {{ frappe.utils.fmt_money(calculated_value, currency=base_currency) }}/Kg\n                                </p>\n                            {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                <p style=\"font-size:0.8em;\">\n                                    {% set calculated_value = inclusive_rate * item.qty * 1000 / item.total_weight %}\n                                    {{ frappe.utils.fmt_money(calculated_value, currency=base_currency) }}/Kg\n                                </p>\n                            {% endif %}\n                        {% endif %}\n                    {% endif %}\n                </b>\n            </td>\n            {% endif %}\n            \n\n            <td colspan=\"4\">{{ item.discount_percentage }}% </td>\n            {% if bns_settings.is_item_amount_tax_incl %}\n            <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(\"{:.2f}\".format(item.base_net_amount*(1+(gst_rate/100))), currency=base_currency) }}</b></td>\n            {% else %}\n            <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(\"{:.2f}\".format(item.base_net_amount), currency=base_currency) }}</b></td>\n            {% endif %}\n        </tr>\n        {% endfor %}\n    </tbody>\n</table>\n\n\n    <!--</div>-->\n\n\n<div class=\"final-tax-total-table\">\n    <table class=\"table table-bordered\">\n        <tbody>\n            <tr>\n                <td rowspan=1 colspan=5 style=\"vertical-align:top !important; width:45%;\" class=\"text-center\"><b>T & C</b></td>\n                <td class=\"text-right\" colspan=2><b>Total Taxable Value</b></td>\n                <td class=\"text-right text-nowrap\" colspan=2>{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.base_net_total), currency=base_currency) }}</td>\n            </tr>\n            {% set ns = namespace(freight_row=false) %}\n            \n            {% for tax_row in doc.taxes %}\n                {% if \"Freight and Forwarding Charges\" in tax_row.account_head %}\n                    {% set ns.freight_row = tax_row %}\n                {% endif %}\n            {% endfor %}\n            {% set freight_row = ns.freight_row %}\n                \n                <tr>\n                    <td class=\"text-center\" rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=5 style=\"vertical-align:top !important;\">\n                        {%if doc.terms%}{{doc.terms}}{%endif%}\n                    </td>\n                    <td class=\"text-right\" colspan=2><b>Total Taxes and Charges</b></td>\n                    <td class=\"text-right text-nowrap\" colspan=2>{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.base_total_taxes_and_charges), currency=base_currency) }}</td>\n                </tr>\n            {% if freight_row %}\n                <tr>\n                    <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(freight_row.tax_amount), currency=doc.currency) }}</td>\n                </tr>\n                {% endif %}\n            {% if doc.discount_amount %}\n            <tr>\n                <td class=\"text-right\" colspan=2>Additional Discount</td>\n                <td class=\"text-right text-nowrap\" colspan=2><b>{{ frappe.utils.fmt_money(doc.base_discount_amount, currency=base_currency) }}</b></td>\n            </tr>\n            {% endif %}\n            <tr>\n                <td class=\"text-right\" colspan=2><b>Grand Total</b></td>\n                <td class=\"text-right text-nowrap\" colspan=2><b>{{ frappe.utils.fmt_money(doc.base_rounded_total, currency=base_currency) }}</b></td>\n            </tr>\n            <tr>\n                <td colspan=4>\n                    <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.base_in_words }}</span>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n    \n    {{ doc.gst_breakup_table }}\n    {% if doc.is_print_gst_table %}\n    \n    {% set gst_summary = {} %}\n    {% set gst_flags = {\"uses_igst\": false, \"uses_cgst_sgst\": false} %}\n        \n        {% for item in doc.items %}\n            {% set gst_rate = (frappe.db.get_value(\"Item Tax Template\", {\"name\": item.item_tax_template}, \"gst_rate\") or 0) | float %}\n            {% set key = gst_rate|string %}\n        \n            {% if item.igst_amount %}\n                {% set _ = gst_flags.update({\"uses_igst\": true}) %}\n                {% if gst_summary[key] is not defined %}\n                    {% set _ = gst_summary.update({ key: {\n                        \"gst_rate\": gst_rate,\n                        \"taxable_value\": 0,\n                        \"igst_amount\": 0\n                    } }) %}\n                {% endif %}\n                {% set _ = gst_summary[key].update({\n                    \"taxable_value\": gst_summary[key].taxable_value + item.net_amount,\n                    \"igst_amount\": gst_summary[key].igst_amount + item.igst_amount\n                }) %}\n            {% elif item.cgst_amount and item.sgst_amount %}\n                {% set _ = gst_flags.update({\"uses_cgst_sgst\": true}) %}\n                {% if gst_summary[key] is not defined %}\n                    {% set _ = gst_summary.update({ key: {\n                        \"gst_rate\": gst_rate,\n                        \"taxable_value\": 0,\n                        \"cgst_amount\": 0,\n                        \"sgst_amount\": 0\n                    } }) %}\n                {% endif %}\n                {% set _ = gst_summary[key].update({\n                    \"taxable_value\": gst_summary[key].taxable_value + item.net_amount,\n                    \"cgst_amount\": gst_summary[key].cgst_amount + item.cgst_amount,\n                    \"sgst_amount\": gst_summary[key].sgst_amount + item.sgst_amount\n                }) %}\n            {% endif %}\n        {% endfor %}\n        \n        <h4>GST Summary</h4>\n        <table class=\"table table-bordered table-hover\" style=\"text-align: center;\">\n            <thead>\n                <tr>\n                    <th rowspan=\"2\" style=\"text-align: center; vertical-align: middle;\">GST RATE</th>\n                    <th rowspan=\"2\" style=\"text-align: center; vertical-align: middle;\">Taxable Value</th>\n                    {% if gst_flags.uses_cgst_sgst %}\n                        <th colspan=\"2\" style=\"text-align: center; vertical-align: middle;\">CGST</th>\n                        <th colspan=\"2\" style=\"text-align: center; vertical-align: middle;\">SGST/UTGST</th>\n                    {% elif gst_flags.uses_igst %}\n                        <th colspan=\"2\" style=\"text-align: center; vertical-align: middle;\">IGST</th>\n                    {% endif %}\n                </tr>\n                <tr>\n                    {% if gst_flags.uses_cgst_sgst %}\n                        <th style=\"text-align: center; vertical-align: middle;\">Rate</th>\n                        <th style=\"text-align: center; vertical-align: middle;\">Amount</th>\n                        <th style=\"text-align: center; vertical-align: middle;\">Rate</th>\n                        <th style=\"text-align: center; vertical-align: middle;\">Amount</th>\n                    {% elif gst_flags.uses_igst %}\n                        <th style=\"text-align: center; vertical-align: middle;\">Rate</th>\n                        <th style=\"text-align: center; vertical-align: middle;\">Amount</th>\n                    {% endif %}\n                </tr>\n            </thead>\n            <tbody>\n                {% for row in gst_summary.values() %}\n                    <tr>\n                        <td>{{ row.gst_rate }}%</td>\n                        <td>{{ frappe.utils.fmt_money(\"{:.2f}\".format(row.taxable_value), currency=doc.currency) }}</td>\n        \n                        {% if gst_flags.uses_cgst_sgst %}\n                            <td>{{ (row.gst_rate / 2) | round(1) }}%</td>\n                            <td>{{ frappe.utils.fmt_money(\"{:.2f}\".format(row.cgst_amount), currency=doc.currency) }}</td>\n                            <td>{{ (row.gst_rate / 2) | round(1) }}%</td>\n                            <td>{{ frappe.utils.fmt_money(\"{:.2f}\".format(row.sgst_amount), currency=doc.currency) }}</td>\n                        {% elif gst_flags.uses_igst %}\n                            <td>{{ row.gst_rate }}%</td>\n                            <td>{{ frappe.utils.fmt_money(\"{:.2f}\".format(row.igst_amount), currency=doc.currency) }}</td>\n                        {% endif %}\n                    </tr>\n                {% endfor %}\n            </tbody>\n        </table>\n    \n    \n    {% endif %}\n    \n    \n    <table class=\"table table-bordered\" style=\" table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n        <tr rowspan=1>\n            <td rowspan=1 colspan=4>\n                <b>{% if doc.is_print_payment_terms==1%} Payment Terms {% endif %}</b>\n            </td>\n            <td colspan=4>\n                <b>Pre Authenticated By: {{doc.company}}</b>\n            </td>\n        </tr>\n        <tr>\n            <td colspan=4 rowspan=3>\n            {% if doc.payment_schedule and doc.is_print_payment_terms==1 %}\n            <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                <thead>\n                    <tr>\n                        <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                        <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                        <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n    \n                    </tr>\n                </thead>\n                <tbody>\n                    {% for row in doc.payment_schedule %}\n                    <tr>\n                        <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                        <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                        <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n            {% endif %}\n            </td>\n            <td colspan=4>\n                Issuing Signatory\n            </td>\n        </tr>\n        <tr rowspan=1>\n            <td colspan=1 style=\"text-align:left\">\n                Name:\n            </td>\n            <td colspan=3></td>\n        </tr>\n        <tr rowspan=1>\n            <td colspan=1 style=\"text-align:left;\">\n                Designation:\n            </td>\n            <td colspan=3></td>\n        </tr>\n    </table>\n\n</div>\n\n\n\n\n\n<div id=\"footer-html\">\n    <div class=\"text-center small page-footer-1\">\n        {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n    </div>\n</div>\n\n<!--</div>-->",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-11-19 02:17:03.801625",
 "modified_by": "Administrator",
 "module": "Business Needed Solutions",
 "name": "BNS PO Dynamic V1",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}