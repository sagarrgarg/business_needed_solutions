[
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Purchase Order",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% set e_invoice_log = None %}\n{% if doc.irn %}\n{% set e_invoice_log = frappe.db.get_value(\n        \"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True\n    ) %}\n{% set invoice_data = e_invoice_log and e_invoice_log.invoice_data and _dict(json.loads(e_invoice_log.invoice_data)) or None %}\n{% endif %}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;padding:10px\">\n            <div class=\"col-xs-3 column-break\">\n                {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n                {% if company_logo %}\n                <div>\n                    <img width=\"100%\" src=\"{{ company_logo }}\">\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 column-break text-center\">\n                <h2 style=\"margin:0;font-size:0.85rem\">{{ doc.company }}</h2>\n                <div style=\"font-size:0.65rem\">\n                    <b>{% set seller_address = frappe.db.get_value(\"Address\", doc.billing_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                        {{ format_address(seller_address) }}\n                        {% if doc.company_gstin %}\n                        GST: {{ doc.company_gstin }}<br>\n                        {% endif %}\n                        <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                    </b>\n                </div>\n            </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;font-size:0.95rem\"><b>\n                    {% if doc.status == \"Draft\" %}\n                        Draft PO\n                    {% elif doc.status == \"On Hold\" %}\n                        On Hold PO\n                    {% elif doc.status == \"To Receive and Bill\" %}\n                        PO – To Receive and Bill\n                    {% elif doc.status == \"To Bill\" %}\n                        PO – To Bill\n                    {% elif doc.status == \"To Receive\" %}\n                        PO – To Receive\n                    {% elif doc.status == \"Completed\" %}\n                        Completed PO\n                    {% elif doc.status == \"Cancelled\" %}\n                        Cancelled PO\n                    {% elif doc.status == \"Closed\" %}\n                        Closed PO\n                    {% elif doc.status == \"Delivered\" %}\n                        Delivered PO\n                    {% else %}\n                        Purchase Order\n                    {% endif %}\n                </b></h2>\n                <div class=\"row\" style=\"font-size:0.6rem\">\n                    <div class=\"col-xs-5 text-left\" style=\"text-wrap: nowrap;font-size:0.5rem\"><b>PO Date:<br>Delivery Date:<br>PO No:</b></div>\n                    <div class=\"col-xs-7 text-right\" style=\"text-wrap: nowrap;font-size:0.5rem\">{{ frappe.utils.formatdate(doc.transaction_date) }}<br>{{ frappe.utils.formatdate(doc.schedule_date) }}<br><b>{{ doc.name }}</b><br>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Supplier Details</u></b></h6>\n                            <p><b>{{ doc.supplier_name }}</b></p>\n                            {% set supplier_address = frappe.db.get_value(\"Address\", doc.supplier_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(supplier_address) }}\n\n                            {% if doc.supplier_gstin %}\n                            GST: <u>{{ doc.supplier_gstin }}</u><br>\n                            {% endif %}\n                            {% set supplier_pan = frappe.db.get_value(\"Customer\", doc.supplier_name, \"pan\")%}\n                            {% if supplier_pan %}\n                            PAN: {{ supplier_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            </td><td>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% endif %}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <!--</div>-->\n        <div class=\"col-xs-12 column-break item-det\">\n            <table class=\"table table-bordered e-invoice-table\">\n                <thead>\n                    <tr>\n                        <th colspan=\"2\">#</th>\n                        <th colspan=\"24\">Item</th>\n                        <th colspan=\"7\">HSN/SAC</th>\n                        <th colspan=\"7\">Qty</th>\n                        {% if doc.taxes[0].included_in_print_rate == 1 %}\n                            <th colspan=\"15\">Rate(Inc Tax)</th>\n                        {% else %}\n                            <th colspan=\"15\">Rate(Exc Tax)</th>\n                        {% endif %}\n                        <!--<th colspan=\"9\">Rate(Exc Tax)</th>-->\n                        <th colspan=\"8\">Desc</th>\n                        <th colspan=\"11\">Net Total</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {% for item in doc.items %}\n                    <tr class=\"no-break\">\n                        <td colspan=\"2\">{{ loop.index }}</td>\n                        <td colspan=\"24\">\n                            <b>{{ item.item_code }}: {{ item.item_name }}</b><br>\n                            {% if item.barcode %}\n                            <p style=\"font-size:0.35rem;\">\n                                EAN: {{ item.barcode }}\n                            </p>\n                            {% endif %}\n                        </td>\n                        <td colspan=\"7\">{{ item.gst_hsn_code }}</td>\n                        <td colspan=\"7\" class=\"text-left\" style=\"line-height: 95%;\"><b>\n                            {% set is_uom_whole = frappe.db.get_value(\"UOM\", item.uom, \"must_be_whole_number\") %}\n                            {% set is_stock_uom_whole = frappe.db.get_value(\"UOM\", item.stock_uom, \"must_be_whole_number\") %}\n                            <span style=\"font-size:0.5rem;\">\n                                {% if is_uom_whole %}\n                                    {{ item.qty | int}}\n                                {% else %}\n                                    {{ item.qty}}\n                                {% endif %}\n                            </span>\n                            <span style=\"font-size:0.45rem;\">\n                                {{ item.uom }}\n                            </span>\n                            {% if item.uom != item.stock_uom %}\n                                {% set stock_qty = item.stock_qty/item.qty %}\n                                <p style=\"font-size:0.35rem;\">\n                                    {% if is_stock_uom_whole %}\n                                        {{stock_qty | int}}\n                                    {% else %}\n                                        {{stock_qty}}\n                                    {% endif %}\n                                    {{item.stock_uom}}/{{ item.uom }}\n                                </p>\n                            {% endif %}\n                            </b>\n                        </td>\n                        <td colspan=\"15\">\n                            <b>\n                                <p style=\"font-size:0.55rem;\">\n                                {{ frappe.utils.fmt_money(item.rate, currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </p>\n                            </b>\n                        </td>\n                        <td colspan=\"8\">{{ item.discount_percentage }}% </td>\n                        <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(item.net_amount, currency=doc.currency) }}</b></td>\n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        </div>\n\n\n\n    <!--</div>-->\n\n\n{% set freight_row = doc.taxes | selectattr('account_head', 'equalto', 'Freight and Forwarding Charges - RHCPL') | first %}\n    <!--<div class=\"no-break\">-->\n        <table class=\"table table-bordered e-invoice-table\">\n            <tbody>\n                <tr>\n                    <td rowspan=1 colspan=2 style=\"vertical-align:top !important;\"><b>T&C</b></td>\n                    <td class=\"text-right\">Total Taxable Value</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.net_total, currency=\"INR\") }}</td>\n                </tr>\n                \n                {% if freight_row %}\n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.total_taxes_and_charges-freight_row.tax_amount, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                    <tr>\n                        <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(freight_row.tax_amount, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                {% else %}\n                    \n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.total_taxes_and_charges, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                    \n                {% endif %}\n                \n                {% if doc.discount_amount %}\n                <tr>\n                    <td class=\"text-right\">Additional Discount</td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.discount_amount, currency=\"INR\") }}</b></td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td class=\"text-right\"><b>Grand Total</b></td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.rounded_total, currency=\"INR\") }}</b></td>\n                </tr>\n                <tr>\n                    <td colspan=2>\n                        <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.in_words }}</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    <!--</div>-->\n    {{ doc.gst_breakup_table }}\n    <div class=\"no-break\">\n        <table style=\"table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4>\n                    <b>Bank Details</b>\n                </td>\n                <td colspan=4>\n                    <b>Pre Authenticated By. : </b>{{doc.company}}\n                </td>\n            </tr>\n            <tr rowspan=3>\n                <td rowspan=1 colspan=4>\n                    {% set bank_account = frappe.db.get_value(\"Bank Account\", {\"company\": doc.company, \"is_default\": 1}, [\"account_name\",\"bank\", \"bank_account_no\", \"branch_code\",\"iban\"], as_dict=True) %}\n                    {% if bank_account.account_name %}\n                    Account Name: <b><i>{{ bank_account.account_name }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank %}\n                    Bank Name: <b><i>{{ bank_account.bank }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank_account_no %}\n                    Account Number: <b><i>{{ bank_account.bank_account_no }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.branch_code %}\n                    Branch Code (IFSC): <b><i>{{ bank_account.branch_code }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.iban %}\n                    IBAN: <b><i>{{ bank_account.iban }}</i></b><br>\n                    {% endif %}\n                </td>\n                <td colspan=4><br><br><br><br></td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4><b>{% if doc.custom_is_print==1%} Payment Terms {% endif %}</b></td>\n                <td colspan=2>\n                    Authorised Signatory\n                </td>\n                <td colspan=2>\n                    Issuing Signatory\n                </td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=2 colspan=4>\n                    {% if doc.payment_schedule and doc.custom_is_print==1 %}\n                    <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                        <thead>\n                            <tr>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for row in doc.payment_schedule %}\n                            <tr>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                            </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                    {% endif %}\n                </td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n            </tr>\n            <tr rowspan=1>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n            </tr>\n        </table>\n    <!--</div>-->\n\n\n\n    {% if doc.ewaybill %}\n    {% set e_waybill_data = frappe.db.get_value(\"e-Waybill Log\", {\"reference_name\": doc.name, \"reference_doctype\": \"Sales Invoice\"}, \"data\") %}\n    <div class=\"page-break\"></div>\n    {% set data = _dict(json.loads(e_waybill_data)) %}\n    {%- set irn = doc.irn -%}\n\n    {% if data.supplyType == \"O\" %}\n    {% set generated_by = data.fromTrdName %}\n    {% else %}\n    {% set generated_by = data.toTrdName %}\n    {% endif %}\n\n    <div class=\"ewaybill-page-layout\">\n        <table class=\"table borderless\" style=\"border:0\">\n            <tbody>\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <h1 class=\"title\">e-Waybill</h1>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img src=\"data:image/png;base64,{{ get_e_waybill_qr_code(data.ewbNo,data.userGstin, data.ewayBillDate) }}\" class=\"qr-code\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table class=\"table borderless\">\n            <tbody>\n                <tr>\n                    <td style=\"width: 200px\">\n                        <span>e-Waybill No:</span>\n                    </td>\n                    <td>\n                        <span class=\"e-waybill-number\">\n                            <strong>{{ add_spacing(data.ewbNo, 4) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>e-Waybill Date:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \"\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Generated By:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>\n                                {{ add_spacing(data.userGstin, 5) }} - {{ generated_by }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid From:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \" \") }}\n                                {{ \" [\" }}{{ data.actualDist }}{{ \"Kms]\" }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid Until:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.validUpto[:10] }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if irn %}\n                <tr>\n                    <td>\n                        <span>IRN:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ irn }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - A</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Supplier</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.fromGstin, 5) }}-{{ data.fromTrdName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Dispatch</td>\n                    <td>\n                        <span>\n                            <strong>{{ data.fromPlace }},\n                                {{ get_state(data.actFromStateCode) }} -\n                                {{ data.fromPincode }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Recipient</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.toGstin, 5) }}-{{ data.toTrdName }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Delivery</td>\n                    <td>\n                        <span><strong>\n                                {{ data.toPlace }},\n                                {{ get_state(data.actToStateCode) }} -{{ data.toPincode }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document No.</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docNo }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document Date</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docDate }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Transaction Type:</span>\n                    </td>\n                    <td>\n                        <span><strong>{{ get_transport_type(data.transactionType) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Value of Goods</td>\n                    <td>\n                        <span class=\"classfont\">\n                            <strong>\n                                {{ frappe.utils.fmt_money(data.totInvValue, currency=\"INR\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>HSN Code</td>\n                    <td>\n                        <span class=\"form-control1\" onkeydown=\"expandtext(this);\">\n                            <strong>{{ data.itemList[0].hsnCode }}\n                                {%if data.itemList[0].productDesc%}\n                                {{ \" - \" ~data.itemList[0].productDesc }}\n                                {%endif%}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Reason for Transportation</td>\n                    <td>\n                        <span>\n                            <strong>{{ get_supply_type(data.supplyType) }} - {{ get_sub_supply_type(data.subSupplyType) }} </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Transporter</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.transporterId, 5) }}-\n                                {{ data.transporterName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if data.VehiclListDetails|length > 0 %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - B</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div>\n                            <table cellspacing=\"0\" cellpadding=\"3\" rules=\"all\" class=\"table table-responsive vehicle-info\" border=\"1\">\n                                <tbody>\n                                    <tr>\n                                        <th scope=\"col\">Mode</th>\n                                        <th scope=\"col\">\n                                            Vehicle / Trans <br />\n                                            Doc No &amp; Dt.\n                                        </th>\n                                        <th scope=\"col\">From</th>\n                                        <th scope=\"col\">Entered Date</th>\n                                        <th scope=\"col\">Entered By</th>\n                                        <th scope=\"col\">\n                                            Cdata No. <br />\n                                            (If any)\n                                        </th>\n                                        <th scope=\"col\">\n                                            Multi Veh.Info <br />\n                                            (If any)\n                                        </th>\n                                    </tr>\n                                    {% for detail in data.VehiclListDetails %}\n                                    <tr>\n                                        <td>\n                                            {{ get_transport_mode(detail.transMode) }}\n                                        </td>\n                                        <td>\n                                            {{ detail.vehicleNo }} /\n                                            {{ detail.transDocNo }} Dt:\n                                            {{ detail.transDocDate }}\n                                        </td>\n                                        <td>{{ detail.fromPlace }}</td>\n                                        <td>\n                                            {{ detail.enteredDate |\n                                                replace(\":00 \", \" \") }}\n                                        </td>\n                                        <td>{{ detail.userGSTINTransin }}</td>\n                                        <td>-</td>\n                                        <td>-</td>\n                                    </tr>\n                                    {% endfor%}\n                                </tbody>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img class=\"barcode\" src=\"data:image/png;base64,{{ get_ewaybill_barcode(data.ewbNo) }}\">\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    {% endif %}\n\n\n\n\n\n    <div id=\"footer-html\" class=\"visible-pdf\">\n        <p class=\"text-center small page-number visible-pdf\">\n            {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n        </p>\n    </div>\n<!--</div>-->",
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2025-04-07 01:39:54.433312",
  "module": "Business Needed Solutions",
  "name": "BNS PO - V1",
  "page_number": "Hide",
  "pdf_generator": null,
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Delivery Note",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;padding:10px\">\n            <div class=\"col-xs-3 column-break\">\n                {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n                {% if company_logo %}\n                <div>\n                    <img width=\"100%\" src=\"{{ company_logo }}\">\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 column-break text-center\">\n                <h2 style=\"margin:0;\">{{ doc.company }}</h2>\n                <div style=\"font-size:0.85rem\">\n                    <b>{% set seller_address = frappe.db.get_value(\"Address\", doc.company_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                        {{ format_address(seller_address) }}\n                        {% if doc.company_gstin %}\n                        GST: {{ doc.company_gstin }}<br>\n                        {% endif %}\n                        <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                    </b>\n                </div>\n            </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;\"><b>\n                        {% if doc.status == \"Draft\" %}\n                        Draft DN\n                        {% elif doc.status == \"Cancelled\" %}\n                        Cancelled DN\n                        {% else %}\n                        Delivery Note\n                        {% endif %}\n                    </b>\n                </h2>\n                <div class=\"row\" style=\"font-size:0.6rem\">\n                    <div class=\"col-xs-5 text-left\" style=\"text-wrap: nowrap;font-size:0.45rem\"><b>Inv Date:<br>Invoice No:<br>Place of Supply:</b></div>\n                    <div class=\"col-xs-7 text-right\" style=\"text-wrap: nowrap;\">{{ frappe.utils.formatdate(doc.posting_date) }}<br><b>{{ doc.name }}</b><br>\n                        <div>{{doc.place_of_supply}}</div>\n                    </div>\n                    <!--<div class=\"col-xs-5 column-break\" style=\"\"></div>-->\n                </div>\n            </div>\n        </div>\n    </div>\n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td colspan=6 rowspan=4>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Buyer Details</u></b></h6>\n                            <p><b>{{ doc.customer_name }}</b></p>\n                            {% set customer_address = frappe.db.get_value(\"Address\", doc.customer_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(customer_address) }}\n\n                            {% if doc.billing_address_gstin %}\n                            GST: <u>{{ doc.billing_address_gstin }}</u><br>\n                            {% endif %}\n                            {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer_name, \"pan\")%}\n                            {% if customer_pan %}\n                            PAN: {{ customer_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address_name }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% endif %}\n                            {% if doc.dispatch_address %}\n                            <h6><b><u>Dispatch Details</u></b></h6>\n                            <p><b>{{ frappe.db.get_value(\"Address\", doc.dispatch_address_name, \"address_title\") }}</b></p>\n                            <!--<p>{{doc.dispatch_address}}</p>-->\n                            {% set dispatch_address = frappe.db.get_value(\"Address\", doc.dispatch_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                            {{ format_address(dispatch_address) }}\n                            {% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Transporter:</h6>\n                            {% if doc.transporter_name %}\n                            {{ doc.transporter_name }} <br>\n                            {{ doc.gst_transporter_id }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Vehicle No:</h6>\n                            {% if doc.vehicle_no %}\n                            {{ doc.vehicle_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Builty No:</h6>\n                            {% if doc.custom_builty_no %}\n                            {{ doc.custom_builty_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Remarks:</h6>\n                            {% if doc.remarks %}\n                            {{ doc.remarks }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=2>\n                            \n                            <h6>Destination:</h6>\n                            {% if doc.custom_destination %}\n                            {{doc.custom_destination}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td rowspan=2 colspan=4>\n                            <h6>Terms of Delivery:</h6>\n                            {% if doc.custom_terms_of_delivery %}\n                            {{ doc.custom_terms_of_delivery }}\n                            {% elif doc.custom_terms_of_delivery_new %}\n                            {{ doc.custom_terms_of_delivery_new }}\n                            {% else %}<br><br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=2 rowspan=1>\n                            <h6>Ewaybill No:</h6>\n                            {% if doc.ewaybill %}\n                                {{ doc.ewaybill }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <!--</div>-->\n        <div class=\"col-xs-12 column-break item-det\">\n            <table class=\"table table-bordered e-invoice-table\">\n                <thead>\n                    <tr>\n                        <th colspan=\"2\">#</th>\n                        <th colspan=\"24\">Item</th>\n                        <th colspan=\"7\">HSN/SAC</th>\n                        <th colspan=\"7\">Qty</th>\n                        {% if doc.taxes%}\n                        <th colspan=\"9\">Rate(Inc Tax)</th>\n                        <th colspan=\"9\">Rate(Exc Tax)</th>\n                        {% else %}\n                        <th colspan=\"9\">Rate</th>\n                        {% endif %}\n                        <th colspan=\"4\">Disc(%)</th>\n                        <th colspan=\"11\">Net Total</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {% for item in doc.items %}\n                    <tr class=\"no-break\">\n                        <td colspan=\"2\">{{ loop.index }}</td>\n                        <td colspan=\"24\">\n                            <b>{{ item.item_name }}</b><br>\n                            {% if item.barcode %}\n                            <p style=\"font-size:0.35rem;\">\n                                EAN: {{ item.barcode }}\n                            </p>\n                            {% endif %}\n                        </td>\n                        <td colspan=\"7\">{{ item.gst_hsn_code }}</td>\n                        <td colspan=\"7\" class=\"text-left\" style=\"line-height: 95%;\"><b>\n                            {% set is_uom_whole = frappe.db.get_value(\"UOM\", item.uom, \"must_be_whole_number\") %}\n                            {% set is_stock_uom_whole = frappe.db.get_value(\"UOM\", item.stock_uom, \"must_be_whole_number\") %}\n                            \n                            <!--{% if item.weight_uom == \"Kg\" and item.weight_uom!=item.uom%}-->\n                            <!--    <p style=\"font-size:0.6rem;\">-->\n                            <!--        {{ item.total_weight }} Kg-->\n                            <!--    </p>-->\n                            <!--{% elif item.weight_uom == \"Gram\" and item.weight_uom!=\"Kg\" and item.weight_uom!=\"Gram\"%}-->\n                            <!--    <p style=\"font-size:0.6rem;\">-->\n                            <!--        {{ item.total_weight/1000 }} Kg-->\n                            <!--    </p>-->\n                            <!--{% endif %}-->\n                            <span style=\"font-size:0.5rem;\">\n                                {% if is_uom_whole %}\n                                    {{ item.qty | int}}\n                                {% else %}\n                                    {{ item.qty}}\n                                {% endif %}\n                            </span>\n                            <span style=\"font-size:0.45rem;\">\n                                {{ item.uom }}\n                            </span>\n                            {% if item.uom != item.stock_uom %}\n                                {% set stock_qty = item.stock_qty/item.qty %}\n                                <p style=\"font-size:0.35rem;\">\n                                    {% if is_stock_uom_whole %}\n                                        {{stock_qty | int}}\n                                    {% else %}\n                                        {{stock_qty}}\n                                    {% endif %}\n                                    {{item.stock_uom}}/{{ item.uom }}\n                                </p>\n                            {% endif %}\n                            </b>\n                        </td>\n                        {% if doc.taxes %}\n                        {% if doc.taxes[0].included_in_print_rate == 1 %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set inclusive_rate = item.price_list_rate %}\n                            {% set exclusive_rate = inclusive_rate*100/(100+gst_rate) %}\n                        \n                        {% else %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set exclusive_rate = item.price_list_rate %}\n                            {% set inclusive_rate = exclusive_rate*(100+gst_rate)/100 %}\n                        \n                        {% endif %}\n                        <td colspan=\"9\">\n                            <b>\n                                <!--{% if item.total_weight != 0 %}-->\n                                <!--    {% if item.weight_uom == \"Kg\" and item.weight_uom!=item.uom %}-->\n                                <!--        <p style=\"font-size:0.6rem;\">-->\n                                <!--            {% set calculated_value = inclusive_rate * item.qty / item.total_weight %}-->\n                                <!--            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg-->\n                                <!--        </p>-->\n                                <!--    {% elif item.weight_uom == \"Gram\" and item.weight_uom!=\"Kg\" and item.weight_uom!=\"Gram\" %}-->\n                                <!--        <p style=\"font-size:0.6rem;\">-->\n                                <!--            {% set calculated_value = inclusive_rate * item.qty * 1000 / item.total_weight %}-->\n                                <!--            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg-->\n                                <!--        </p>-->\n                                <!--    {% endif %}-->\n                                <!--{% endif %}-->\n                                <p style=\"font-size:0.45rem;\">\n                                {{ frappe.utils.fmt_money(inclusive_rate, currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </p>\n                            </b>\n                        </td>\n                        <td colspan=\"9\">\n                            <b>\n                                <!--{% if item.total_weight != 0 %}-->\n                                <!--    {% if item.weight_uom == \"Kg\" and item.weight_uom!=item.uom %}-->\n                                <!--        <p style=\"font-size:0.6rem;\">-->\n                                <!--            {% set calculated_value = exclusive_rate * item.qty / item.total_weight %}-->\n                                <!--            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg-->\n                                <!--        </p>-->\n                                <!--    {% elif item.weight_uom == \"Gram\" and item.weight_uom!=\"Kg\" and item.weight_uom!=\"Gram\" %}-->\n                                <!--        <p style=\"font-size:0.6rem;\">-->\n                                <!--            {% set calculated_value = exclusive_rate * item.qty * 1000 / item.total_weight %}-->\n                                <!--            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg-->\n                                <!--        </p>-->\n                                <!--    {% endif %}-->\n                                <!--{% endif %}-->\n                                <p style=\"font-size:0.45rem;\">\n                                {{ frappe.utils.fmt_money(exclusive_rate, currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </p>\n                            </b>\n                        </td>\n                        {% else %}\n                        \n                        <td colspan=\"9\">\n                            <b>\n                                <p style=\"font-size:0.45rem;\">\n                                {{ frappe.utils.fmt_money(item.price_list_rate, currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </p>\n                            </b>\n                        </td>\n                        \n                        {% endif %}\n                        <td colspan=\"4\">{{ item.discount_percentage }}% </td>\n                        <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(item.net_amount, currency=doc.currency) }}</b></td>\n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        </div>\n\n\n\n    <!--</div>-->\n\n\n{% set freight_row = doc.taxes | selectattr('account_head', 'equalto', 'Freight and Forwarding Charges - RHCPL') | first %}\n    <!--<div class=\"no-break\">-->\n        <table class=\"table table-bordered e-invoice-table\">\n            <tbody>\n                <tr>\n                    <td rowspan=1 colspan=2 style=\"vertical-align:top !important;\"><b>T&C</b></td>\n                    <td class=\"text-right\">Total Taxable Value</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.net_total, currency=\"INR\") }}</td>\n                </tr>\n                \n                {% if freight_row %}\n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.total_taxes_and_charges-freight_row.tax_amount, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                    <tr>\n                        <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(freight_row.tax_amount, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                {% else %}\n                    \n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.total_taxes_and_charges, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                    \n                {% endif %}\n                \n                {% if doc.discount_amount %}\n                <tr>\n                    <td class=\"text-right\">Additional Discount</td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.discount_amount, currency=\"INR\") }}</b></td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td class=\"text-right\"><b>Grand Total</b></td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.rounded_total, currency=\"INR\") }}</b></td>\n                </tr>\n                <tr>\n                    <td colspan=2>\n                        <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.in_words }}</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    <!--</div>-->\n    {{ doc.gst_breakup_table }}\n    <div class=\"no-break\">\n        <table style=\"table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4>\n                    <b>Bank Details</b>\n                </td>\n                <td colspan=4>\n                    <b>Pre Authenticated By. : </b>{{doc.company}}\n                </td>\n            </tr>\n            <tr rowspan=3>\n                <td rowspan=1 colspan=4>\n                    {% set bank_account = frappe.db.get_value(\"Bank Account\", {\"company\": doc.company, \"is_default\": 1}, [\"account_name\",\"bank\", \"bank_account_no\", \"branch_code\",\"iban\"], as_dict=True) %}\n                    {% if bank_account.account_name %}\n                    Account Name: <b><i>{{ bank_account.account_name }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank %}\n                    Bank Name: <b><i>{{ bank_account.bank }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank_account_no %}\n                    Account Number: <b><i>{{ bank_account.bank_account_no }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.branch_code %}\n                    Branch Code (IFSC): <b><i>{{ bank_account.branch_code }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.iban %}\n                    IBAN: <b><i>{{ bank_account.iban }}</i></b><br>\n                    {% endif %}\n                </td>\n                <td colspan=4><br><br><br><br></td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4><b>{% if doc.custom_is_print==1%} Payment Terms {% endif %}</b></td>\n                <td colspan=2>\n                    Authorised Signatory\n                </td>\n                <td colspan=2>\n                    Issuing Signatory\n                </td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=2 colspan=4>\n                    {% if doc.payment_schedule and doc.custom_is_print==1 %}\n                    <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                        <thead>\n                            <tr>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for row in doc.payment_schedule %}\n                            <tr>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                            </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                    {% endif %}\n                </td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n            </tr>\n            <tr rowspan=1>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n            </tr>\n        </table>\n    <!--</div>-->\n\n\n\n    {% if doc.ewaybill %}\n    {% set e_waybill_data = frappe.db.get_value(\"e-Waybill Log\", {\"reference_name\": doc.name, \"reference_doctype\": \"Delivery Note\"}, \"data\") %}\n    <div class=\"page-break\"></div>\n    {% set data = _dict(json.loads(e_waybill_data)) %}\n    {%- set irn = doc.irn -%}\n\n    {% if data.supplyType == \"O\" %}\n    {% set generated_by = data.fromTrdName %}\n    {% else %}\n    {% set generated_by = data.toTrdName %}\n    {% endif %}\n\n    <div class=\"ewaybill-page-layout\">\n        <table class=\"table borderless\" style=\"border:0\">\n            <tbody>\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <h1 class=\"title\">e-Waybill</h1>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img src=\"data:image/png;base64,{{ get_e_waybill_qr_code(data.ewbNo,data.userGstin, data.ewayBillDate) }}\" class=\"qr-code\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table class=\"table borderless\">\n            <tbody>\n                <tr>\n                    <td style=\"width: 200px\">\n                        <span>e-Waybill No:</span>\n                    </td>\n                    <td>\n                        <span class=\"e-waybill-number\">\n                            <strong>{{ add_spacing(data.ewbNo, 4) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>e-Waybill Date:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \"\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Generated By:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>\n                                {{ add_spacing(data.userGstin, 5) }} - {{ generated_by }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid From:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \" \") }}\n                                {{ \" [\" }}{{ data.actualDist }}{{ \"Kms]\" }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid Until:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.validUpto[:10] }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if irn %}\n                <tr>\n                    <td>\n                        <span>IRN:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ irn }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - A</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Supplier</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.fromGstin, 5) }}-{{ data.fromTrdName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Dispatch</td>\n                    <td>\n                        <span>\n                            <strong>{{ data.fromPlace }},\n                                {{ get_state(data.actFromStateCode) }} -\n                                {{ data.fromPincode }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Recipient</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.toGstin, 5) }}-{{ data.toTrdName }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Delivery</td>\n                    <td>\n                        <span><strong>\n                                {{ data.toPlace }},\n                                {{ get_state(data.actToStateCode) }} -{{ data.toPincode }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document No.</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docNo }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document Date</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docDate }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Transaction Type:</span>\n                    </td>\n                    <td>\n                        <span><strong>{{ get_transport_type(data.transactionType) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Value of Goods</td>\n                    <td>\n                        <span class=\"classfont\">\n                            <strong>\n                                {{ frappe.utils.fmt_money(data.totInvValue, currency=\"INR\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>HSN Code</td>\n                    <td>\n                        <span class=\"form-control1\" onkeydown=\"expandtext(this);\">\n                            <strong>{{ data.itemList[0].hsnCode }}\n                                {%if data.itemList[0].productDesc%}\n                                {{ \" - \" ~data.itemList[0].productDesc }}\n                                {%endif%}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Reason for Transportation</td>\n                    <td>\n                        <span>\n                            <strong>{{ get_supply_type(data.supplyType) }} - {{ get_sub_supply_type(data.subSupplyType) }} </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Transporter</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.transporterId, 5) }}-\n                                {{ data.transporterName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if data.VehiclListDetails|length > 0 %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - B</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div>\n                            <table cellspacing=\"0\" cellpadding=\"3\" rules=\"all\" class=\"table table-responsive vehicle-info\" border=\"1\">\n                                <tbody>\n                                    <tr>\n                                        <th scope=\"col\">Mode</th>\n                                        <th scope=\"col\">\n                                            Vehicle / Trans <br />\n                                            Doc No &amp; Dt.\n                                        </th>\n                                        <th scope=\"col\">From</th>\n                                        <th scope=\"col\">Entered Date</th>\n                                        <th scope=\"col\">Entered By</th>\n                                        <th scope=\"col\">\n                                            Cdata No. <br />\n                                            (If any)\n                                        </th>\n                                        <th scope=\"col\">\n                                            Multi Veh.Info <br />\n                                            (If any)\n                                        </th>\n                                    </tr>\n                                    {% for detail in data.VehiclListDetails %}\n                                    <tr>\n                                        <td>\n                                            {{ get_transport_mode(detail.transMode) }}\n                                        </td>\n                                        <td>\n                                            {{ detail.vehicleNo }} /\n                                            {{ detail.transDocNo }} Dt:\n                                            {{ detail.transDocDate }}\n                                        </td>\n                                        <td>{{ detail.fromPlace }}</td>\n                                        <td>\n                                            {{ detail.enteredDate |\n                                                replace(\":00 \", \" \") }}\n                                        </td>\n                                        <td>{{ detail.userGSTINTransin }}</td>\n                                        <td>-</td>\n                                        <td>-</td>\n                                    </tr>\n                                    {% endfor%}\n                                </tbody>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img class=\"barcode\" src=\"data:image/png;base64,{{ get_ewaybill_barcode(data.ewbNo) }}\">\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    {% endif %}\n\n\n\n\n\n    <div id=\"footer-html\" class=\"visible-pdf\">\n        <p class=\"text-center small page-number visible-pdf\">\n            {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n        </p>\n    </div>\n<!--</div>-->",
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2025-03-09 03:48:48.343513",
  "module": "Business Needed Solutions",
  "name": "BNS Delivery Note - V1",
  "page_number": "Hide",
  "pdf_generator": null,
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Sales Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% set e_invoice_log = None %}\n{% if doc.irn %}\n{% set e_invoice_log = frappe.db.get_value(\n        \"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True\n    ) %}\n{% set invoice_data = e_invoice_log and e_invoice_log.invoice_data and _dict(json.loads(e_invoice_log.invoice_data)) or None %}\n{% endif %}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;padding:10px\">\n            <div class=\"col-xs-3 column-break\">\n                {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n                {% if company_logo %}\n                <div>\n                    <img width=\"100%\" src=\"{{ company_logo }}\">\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 column-break text-center\">\n                <h3 style=\"margin:0;\">{{ doc.company }}</h3>\n                <div style=\"font-size:0.7em\">\n                    <b>{% set seller_address = frappe.db.get_value(\"Address\", doc.company_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                        {{ format_address(seller_address) }}\n                        {% if doc.company_gstin %}\n                        GST: {{ doc.company_gstin }}<br>\n                        {% endif %}\n                        <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                    </b>\n                </div>\n            </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;\"><b>\n                    {% if doc.is_return %}\n                        Credit Note\n                    {% else %}\n                        {% if doc.status == \"Draft\" %}\n                        Draft Invoice\n                        {% elif doc.status == \"Cancelled\" %}\n                        Cancelled Invoice\n                        {% elif doc.irn %}\n                        e-Invoice\n                        {% else %}\n                        Invoice\n                        {% endif %}\n                    {% endif %}\n                    </b>\n                </h2>\n                <b><span style=\"font-size:0.35rem\">{{ doc.invoice_copy }}</span></b><br><br>\n                <div class=\"row\" style=\"font-size:0.6rem\">\n                    <div class=\"col-xs-5 text-left\" style=\"text-wrap: nowrap;font-size:0.45rem\"><b>Inv Date:<br>Invoice No:<br>Place of Supply:</b></div>\n                    <div class=\"col-xs-7 text-right\" style=\"text-wrap: nowrap;\">{{ frappe.utils.formatdate(doc.posting_date) }}<br><b>{{ doc.name }}</b><br>\n                        <div>{{doc.place_of_supply}}</div>\n                    </div>\n                    <!--<div class=\"col-xs-5 column-break\" style=\"\"></div>-->\n                </div>\n            </div>\n        </div>\n    </div>\n    <!--<div class=\"main-content\">-->\n        {% if doc.irn %}\n        <div class=\"col-xs-12 column-break einv-det\" style=\"margin-bottom:2px;\">\n            <!--<div class=\"col-xs-2 column-break text-left\"></div>-->\n            <div class=\"col-xs-4 column-break text-left\">\n                {% if e_invoice_log and e_invoice_log.signed_qr_code %}\n                <img src=\"data:image/png;base64,{{ get_qr_code(e_invoice_log.signed_qr_code, scale=3) }}\" class=\"qrcode\">\n                {% endif %}\n            </div>\n            <div class=\"col-xs-8 column-break text-right\">\n                {% if invoice_data and invoice_data.Irn %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>IRN</label></div>\n                    <div class=\"col-xs-8 value\"><u>{{ invoice_data.Irn }}</u></div>\n                </div>\n                {% endif %}\n                {% if invoice_data and invoice_data.AckNo %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>Ack. No.</label></div>\n                    <div class=\"col-xs-8 value\">{{ invoice_data.AckNo }}</div>\n                </div>\n                {% endif %}\n                {% if invoice_data and invoice_data.AckDt %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>Ack. Date</label></div>\n                    <div class=\"col-xs-8 value\">{{ frappe.utils.format_datetime(invoice_data.AckDt, \"dd/MM/yyyy hh:mm:ss\") }}</div>\n                </div>\n                {% endif %}\n                {% if doc.ewaybill %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>e-Waybill No.</label></div>\n                    <div class=\"col-xs-8 value\"><u>{{ doc.ewaybill }}</u></div>\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-1 column-break text-right\">\n            </div>\n        </div>\n        {% endif %}\n        <!--</div>-->\n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td colspan=6 rowspan=5>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Buyer Details</u></b></h6>\n                            <p><b>{{ doc.customer_name }}</b></p>\n                            {% set customer_address = frappe.db.get_value(\"Address\", doc.customer_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(customer_address) }}\n\n                            {% if doc.billing_address_gstin %}\n                            GST: <u>{{ doc.billing_address_gstin }}</u><br>\n                            {% endif %}\n                            {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer_name, \"pan\")%}\n                            {% if customer_pan %}\n                            PAN: {{ customer_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address_name }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% endif %}\n                            {% if doc.dispatch_address %}\n                            <h6><b><u>Dispatch Details</u></b></h6>\n                            <p><b>{{ frappe.db.get_value(\"Address\", doc.dispatch_address_name, \"address_title\") }}</b></p>\n                            <!--<p>{{doc.dispatch_address}}</p>-->\n                            {% set dispatch_address = frappe.db.get_value(\"Address\", doc.dispatch_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                            {{ format_address(dispatch_address) }}\n                            {% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Transporter:</h6>\n                            {% if doc.transporter_name %}\n                            {{ doc.transporter_name }} <br>\n                            {{ doc.gst_transporter_id }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Vehicle No:</h6>\n                            {% if doc.vehicle_no %}\n                            {{ doc.vehicle_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Buyer's PO No:</h6>\n                            {% if doc.po_no %}\n                            {{ doc.po_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>PO Date:</h6>\n                            {% if doc.po_date %}\n                            {{ doc.po_date }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Builty No:</h6>\n                            {% if doc.custom_builty_no %}\n                            {{ doc.custom_builty_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Remarks:</h6>\n                            {% if doc.remarks %}\n                            {{ doc.remarks }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% if doc.incoterm or doc.named_place  %}\n                    <tr>\n                        <td colspan=3>\n                            <h6>Incoterm:</h6>\n                            {% if doc.incoterm %}\n                            {{ doc.incoterm }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Named Place:</h6>\n                            {% if doc.named_place %}\n                            {{ doc.named_place }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% endif %}\n                    <tr>\n                        <td colspan=2>\n                            \n                            <h6>Destination:</h6>\n                            {% if doc.custom_destination %}\n                            {{doc.custom_destination}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td rowspan=2 colspan=4>\n                            <h6>Terms of Delivery:</h6>\n                            {% if doc.custom_terms_of_delivery %}\n                            {{ doc.custom_terms_of_delivery }}\n                            {% elif doc.custom_terms_of_delivery_new %}\n                            {{ doc.custom_terms_of_delivery_new }}\n                            {% else %}<br><br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=2 rowspan=1>\n                            <h6>Doc No:</h6>\n                            {% if doc.custom_doc_no %}\n                            {{doc.custom_doc_no}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <!--</div>-->\n        <div class=\"col-xs-12 column-break item-det\">\n            <table class=\"table table-bordered e-invoice-table\">\n                <thead>\n                    <tr>\n                        <th colspan=\"2\">#</th>\n                        <th colspan=\"24\">Item</th>\n                        <th colspan=\"7\">HSN/SAC</th>\n                        <th colspan=\"7\">Qty</th>\n                        <th colspan=\"9\">Rate(Inc Tax)</th>\n                        <th colspan=\"9\">Rate(Exc Tax)</th>\n                        <th colspan=\"4\">Disc</th>\n                        <th colspan=\"11\">Net Total</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {% for item in doc.items %}\n                    <tr class=\"no-break\">\n                        <td colspan=\"2\">{{ loop.index }}</td>\n                        <td colspan=\"24\">\n                            <b>{{ item.item_name }}</b><br>\n                            {% if item.barcode %}\n                            <p style=\"font-size:0.35rem;\">\n                                EAN: {{ item.barcode }}\n                            </p>\n                            {% endif %}\n                        </td>\n                        <td colspan=\"7\">{{ item.gst_hsn_code }}</td>\n                        <td colspan=\"7\" class=\"text-left\" style=\"line-height: 95%;\"><b>\n                            {% set is_uom_whole = frappe.db.get_value(\"UOM\", item.uom, \"must_be_whole_number\") %}\n                            {% set is_stock_uom_whole = frappe.db.get_value(\"UOM\", item.stock_uom, \"must_be_whole_number\") %}\n                            \n                            {% if item.weight_uom == \"Kg\" and item.weight_uom!=item.uom%}\n                                <p style=\"font-size:0.6rem;\">\n                                    {{ item.total_weight }} Kg\n                                </p>\n                            {% elif item.weight_uom == \"Gram\" and item.weight_uom!=\"Kg\" and item.weight_uom!=\"Gram\"%}\n                                <p style=\"font-size:0.6rem;\">\n                                    {{ item.total_weight/1000 }} Kg\n                                </p>\n                            {% endif %}\n                            <span style=\"font-size:0.5rem;\">\n                                {% if is_uom_whole %}\n                                    {{ item.qty | int}}\n                                {% else %}\n                                    {{ item.qty}}\n                                {% endif %}\n                            </span>\n                            <span style=\"font-size:0.45rem;\">\n                                {{ item.uom }}\n                            </span>\n                            {% if item.uom != item.stock_uom %}\n                                {% set stock_qty = item.stock_qty/item.qty %}\n                                <p style=\"font-size:0.4rem;\">\n                                    {% if is_stock_uom_whole %}\n                                        {{stock_qty | int}}\n                                    {% else %}\n                                        {{stock_qty}}\n                                    {% endif %}\n                                    {{item.stock_uom}}/{{ item.uom }}\n                                </p>\n                            {% endif %}\n                            </b>\n                        </td>\n                        \n                        {%set item_rate = item.price_list_rate if item.price_list_rate!=0 else item.rate%}\n                        {% if doc.taxes[0].included_in_print_rate == 1 %}\n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set inclusive_rate = item_rate %}\n                            {% set exclusive_rate = inclusive_rate*100/(100+gst_rate) %}\n                        \n                        {% else %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set exclusive_rate = item_rate %}\n                            {% set inclusive_rate = exclusive_rate*(100+gst_rate)/100 %}\n                        \n                        {% endif %}\n                        <td colspan=\"9\">\n                            <b>\n                                {% if item.total_weight != 0 %}\n                                    {% if item.weight_uom == \"Kg\" and item.weight_uom!=item.uom %}\n                                        <p style=\"font-size:0.6rem;\">\n                                            {% set calculated_value = inclusive_rate * item.qty / item.total_weight %}\n                                            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg\n                                        </p>\n                                    {% elif item.weight_uom == \"Gram\" and item.weight_uom!=\"Kg\" and item.weight_uom!=\"Gram\" %}\n                                        <p style=\"font-size:0.6rem;\">\n                                            {% set calculated_value = inclusive_rate * item.qty * 1000 / item.total_weight %}\n                                            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg\n                                        </p>\n                                    {% endif %}\n                                {% endif %}\n                                <p style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(inclusive_rate, currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </p>\n                            </b>\n                        </td>\n                        <td colspan=\"9\">\n                            <b>\n                                {% if item.total_weight != 0 %}\n                                    {% if item.weight_uom == \"Kg\" and item.weight_uom!=item.uom %}\n                                        <p style=\"font-size:0.6rem;\">\n                                            {% set calculated_value = exclusive_rate * item.qty / item.total_weight %}\n                                            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg\n                                        </p>\n                                    {% elif item.weight_uom == \"Gram\" and item.weight_uom!=\"Kg\" and item.weight_uom!=\"Gram\" %}\n                                        <p style=\"font-size:0.6rem;\">\n                                            {% set calculated_value = exclusive_rate * item.qty * 1000 / item.total_weight %}\n                                            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg\n                                        </p>\n                                    {% endif %}\n                                {% endif %}\n                                <p style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(exclusive_rate, currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </p>\n                            </b>\n                        </td>\n                        <td colspan=\"4\">{{ item.discount_percentage }}% </td>\n                        <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(item.net_amount, currency=doc.currency) }}</b></td>\n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        </div>\n\n\n\n    <!--</div>-->\n\n\n{% set freight_row = doc.taxes | selectattr('account_head', 'equalto', 'Freight and Forwarding Charges - KGOPL') | first %}\n    <!--<div class=\"no-break\">-->\n        <table class=\"table table-bordered e-invoice-table\">\n            <tbody>\n                <tr>\n                    <td rowspan=1 colspan=2 style=\"vertical-align:top !important;\"><b>T&C</b></td>\n                    <td class=\"text-right\">Total Taxable Value</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.net_total, currency=\"INR\") }}</td>\n                </tr>\n                \n                {% if freight_row %}\n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.total_taxes_and_charges-freight_row.tax_amount, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                    <tr>\n                        <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(freight_row.tax_amount, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                {% else %}\n                    \n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.total_taxes_and_charges, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                    \n                {% endif %}\n                \n                {% if doc.discount_amount %}\n                <tr>\n                    <td class=\"text-right\">Additional Discount</td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.discount_amount, currency=\"INR\") }}</b></td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td class=\"text-right\"><b>Grand Total</b></td>\n                    {% if doc.rounded_total == 0 %}\n                        <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.grand_total, currency=\"INR\") }}</b></td>\n                    {% else %}\n                        <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.rounded_total, currency=\"INR\") }}</b></td>\n                    {% endif %}\n                </tr>\n                <tr>\n                    <td colspan=2>\n                        <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.in_words }}</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    <!--</div>-->\n    {{ doc.gst_breakup_table }}\n    <div class=\"no-break\">\n        <table style=\"table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4>\n                    <b>Bank Details</b>\n                </td>\n                <td colspan=4>\n                    <b>Pre Authenticated By. : </b>{{doc.company}}\n                </td>\n            </tr>\n            <tr rowspan=3>\n                <td rowspan=1 colspan=4>\n                    {% set bank_account = frappe.db.get_value(\"Bank Account\", {\"company\": doc.company, \"is_default\": 1}, [\"account_name\",\"bank\", \"bank_account_no\", \"branch_code\",\"iban\"], as_dict=True) %}\n                    {% if bank_account.account_name %}\n                    Account Name: <b><i>{{ bank_account.account_name }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank %}\n                    Bank Name: <b><i>{{ bank_account.bank }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank_account_no %}\n                    Account Number: <b><i>{{ bank_account.bank_account_no }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.branch_code %}\n                    Branch Code (IFSC): <b><i>{{ bank_account.branch_code }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.iban %}\n                    IBAN: <b><i>{{ bank_account.iban }}</i></b><br>\n                    {% endif %}\n                </td>\n                <td colspan=4><br><br><br><br></td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4><b>{% if doc.custom_is_print==1%} Payment Terms {% endif %}</b></td>\n                <td colspan=2>\n                    Authorised Signatory\n                </td>\n                <td colspan=2>\n                    Issuing Signatory\n                </td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=2 colspan=4>\n                    {% if doc.payment_schedule and doc.custom_is_print==1 %}\n                    <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                        <thead>\n                            <tr>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for row in doc.payment_schedule %}\n                            <tr>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                            </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                    {% endif %}\n                </td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n            </tr>\n            <tr rowspan=1>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n            </tr>\n        </table>\n    <!--</div>-->\n\n\n\n    {% if doc.ewaybill %}\n    {% set e_waybill_data = frappe.db.get_value(\"e-Waybill Log\", {\"reference_name\": doc.name, \"reference_doctype\": \"Sales Invoice\"}, \"data\") %}\n    <div class=\"page-break\"></div>\n    {% set data = _dict(json.loads(e_waybill_data)) %}\n    {%- set irn = doc.irn -%}\n\n    {% if data.supplyType == \"O\" %}\n    {% set generated_by = data.fromTrdName %}\n    {% else %}\n    {% set generated_by = data.toTrdName %}\n    {% endif %}\n\n    <div class=\"ewaybill-page-layout\">\n        <table class=\"table borderless\" style=\"border:0\">\n            <tbody>\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <h1 class=\"title\">e-Waybill</h1>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img src=\"data:image/png;base64,{{ get_e_waybill_qr_code(data.ewbNo,data.userGstin, data.ewayBillDate) }}\" class=\"qr-code\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table class=\"table borderless\">\n            <tbody>\n                <tr>\n                    <td style=\"width: 200px\">\n                        <span>e-Waybill No:</span>\n                    </td>\n                    <td>\n                        <span class=\"e-waybill-number\">\n                            <strong>{{ add_spacing(data.ewbNo, 4) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>e-Waybill Date:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \"\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Generated By:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>\n                                {{ add_spacing(data.userGstin, 5) }} - {{ generated_by }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid From:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \" \") }}\n                                {{ \" [\" }}{{ data.actualDist }}{{ \"Kms]\" }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid Until:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.validUpto[:10] }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if irn %}\n                <tr>\n                    <td>\n                        <span>IRN:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ irn }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - A</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Supplier</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.fromGstin, 5) }}-{{ data.fromTrdName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Dispatch</td>\n                    <td>\n                        <span>\n                            <strong>{{ data.fromPlace }},\n                                {{ get_state(data.actFromStateCode) }} -\n                                {{ data.fromPincode }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Recipient</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.toGstin, 5) }}-{{ data.toTrdName }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Delivery</td>\n                    <td>\n                        <span><strong>\n                                {{ data.toPlace }},\n                                {{ get_state(data.actToStateCode) }} -{{ data.toPincode }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document No.</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docNo }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document Date</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docDate }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Transaction Type:</span>\n                    </td>\n                    <td>\n                        <span><strong>{{ get_transport_type(data.transactionType) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Value of Goods</td>\n                    <td>\n                        <span class=\"classfont\">\n                            <strong>\n                                {{ frappe.utils.fmt_money(data.totInvValue, currency=\"INR\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>HSN Code</td>\n                    <td>\n                        <span class=\"form-control1\" onkeydown=\"expandtext(this);\">\n                            <strong>{{ data.itemList[0].hsnCode }}\n                                {%if data.itemList[0].productDesc%}\n                                {{ \" - \" ~data.itemList[0].productDesc }}\n                                {%endif%}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Reason for Transportation</td>\n                    <td>\n                        <span>\n                            <strong>{{ get_supply_type(data.supplyType) }} - {{ get_sub_supply_type(data.subSupplyType) }} </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Transporter</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.transporterId, 5) }}-\n                                {{ data.transporterName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if data.VehiclListDetails|length > 0 %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - B</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div>\n                            <table cellspacing=\"0\" cellpadding=\"3\" rules=\"all\" class=\"table table-responsive vehicle-info\" border=\"1\">\n                                <tbody>\n                                    <tr>\n                                        <th scope=\"col\">Mode</th>\n                                        <th scope=\"col\">\n                                            Vehicle / Trans <br />\n                                            Doc No &amp; Dt.\n                                        </th>\n                                        <th scope=\"col\">From</th>\n                                        <th scope=\"col\">Entered Date</th>\n                                        <th scope=\"col\">Entered By</th>\n                                        <th scope=\"col\">\n                                            Cdata No. <br />\n                                            (If any)\n                                        </th>\n                                        <th scope=\"col\">\n                                            Multi Veh.Info <br />\n                                            (If any)\n                                        </th>\n                                    </tr>\n                                    {% for detail in data.VehiclListDetails %}\n                                    <tr>\n                                        <td>\n                                            {{ get_transport_mode(detail.transMode) }}\n                                        </td>\n                                        <td>\n                                            {{ detail.vehicleNo }} /\n                                            {{ detail.transDocNo }} Dt:\n                                            {{ detail.transDocDate }}\n                                        </td>\n                                        <td>{{ detail.fromPlace }}</td>\n                                        <td>\n                                            {{ detail.enteredDate |\n                                                replace(\":00 \", \" \") }}\n                                        </td>\n                                        <td>{{ detail.userGSTINTransin }}</td>\n                                        <td>-</td>\n                                        <td>-</td>\n                                    </tr>\n                                    {% endfor%}\n                                </tbody>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img class=\"barcode\" src=\"data:image/png;base64,{{ get_ewaybill_barcode(data.ewbNo) }}\">\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    {% endif %}\n\n\n\n\n\n    <div id=\"footer-html\" class=\"visible-pdf\">\n        <p class=\"text-center small page-number visible-pdf\">\n            {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n        </p>\n    </div>\n<!--</div>-->",
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2025-03-09 03:26:37.869553",
  "module": "Business Needed Solutions",
  "name": "BNS SI - V1",
  "page_number": "Bottom Center",
  "pdf_generator": null,
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Quotation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;padding:10px\">\n            <div class=\"col-xs-3 column-break\">\n                {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n                {% if company_logo %}\n                <div>\n                    <img width=\"100%\" src=\"{{ company_logo }}\">\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 column-break text-center\">\n                <h2 style=\"margin:0;\">{{ doc.company }}</h2>\n                <div style=\"font-size:0.75rem\">\n                    <b>{% set seller_address = frappe.db.get_value(\"Address\", doc.company_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                        {{ format_address(seller_address) }}\n                        {% if doc.company_gstin %}\n                        GST: {{ doc.company_gstin }}<br>\n                        {% endif %}\n                        <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                    </b>\n                </div>\n            </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;\"><b>\n                        {% if doc.status == \"Draft\" %}\n                        Draft Quotation\n                        {% elif doc.status == \"Cancelled\" %}\n                        Cancelled Quotation\n                        {% else %}\n                        Quotation\n                        {% endif %}\n                    </b>\n                </h2>\n                <br>\n                <div class=\"row\" style=\"font-size:0.6rem\">\n                    <div class=\"col-xs-6 text-left\" style=\"text-wrap: nowrap;\"><b>Date:<br>Valid Till:</b></div>\n                    <div class=\"col-xs-6 text-right\" style=\"text-wrap: nowrap;\">\n                        {{ frappe.utils.formatdate(doc.transaction_date) }}<br><b>{{ frappe.utils.formatdate(doc.valid_till) }}</b>\n                    </div>\n                    <!--<div class=\"col-xs-5 column-break\" style=\"\"></div>-->\n                </div>\n            </div>\n        </div>\n    </div>\n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td colspan=6>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Buyer Details</u></b></h6>\n                            <p><b>{{ doc.customer_name }}</b></p>\n                            {% set customer_address = frappe.db.get_value(\"Address\", doc.customer_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(customer_address) }}\n\n                            {% if doc.billing_address_gstin %}\n                            GST: <u>{{ doc.billing_address_gstin }}</u><br>\n                            {% endif %}\n                            {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer_name, \"pan\")%}\n                            {% if customer_pan %}\n                            PAN: {{ customer_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address_name }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% endif %}\n                            {% if doc.dispatch_address %}\n                            <h6><b><u>Dispatch Details</u></b></h6>\n                            <p><b>{{ frappe.db.get_value(\"Address\", doc.dispatch_address_name, \"address_title\") }}</b></p>\n                            <!--<p>{{doc.dispatch_address}}</p>-->\n                            {% set dispatch_address = frappe.db.get_value(\"Address\", doc.dispatch_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                            {{ format_address(dispatch_address) }}\n                            {% endif %}\n                        </td>\n                        <td colspan=6>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            {% if doc.shipping_address %}\n                            <p><b>{{ doc.shipping_address_name }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% endif %}\n                            \n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <!--</div>-->\n        <div class=\"col-xs-12 column-break item-det\">\n            <table class=\"table table-bordered e-invoice-table\">\n                <thead>\n                    <tr>\n                        <th colspan=\"2\">#</th>\n                        <th colspan=\"24\">Item</th>\n                        <th colspan=\"7\">HSN/SAC</th>\n                        <th colspan=\"7\">Qty</th>\n                        {% if doc.taxes%}\n                        <th colspan=\"9\">Rate(Inc Tax)</th>\n                        <th colspan=\"9\">Rate(Exc Tax)</th>\n                        {% else %}\n                        <th colspan=\"9\">Rate</th>\n                        {% endif %}\n                        <th colspan=\"4\">Disc(%)</th>\n                        <th colspan=\"11\">Net Total</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {% for item in doc.items %}\n                    <tr class=\"no-break\">\n                        <td colspan=\"2\">{{ loop.index }}</td>\n                        <td colspan=\"24\">\n                            <b>{{ item.item_name }}</b><br>\n                            {% if item.barcode %}\n                            <p style=\"font-size:0.35rem;\">\n                                EAN: {{ item.barcode }}\n                            </p>\n                            {% endif %}\n                        </td>\n                        <td colspan=\"7\">{{ item.gst_hsn_code }}</td>\n                        <td colspan=\"7\" class=\"text-left\" style=\"line-height: 95%;\"><b>\n                            {% set is_uom_whole = frappe.db.get_value(\"UOM\", item.uom, \"must_be_whole_number\") %}\n                            {% set is_stock_uom_whole = frappe.db.get_value(\"UOM\", item.stock_uom, \"must_be_whole_number\") %}\n                            \n                            <!--{% if item.weight_uom == \"Kg\" and item.weight_uom!=item.uom%}-->\n                            <!--    <p style=\"font-size:0.6rem;\">-->\n                            <!--        {{ item.total_weight }} Kg-->\n                            <!--    </p>-->\n                            <!--{% elif item.weight_uom == \"Gram\" and item.weight_uom!=\"Kg\" and item.weight_uom!=\"Gram\"%}-->\n                            <!--    <p style=\"font-size:0.6rem;\">-->\n                            <!--        {{ item.total_weight/1000 }} Kg-->\n                            <!--    </p>-->\n                            <!--{% endif %}-->\n                            <span style=\"font-size:0.5rem;\">\n                                {% if is_uom_whole %}\n                                    {{ item.qty | int}}\n                                {% else %}\n                                    {{ item.qty}}\n                                {% endif %}\n                            </span>\n                            <span style=\"font-size:0.45rem;\">\n                                {{ item.uom }}\n                            </span>\n                            {% if item.uom != item.stock_uom %}\n                                {% set stock_qty = item.stock_qty/item.qty %}\n                                <p style=\"font-size:0.35rem;\">\n                                    {% if is_stock_uom_whole %}\n                                        {{stock_qty | int}}\n                                    {% else %}\n                                        {{stock_qty}}\n                                    {% endif %}\n                                    {{item.stock_uom}}/{{ item.uom }}\n                                </p>\n                            {% endif %}\n                            </b>\n                        </td>\n                        {% if doc.taxes %}\n                        {% if doc.taxes[0].included_in_print_rate == 1 %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set inclusive_rate = item.price_list_rate %}\n                            {% set exclusive_rate = inclusive_rate*100/(100+gst_rate) %}\n                        \n                        {% else %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set exclusive_rate = item.price_list_rate %}\n                            {% set inclusive_rate = exclusive_rate*(100+gst_rate)/100 %}\n                        \n                        {% endif %}\n                        <td colspan=\"9\">\n                            <b>\n                                <!--{% if item.total_weight != 0 %}-->\n                                <!--    {% if item.weight_uom == \"Kg\" and item.weight_uom!=item.uom %}-->\n                                <!--        <p style=\"font-size:0.6rem;\">-->\n                                <!--            {% set calculated_value = inclusive_rate * item.qty / item.total_weight %}-->\n                                <!--            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg-->\n                                <!--        </p>-->\n                                <!--    {% elif item.weight_uom == \"Gram\" and item.weight_uom!=\"Kg\" and item.weight_uom!=\"Gram\" %}-->\n                                <!--        <p style=\"font-size:0.6rem;\">-->\n                                <!--            {% set calculated_value = inclusive_rate * item.qty * 1000 / item.total_weight %}-->\n                                <!--            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg-->\n                                <!--        </p>-->\n                                <!--    {% endif %}-->\n                                <!--{% endif %}-->\n                                <p style=\"font-size:0.45rem;\">\n                                {{ frappe.utils.fmt_money(inclusive_rate, currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </p>\n                            </b>\n                        </td>\n                        <td colspan=\"9\">\n                            <b>\n                                <!--{% if item.total_weight != 0 %}-->\n                                <!--    {% if item.weight_uom == \"Kg\" and item.weight_uom!=item.uom %}-->\n                                <!--        <p style=\"font-size:0.6rem;\">-->\n                                <!--            {% set calculated_value = exclusive_rate * item.qty / item.total_weight %}-->\n                                <!--            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg-->\n                                <!--        </p>-->\n                                <!--    {% elif item.weight_uom == \"Gram\" and item.weight_uom!=\"Kg\" and item.weight_uom!=\"Gram\" %}-->\n                                <!--        <p style=\"font-size:0.6rem;\">-->\n                                <!--            {% set calculated_value = exclusive_rate * item.qty * 1000 / item.total_weight %}-->\n                                <!--            {{ frappe.utils.fmt_money(calculated_value ,currency=doc.currency) }}/Kg-->\n                                <!--        </p>-->\n                                <!--    {% endif %}-->\n                                <!--{% endif %}-->\n                                <p style=\"font-size:0.45rem;\">\n                                {{ frappe.utils.fmt_money(exclusive_rate, currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </p>\n                            </b>\n                        </td>\n                        {% else %}\n                        \n                        <td colspan=\"9\">\n                            <b>\n                                <p style=\"font-size:0.45rem;\">\n                                {{ frappe.utils.fmt_money(item.price_list_rate, currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </p>\n                            </b>\n                        </td>\n                        \n                        {% endif %}\n                        <td colspan=\"4\">{{ item.discount_percentage }}% </td>\n                        <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(item.net_amount, currency=doc.currency) }}</b></td>\n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        </div>\n\n\n\n    <!--</div>-->\n\n\n{% set freight_row = doc.taxes | selectattr('account_head', 'equalto', 'Freight and Forwarding Charges - RHCPL') | first %}\n    <!--<div class=\"no-break\">-->\n        <table class=\"table table-bordered e-invoice-table\">\n            <tbody>\n                <tr>\n                    <td rowspan=1 colspan=2 style=\"vertical-align:top !important;\"><b>T&C</b></td>\n                    <td class=\"text-right\">Total Taxable Value</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.net_total, currency=\"INR\") }}</td>\n                </tr>\n                \n                {% if freight_row %}\n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.total_taxes_and_charges-freight_row.tax_amount, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                    <tr>\n                        <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(freight_row.tax_amount, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                {% else %}\n                    \n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.total_taxes_and_charges, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                    \n                {% endif %}\n                \n                {% if doc.discount_amount %}\n                <tr>\n                    <td class=\"text-right\">Additional Discount</td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.discount_amount, currency=\"INR\") }}</b></td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td class=\"text-right\"><b>Grand Total</b></td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.rounded_total, currency=\"INR\") }}</b></td>\n                </tr>\n                <tr>\n                    <td colspan=2>\n                        <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.in_words }}</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    <!--</div>-->\n    {{ doc.gst_breakup_table }}\n    <div class=\"no-break\">\n        <table style=\"table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4>\n                    <b>Bank Details</b>\n                </td>\n                <td colspan=4>\n                    <b>Pre Authenticated By. : </b>{{doc.company}}\n                </td>\n            </tr>\n            <tr rowspan=3>\n                <td rowspan=1 colspan=4>\n                    {% set bank_account = frappe.db.get_value(\"Bank Account\", {\"company\": doc.company, \"is_default\": 1}, [\"account_name\",\"bank\", \"bank_account_no\", \"branch_code\",\"iban\"], as_dict=True) %}\n                    {% if bank_account.account_name %}\n                    Account Name: <b><i>{{ bank_account.account_name }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank %}\n                    Bank Name: <b><i>{{ bank_account.bank }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank_account_no %}\n                    Account Number: <b><i>{{ bank_account.bank_account_no }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.branch_code %}\n                    Branch Code (IFSC): <b><i>{{ bank_account.branch_code }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.iban %}\n                    IBAN: <b><i>{{ bank_account.iban }}</i></b><br>\n                    {% endif %}\n                </td>\n                <td colspan=4><br><br><br><br></td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4><b>{% if doc.custom_is_print==1%} Payment Terms {% endif %}</b></td>\n                <td colspan=2>\n                    Authorised Signatory\n                </td>\n                <td colspan=2>\n                    Issuing Signatory\n                </td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=2 colspan=4>\n                    {% if doc.payment_schedule and doc.custom_is_print==1 %}\n                    <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                        <thead>\n                            <tr>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for row in doc.payment_schedule %}\n                            <tr>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                            </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                    {% endif %}\n                </td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n            </tr>\n            <tr rowspan=1>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n            </tr>\n        </table>\n    <!--</div>-->\n\n\n\n    {% if doc.ewaybill %}\n    {% set e_waybill_data = frappe.db.get_value(\"e-Waybill Log\", {\"reference_name\": doc.name, \"reference_doctype\": \"Delivery Note\"}, \"data\") %}\n    <div class=\"page-break\"></div>\n    {% set data = _dict(json.loads(e_waybill_data)) %}\n    {%- set irn = doc.irn -%}\n\n    {% if data.supplyType == \"O\" %}\n    {% set generated_by = data.fromTrdName %}\n    {% else %}\n    {% set generated_by = data.toTrdName %}\n    {% endif %}\n\n    <div class=\"ewaybill-page-layout\">\n        <table class=\"table borderless\" style=\"border:0\">\n            <tbody>\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <h1 class=\"title\">e-Waybill</h1>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img src=\"data:image/png;base64,{{ get_e_waybill_qr_code(data.ewbNo,data.userGstin, data.ewayBillDate) }}\" class=\"qr-code\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table class=\"table borderless\">\n            <tbody>\n                <tr>\n                    <td style=\"width: 200px\">\n                        <span>e-Waybill No:</span>\n                    </td>\n                    <td>\n                        <span class=\"e-waybill-number\">\n                            <strong>{{ add_spacing(data.ewbNo, 4) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>e-Waybill Date:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \"\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Generated By:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>\n                                {{ add_spacing(data.userGstin, 5) }} - {{ generated_by }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid From:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \" \") }}\n                                {{ \" [\" }}{{ data.actualDist }}{{ \"Kms]\" }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid Until:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.validUpto[:10] }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if irn %}\n                <tr>\n                    <td>\n                        <span>IRN:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ irn }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - A</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Supplier</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.fromGstin, 5) }}-{{ data.fromTrdName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Dispatch</td>\n                    <td>\n                        <span>\n                            <strong>{{ data.fromPlace }},\n                                {{ get_state(data.actFromStateCode) }} -\n                                {{ data.fromPincode }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Recipient</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.toGstin, 5) }}-{{ data.toTrdName }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Delivery</td>\n                    <td>\n                        <span><strong>\n                                {{ data.toPlace }},\n                                {{ get_state(data.actToStateCode) }} -{{ data.toPincode }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document No.</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docNo }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document Date</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docDate }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Transaction Type:</span>\n                    </td>\n                    <td>\n                        <span><strong>{{ get_transport_type(data.transactionType) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Value of Goods</td>\n                    <td>\n                        <span class=\"classfont\">\n                            <strong>\n                                {{ frappe.utils.fmt_money(data.totInvValue, currency=\"INR\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>HSN Code</td>\n                    <td>\n                        <span class=\"form-control1\" onkeydown=\"expandtext(this);\">\n                            <strong>{{ data.itemList[0].hsnCode }}\n                                {%if data.itemList[0].productDesc%}\n                                {{ \" - \" ~data.itemList[0].productDesc }}\n                                {%endif%}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Reason for Transportation</td>\n                    <td>\n                        <span>\n                            <strong>{{ get_supply_type(data.supplyType) }} - {{ get_sub_supply_type(data.subSupplyType) }} </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Transporter</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.transporterId, 5) }}-\n                                {{ data.transporterName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if data.VehiclListDetails|length > 0 %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - B</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div>\n                            <table cellspacing=\"0\" cellpadding=\"3\" rules=\"all\" class=\"table table-responsive vehicle-info\" border=\"1\">\n                                <tbody>\n                                    <tr>\n                                        <th scope=\"col\">Mode</th>\n                                        <th scope=\"col\">\n                                            Vehicle / Trans <br />\n                                            Doc No &amp; Dt.\n                                        </th>\n                                        <th scope=\"col\">From</th>\n                                        <th scope=\"col\">Entered Date</th>\n                                        <th scope=\"col\">Entered By</th>\n                                        <th scope=\"col\">\n                                            Cdata No. <br />\n                                            (If any)\n                                        </th>\n                                        <th scope=\"col\">\n                                            Multi Veh.Info <br />\n                                            (If any)\n                                        </th>\n                                    </tr>\n                                    {% for detail in data.VehiclListDetails %}\n                                    <tr>\n                                        <td>\n                                            {{ get_transport_mode(detail.transMode) }}\n                                        </td>\n                                        <td>\n                                            {{ detail.vehicleNo }} /\n                                            {{ detail.transDocNo }} Dt:\n                                            {{ detail.transDocDate }}\n                                        </td>\n                                        <td>{{ detail.fromPlace }}</td>\n                                        <td>\n                                            {{ detail.enteredDate |\n                                                replace(\":00 \", \" \") }}\n                                        </td>\n                                        <td>{{ detail.userGSTINTransin }}</td>\n                                        <td>-</td>\n                                        <td>-</td>\n                                    </tr>\n                                    {% endfor%}\n                                </tbody>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img class=\"barcode\" src=\"data:image/png;base64,{{ get_ewaybill_barcode(data.ewbNo) }}\">\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    {% endif %}\n\n\n\n\n\n    <div id=\"footer-html\" class=\"visible-pdf\">\n        <p class=\"text-center small page-number visible-pdf\">\n            {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n        </p>\n    </div>\n<!--</div>-->",
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2025-03-09 03:47:49.500542",
  "module": "Business Needed Solutions",
  "name": "BNS Quotation - V1",
  "page_number": "Hide",
  "pdf_generator": null,
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Purchase Order",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% set e_invoice_log = None %}\n{% if doc.irn %}\n{% set e_invoice_log = frappe.db.get_value(\n        \"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True\n    ) %}\n{% set invoice_data = e_invoice_log and e_invoice_log.invoice_data and _dict(json.loads(e_invoice_log.invoice_data)) or None %}\n{% endif %}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;padding:10px\">\n            <div class=\"col-xs-3 column-break\">\n                {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n                {% if company_logo %}\n                <div>\n                    <img width=\"100%\" src=\"{{ company_logo }}\">\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 column-break text-center\">\n                <h2 style=\"margin:0;font-size:0.85rem\">{{ doc.company }}</h2>\n                <div style=\"font-size:0.65rem\">\n                    <b>{% set seller_address = frappe.db.get_value(\"Address\", doc.billing_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                        {{ format_address(seller_address) }}\n                        {% if doc.company_gstin %}\n                        GST: {{ doc.company_gstin }}<br>\n                        {% endif %}\n                        <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                    </b>\n                </div>\n            </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;font-size:0.95rem\"><b>\n                    {% if doc.status == \"Draft\" %}\n                        Draft PO\n                    {% elif doc.status == \"On Hold\" %}\n                        On Hold PO\n                    {% elif doc.status == \"To Receive and Bill\" %}\n                        PO – To Receive and Bill\n                    {% elif doc.status == \"To Bill\" %}\n                        PO – To Bill\n                    {% elif doc.status == \"To Receive\" %}\n                        PO – To Receive\n                    {% elif doc.status == \"Completed\" %}\n                        Completed PO\n                    {% elif doc.status == \"Cancelled\" %}\n                        Cancelled PO\n                    {% elif doc.status == \"Closed\" %}\n                        Closed PO\n                    {% elif doc.status == \"Delivered\" %}\n                        Delivered PO\n                    {% else %}\n                        Purchase Order\n                    {% endif %}\n                </b></h2>\n                <div class=\"row\" style=\"font-size:0.6rem\">\n                    <div class=\"col-xs-5 text-left\" style=\"text-wrap: nowrap;font-size:0.5rem\"><b>PO Date:<br>Delivery Date:<br>PO No:</b></div>\n                    <div class=\"col-xs-7 text-right\" style=\"text-wrap: nowrap;font-size:0.5rem\">{{ frappe.utils.formatdate(doc.transaction_date) }}<br>{{ frappe.utils.formatdate(doc.schedule_date) }}<br><b>{{ doc.name }}</b><br>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Supplier Details</u></b></h6>\n                            <p><b>{{ doc.supplier_name }}</b></p>\n                            {% set supplier_address = frappe.db.get_value(\"Address\", doc.supplier_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(supplier_address) }}\n\n                            {% if doc.supplier_gstin %}\n                            GST: <u>{{ doc.supplier_gstin }}</u><br>\n                            {% endif %}\n                            {% set supplier_pan = frappe.db.get_value(\"Customer\", doc.supplier_name, \"pan\")%}\n                            {% if supplier_pan %}\n                            PAN: {{ supplier_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            </td><td>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% endif %}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <!--</div>-->\n        <div class=\"col-xs-12 column-break item-det\">\n            <table class=\"table table-bordered e-invoice-table\">\n                <thead>\n                    <tr>\n                        <th colspan=\"2\">#</th>\n                        <th colspan=\"24\">Item</th>\n                        <th colspan=\"7\">HSN/SAC</th>\n                        <th colspan=\"7\">Qty</th>\n                        {% if doc.taxes[0].included_in_print_rate == 1 %}\n                            <th colspan=\"15\">Rate(Inc Tax)</th>\n                        {% else %}\n                            <th colspan=\"15\">Rate(Exc Tax)</th>\n                        {% endif %}\n                        <!--<th colspan=\"9\">Rate(Exc Tax)</th>-->\n                        <th colspan=\"8\">Desc</th>\n                        <th colspan=\"11\">Net Total</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {% for item in doc.items %}\n                    <tr class=\"no-break\">\n                        <td colspan=\"2\">{{ loop.index }}</td>\n                        <td colspan=\"24\">\n                            <b>{{ item.item_code }}: {{ item.item_name }}</b><br>\n                            {% if item.barcode %}\n                            <p style=\"font-size:0.35rem;\">\n                                EAN: {{ item.barcode }}\n                            </p>\n                            {% endif %}\n                        </td>\n                        <td colspan=\"7\">{{ item.gst_hsn_code }}</td>\n                        <td colspan=\"7\" class=\"text-left\" style=\"line-height: 95%;\"><b>\n                            {% set is_uom_whole = frappe.db.get_value(\"UOM\", item.uom, \"must_be_whole_number\") %}\n                            {% set is_stock_uom_whole = frappe.db.get_value(\"UOM\", item.stock_uom, \"must_be_whole_number\") %}\n                            <span style=\"font-size:0.5rem;\">\n                                {% if is_uom_whole %}\n                                    {{ item.qty | int}}\n                                {% else %}\n                                    {{ item.qty}}\n                                {% endif %}\n                            </span>\n                            <span style=\"font-size:0.45rem;\">\n                                {{ item.uom }}\n                            </span>\n                            {% if item.uom != item.stock_uom %}\n                                {% set stock_qty = item.stock_qty/item.qty %}\n                                <p style=\"font-size:0.35rem;\">\n                                    {% if is_stock_uom_whole %}\n                                        {{stock_qty | int}}\n                                    {% else %}\n                                        {{stock_qty}}\n                                    {% endif %}\n                                    {{item.stock_uom}}/{{ item.uom }}\n                                </p>\n                            {% endif %}\n                            </b>\n                        </td>\n                        <td colspan=\"15\">\n                            <b>\n                                <p style=\"font-size:0.55rem;\">\n                                {{ frappe.utils.fmt_money(item.rate, currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </p>\n                            </b>\n                        </td>\n                        <td colspan=\"8\">{{ item.discount_percentage }}% </td>\n                        <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(item.net_amount, currency=doc.currency) }}</b></td>\n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        </div>\n\n\n\n    <!--</div>-->\n\n\n{% set freight_row = doc.taxes | selectattr('account_head', 'equalto', 'Freight and Forwarding Charges - RHCPL') | first %}\n    <!--<div class=\"no-break\">-->\n        <table class=\"table table-bordered e-invoice-table\">\n            <tbody>\n                <tr>\n                    <td rowspan=1 colspan=2 style=\"vertical-align:top !important;\"><b>T&C</b></td>\n                    <td class=\"text-right\">Total Taxable Value</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.net_total, currency=\"INR\") }}</td>\n                </tr>\n                \n                {% if freight_row %}\n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.total_taxes_and_charges-freight_row.tax_amount, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                    <tr>\n                        <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(freight_row.tax_amount, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                {% else %}\n                    \n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(doc.total_taxes_and_charges, currency=\"INR\") }}</td>\n                    </tr>\n                    \n                    \n                {% endif %}\n                \n                {% if doc.discount_amount %}\n                <tr>\n                    <td class=\"text-right\">Additional Discount</td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.discount_amount, currency=\"INR\") }}</b></td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td class=\"text-right\"><b>Grand Total</b></td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.rounded_total, currency=\"INR\") }}</b></td>\n                </tr>\n                <tr>\n                    <td colspan=2>\n                        <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.in_words }}</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    <!--</div>-->\n    {{ doc.gst_breakup_table }}\n    <div class=\"no-break\">\n        <table style=\"table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4>\n                    <b>Bank Details</b>\n                </td>\n                <td colspan=4>\n                    <b>Pre Authenticated By. : </b>{{doc.company}}\n                </td>\n            </tr>\n            <tr rowspan=3>\n                <td rowspan=1 colspan=4>\n                    {% set bank_account = frappe.db.get_value(\"Bank Account\", {\"company\": doc.company, \"is_default\": 1}, [\"account_name\",\"bank\", \"bank_account_no\", \"branch_code\",\"iban\"], as_dict=True) %}\n                    {% if bank_account.account_name %}\n                    Account Name: <b><i>{{ bank_account.account_name }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank %}\n                    Bank Name: <b><i>{{ bank_account.bank }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank_account_no %}\n                    Account Number: <b><i>{{ bank_account.bank_account_no }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.branch_code %}\n                    Branch Code (IFSC): <b><i>{{ bank_account.branch_code }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.iban %}\n                    IBAN: <b><i>{{ bank_account.iban }}</i></b><br>\n                    {% endif %}\n                </td>\n                <td colspan=4><br><br><br><br></td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4><b>{% if doc.custom_is_print==1%} Payment Terms {% endif %}</b></td>\n                <td colspan=2>\n                    Authorised Signatory\n                </td>\n                <td colspan=2>\n                    Issuing Signatory\n                </td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=2 colspan=4>\n                    {% if doc.payment_schedule and doc.custom_is_print==1 %}\n                    <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                        <thead>\n                            <tr>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for row in doc.payment_schedule %}\n                            <tr>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                            </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                    {% endif %}\n                </td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n            </tr>\n            <tr rowspan=1>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n            </tr>\n        </table>\n    <!--</div>-->\n\n\n\n    {% if doc.ewaybill %}\n    {% set e_waybill_data = frappe.db.get_value(\"e-Waybill Log\", {\"reference_name\": doc.name, \"reference_doctype\": \"Sales Invoice\"}, \"data\") %}\n    <div class=\"page-break\"></div>\n    {% set data = _dict(json.loads(e_waybill_data)) %}\n    {%- set irn = doc.irn -%}\n\n    {% if data.supplyType == \"O\" %}\n    {% set generated_by = data.fromTrdName %}\n    {% else %}\n    {% set generated_by = data.toTrdName %}\n    {% endif %}\n\n    <div class=\"ewaybill-page-layout\">\n        <table class=\"table borderless\" style=\"border:0\">\n            <tbody>\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <h1 class=\"title\">e-Waybill</h1>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img src=\"data:image/png;base64,{{ get_e_waybill_qr_code(data.ewbNo,data.userGstin, data.ewayBillDate) }}\" class=\"qr-code\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table class=\"table borderless\">\n            <tbody>\n                <tr>\n                    <td style=\"width: 200px\">\n                        <span>e-Waybill No:</span>\n                    </td>\n                    <td>\n                        <span class=\"e-waybill-number\">\n                            <strong>{{ add_spacing(data.ewbNo, 4) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>e-Waybill Date:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \"\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Generated By:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>\n                                {{ add_spacing(data.userGstin, 5) }} - {{ generated_by }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid From:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \" \") }}\n                                {{ \" [\" }}{{ data.actualDist }}{{ \"Kms]\" }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid Until:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.validUpto[:10] }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if irn %}\n                <tr>\n                    <td>\n                        <span>IRN:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ irn }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - A</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Supplier</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.fromGstin, 5) }}-{{ data.fromTrdName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Dispatch</td>\n                    <td>\n                        <span>\n                            <strong>{{ data.fromPlace }},\n                                {{ get_state(data.actFromStateCode) }} -\n                                {{ data.fromPincode }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Recipient</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.toGstin, 5) }}-{{ data.toTrdName }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Delivery</td>\n                    <td>\n                        <span><strong>\n                                {{ data.toPlace }},\n                                {{ get_state(data.actToStateCode) }} -{{ data.toPincode }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document No.</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docNo }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document Date</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docDate }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Transaction Type:</span>\n                    </td>\n                    <td>\n                        <span><strong>{{ get_transport_type(data.transactionType) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Value of Goods</td>\n                    <td>\n                        <span class=\"classfont\">\n                            <strong>\n                                {{ frappe.utils.fmt_money(data.totInvValue, currency=\"INR\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>HSN Code</td>\n                    <td>\n                        <span class=\"form-control1\" onkeydown=\"expandtext(this);\">\n                            <strong>{{ data.itemList[0].hsnCode }}\n                                {%if data.itemList[0].productDesc%}\n                                {{ \" - \" ~data.itemList[0].productDesc }}\n                                {%endif%}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Reason for Transportation</td>\n                    <td>\n                        <span>\n                            <strong>{{ get_supply_type(data.supplyType) }} - {{ get_sub_supply_type(data.subSupplyType) }} </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Transporter</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.transporterId, 5) }}-\n                                {{ data.transporterName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if data.VehiclListDetails|length > 0 %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - B</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div>\n                            <table cellspacing=\"0\" cellpadding=\"3\" rules=\"all\" class=\"table table-responsive vehicle-info\" border=\"1\">\n                                <tbody>\n                                    <tr>\n                                        <th scope=\"col\">Mode</th>\n                                        <th scope=\"col\">\n                                            Vehicle / Trans <br />\n                                            Doc No &amp; Dt.\n                                        </th>\n                                        <th scope=\"col\">From</th>\n                                        <th scope=\"col\">Entered Date</th>\n                                        <th scope=\"col\">Entered By</th>\n                                        <th scope=\"col\">\n                                            Cdata No. <br />\n                                            (If any)\n                                        </th>\n                                        <th scope=\"col\">\n                                            Multi Veh.Info <br />\n                                            (If any)\n                                        </th>\n                                    </tr>\n                                    {% for detail in data.VehiclListDetails %}\n                                    <tr>\n                                        <td>\n                                            {{ get_transport_mode(detail.transMode) }}\n                                        </td>\n                                        <td>\n                                            {{ detail.vehicleNo }} /\n                                            {{ detail.transDocNo }} Dt:\n                                            {{ detail.transDocDate }}\n                                        </td>\n                                        <td>{{ detail.fromPlace }}</td>\n                                        <td>\n                                            {{ detail.enteredDate |\n                                                replace(\":00 \", \" \") }}\n                                        </td>\n                                        <td>{{ detail.userGSTINTransin }}</td>\n                                        <td>-</td>\n                                        <td>-</td>\n                                    </tr>\n                                    {% endfor%}\n                                </tbody>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img class=\"barcode\" src=\"data:image/png;base64,{{ get_ewaybill_barcode(data.ewbNo) }}\">\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    {% endif %}\n\n\n\n\n\n    <div id=\"footer-html\" class=\"visible-pdf\">\n        <p class=\"text-center small page-number visible-pdf\">\n            {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n        </p>\n    </div>\n<!--</div>-->",
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2025-04-07 01:40:13.552910",
  "module": "Business Needed Solutions",
  "name": "BNS PO Dynamic V1",
  "page_number": "Hide",
  "pdf_generator": null,
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "POS Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "<style>\n\t.print-format table, .print-format tr, .print-format td, .print-format div {\n\t\tline-height: 10%;\n\t\tvertical-align: middle;\n\t\t\n\t\tfont-size:8px;\n\t\tmargin-top:3px;\n\t\tmargin-bottom:2px;\n         /*border: 1px solid black;*/\n\t}\n\t.print-format th{\n\t    font-size:7px;\n\t    background: transparent !important;\n\t    border:0.5px !important;\n\t}\n\t\n\t.strikethrough {\n      position: relative;\n    }\n    .strikethrough:before {\n      position: absolute;\n      content: \"\";\n      left: 0;\n      top: 50%;\n      right: 0;\n      border-top: 0.2px solid;\n      border-color: inherit;\n      \n      -webkit-transform:rotate(-30deg);\n      -moz-transform:rotate(-30deg);\n      -ms-transform:rotate(-30deg);\n      -o-transform:rotate(-30deg);\n      transform:rotate(-30deg);\n    }\n\t\n\t.print-format p {\n\t\t/*line-height: 150%;*/\n\t\tvertical-align: middle;\n         /*border: 1px solid black;*/\n\t}\n\t@media screen {\n\t\t.print-format {\n\t\t\twidth: 72mm;\n\t\t\tpadding: 0.025in;\n\t\t\tmin-height: 6in;\n\t\t}\n\t}\n\th1{\n\t    margin:0;\n\t    padding:0;\n\t    \n\t}\n\t*{\n\t    font-size: 9px;\n\t    font-weight: 900;\n\t    font-family: \"Times New Roman\";\n\t}\n\t.check{\n\t    height:0px;\n\t    padding:0;\n\t    margin:0;\n\t    border:none;\n\t}\n\t\n</style>\n\n<!--<p class=\"text-center\">-->\n<center>\n    <!--<h1>MEVABITE</h1>-->\n    <img src=\"/files/MB%20%20Logo%20New%20Final.png\" width=\"25%\" style=\"border:0;\"><br><br>\n    <span><b style=\"font-size:12px;\">{{ doc.company }}</b></span><br>\n\t<b style=\"font-size:10px;\">{{doc.pos_profile}}</b>\n\t<br>\n\t<b style=\"font-size:10px;\">GSTIN: {{doc.company_gstin}}</b>\n\t<br><br>\n\t{% if doc.docstatus == 0 %}\n\t\t<b>{{ doc.status + \" \"+ (doc.select_print_heading or _(\"Invoice\")) }}</b><br>\n\t{% else %}\n\t\t<b>{{ doc.select_print_heading or _(\"Invoice\") }}</b><br>\n\t{% endif %}\n</center>\n<!--</p>-->\n<table width=\"100%\">\n    <tbody>\n\t<tr width=\"100%\">\n\t<td><b>{{ _(\"Receipt No\") }}: <span style=\"font-size:9px;\">{{ doc.name }}</span></b></td>\n\t<td style=\"text-align: right;\"><b>{{ _(\"Cashier\") }}:</b> {{ frappe.db.get_value(\"User\", doc.owner, \"first_name\") }}</td>\n\t</tr>\n\t<tr>\n\t<td><b>{{ _(\"Name\") }}: {{ doc.customer_name }}</b></td>\n\t<td style=\"text-align: right;\"><b>{{ _(\"Date\") }}:</b> {{ doc.get_formatted(\"posting_date\") }}</td>\n\t</tr>\n\t<tr>\n\t<td><b>{{ _(\"Mobile\") }}: {{ frappe.db.get_value(\"Customer\", doc.customer, \"mobile_no\") }}</b></td>\n\t<td style=\"text-align: right;\"><b>{{ _(\"Time\") }}:</b> {{  doc.get_formatted(\"posting_time\") }}</td>\n\t</tr>\n\t</tbody>\n</table>\n<table class=\"table table-condensed cart no-border\">\n\t<thead>\n\t\t<tr>\n\t\t    <th width=\"2%\" style=\"font-size: 5px;\">{{ _(\"No.\") }}</th>\n\t\t\t<th width=\"48%\">{{ _(\"Item\") }}</th>\n\t\t\t<th width=\"15%\" class=\"text-right\">{{ _(\"Qty\") }}</th>\n\t\t\t<th width=\"10%\" class=\"text-right\">{{ _(\"Rate\") }}</th>\n\t\t\t<!--<th width=\"10%\" class=\"text-right\">{{ _(\"Rate\") }}</th>-->\n\t\t\t<th width=\"25%\" class=\"text-right\">\n\t\t\t    <span style=\"font-size: 5px;\">{{ _(\"Net Amount (Exc Tax)\") }}</span><br><b>{{ _(\"Amount\") }}</b>\n\t\t\t</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t{%- for item in doc.items -%}\n\t\t<tr>\n\t\t    <td style=\"font-size: 6px;\">{{ loop.index }}</td>\n\t\t    <!--<td class=\"text-right\">{{ item.item_code }}</td>-->\n\t\t\t<td>\n\t\t\t   <span style=\"font-size: 6px;\"> {{ item.item_code }}</span><br>\n\t\t\t   <b style=\"font-size:8px;\">\n\t\t\t\t{%- if item.item_name != item.item_code -%}\n\t\t\t\t\t{{ item.item_name }}\n\t\t\t\t{%- endif -%}\n\t\t\t\t</b>\n\t\t\t\t<span style=\"font-size: 6px;\">\n\t\t\t\t{%- if item.gst_hsn_code -%}\n\t\t\t\t\t<br>{{ _(\"HSN/SAC\") }}: {{ item.gst_hsn_code }}\n\t\t\t\t{%- endif -%}\n\t\t\t\t{%- if item.item_tax_template -%}\n\t\t\t\t &nbsp;{{ _(\"(\")}}{{ frappe.db.get_value(\"Item Tax Template\", item.item_tax_template, \"title\") }}{{ _(\")\")}}\n\t\t\t\t{%- endif -%}\n\t\t\t\t</span>\n\t\t\t</td>\n\t\t\t<td class=\"text-right\"><b style=\"font-size:95%;\">{{ item.qty }} <sub style=\"font-size: 5px;\">{{ item.uom }}</sub></b></td>\n\t\t\t<td class=\"text-right\">\n\t\t\t    {%- if item.price_list_rate <= item.rate -%}\n\t\t\t    <b style=\"font-size:7px;\">{{ item.rate }}</b>\n\t\t\t    {%- else -%}\n\t\t\t    <span class=\"strikethrough\" style=\"font-size:5px;\">{{item.price_list_rate}}</span><br>\n\t\t\t    <b style=\"font-size:7px;\">{{ item.rate }}</b>\n\t\t\t    {%- endif -%}\n\t\t\t</td>\n\t\t\t<!--<td class=\"text-right\">{{ item.net_rate }}</td>-->\n\t\t\t<td class=\"text-right\"><span style=\"font-size: 5px;\">{{ item.get_formatted(\"net_amount\") }}</span><br><b>{{ item.get_formatted(\"amount\") }}</b></td>\n\t\t</tr>\n\t\t{%- endfor -%}\n\t</tbody>\n</table>\n<table class=\"table table-condensed no-border check\">\n\t<tbody>\n\t\t<tr>\n\t\t\t\t<td class=\"text-right\" style=\"width: 70%\">\n\t\t\t\t\t{{ _(\"Total Excl. Tax\") }}\n\t\t\t\t</td>\n\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t{{ doc.get_formatted(\"net_total\", doc) }}\n\t\t\t\t</td>\n\t\t</tr>\n\t\t<!--{%- for index in range(doc.taxes|length) -%}-->\n\t\t  <!--{%- if (not doc.taxes[index].included_in_print_rate or doc.flags.show_inclusive_tax_in_print) and doc.taxes[index].tax_amount != 0 -%}-->\n\t\t<!--\t<tr>-->\n\t\t<!--\t\t<td class=\"text-right\" style=\"width: 70%\">-->\n\t\t<!--\t\t\t{% if '%' in doc.taxes[index].description %}-->\n\t\t<!--\t\t\t    {{ doc.taxes[index].description }}-->\n\t\t<!--\t\t\t{% else %}-->\n\t\t<!--\t\t\t    {{ doc.taxes[index].description }}@{{ doc.taxes[index].rate }}%-->\n\t\t<!--\t\t\t{% endif %}-->\n\t\t<!--\t\t</td>-->\n\t\t<!--\t\t<td class=\"text-right\">-->\n\t\t<!--\t\t\t{{ doc.taxes[index].get_formatted(\"tax_amount\", doc) }}-->\n\t\t<!--\t\t</td>-->\n\t\t<!--\t<tr>-->\n\t\t  <!--{%- endif -%}-->\n\t\t<!--{%- endfor -%}-->\n\t\t<tr>\n\t\t\t\t<td class=\"text-right\" style=\"width: 70%\">\n\t\t\t\t\t{% if '%' in doc.taxes[0].description %}\n\t\t\t\t\t    {{ doc.taxes[0].description }}\n\t\t\t\t\t{% else %}\n\t\t\t\t\t    {{ doc.taxes[0].description }}\n\t\t\t\t\t{% endif %}\n\t\t\t\t</td>\n\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t{{ doc.taxes[0].get_formatted(\"tax_amount\", doc) }}\n\t\t\t\t</td>\n\t\t<tr>\n        <tr>\n\t\t\t\t<td class=\"text-right\" style=\"width: 70%\">\n\t\t\t\t\t{% if '%' in doc.taxes[1].description %}\n\t\t\t\t\t    {{ doc.taxes[1].description }}\n\t\t\t\t\t{% else %}\n\t\t\t\t\t    {{ doc.taxes[1].description }}\n\t\t\t\t\t{% endif %}\n\t\t\t\t</td>\n\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t{{ doc.taxes[0].get_formatted(\"tax_amount\", doc) }}\n\t\t\t\t</td>\n\t\t\t<tr>\n\t\t{%- if doc.discount_amount -%}\n\t\t<tr>\n\t\t\t<td class=\"text-right\" style=\"width: 75%\">\n\t\t\t\t{{ _(\"Discount\") }}\n\t\t\t</td>\n\t\t\t<td class=\"text-right\">\n\t\t\t\t{{ doc.get_formatted(\"discount_amount\") }}\n\t\t\t</td>\n\t\t</tr>\n\t\t{%- endif -%}\n\t\t<!--<tr>-->\n\t\t<!--\t<td class=\"text-right\" style=\"width: 75%\">-->\n\t\t<!--\t\t<b>{{ _(\"Grand Total\") }}</b>-->\n\t\t<!--\t</td>-->\n\t\t<!--\t<td class=\"text-right\">-->\n\t\t<!--\t\t{{ doc.get_formatted(\"grand_total\") }}-->\n\t\t<!--\t</td>-->\n\t\t<!--</tr>-->\n\t\t{%- if doc.rounded_total -%}\n\t\t<tr>\n\t\t\t<td class=\"text-right\" style=\"width: 60%\">\n\t\t\t\t<b style=\"font-size:8px;\">{{ _(\"Grand Total (Rounded)\") }}</b>\n\t\t\t</td>\n\t\t\t<td class=\"text-right\">\n\t\t\t    <b style=\"font-size:8px;\">{{ doc.get_formatted(\"rounded_total\") }}</b>\n\t\t\t</td>\n\t\t</tr>\n\t\t{%- endif -%}\n\t<!--\t{%- for row in doc.payments -%}-->\n\t<!--\t    {%- if row.amount != 0 -%}-->\n\t<!--\t\t<tr>-->\n\t<!--\t\t\t<td class=\"text-right\" style=\"width: 70%\">-->\n\t<!--\t\t\t    {{ row.mode_of_payment }}-->\n\t<!--\t\t\t</td>-->\n\t<!--\t\t\t<td class=\"text-right\">-->\n\t<!--\t\t\t\t{{ row.get_formatted(\"amount\", doc) }}-->\n\t<!--\t\t\t</td>-->\n\t<!--\t\t<tr>-->\n\t<!--\t\t{%- endif -%}-->\n\t<!--\t{%- endfor -%}-->\n\t<!--\t<tr>-->\n\t<!--\t\t<td class=\"text-right\" style=\"width: 75%\">-->\n\t<!--\t\t\t<b>{{ _(\"Paid Amount\") }}</b>-->\n\t<!--\t\t</td>-->\n\t<!--\t\t<td class=\"text-right\">-->\n\t<!--\t\t\t{{ doc.get_formatted(\"paid_amount\") }}-->\n\t<!--\t\t</td>-->\n\t<!--\t</tr>-->\n\t<!--{%- if doc.change_amount -%}-->\n\t<!--\t<tr>-->\n\t<!--\t\t<td class=\"text-right\" style=\"width: 75%\">-->\n\t<!--\t\t\t<b>{{ _(\"Change Amount\") }}</b>-->\n\t<!--\t\t</td>-->\n\t<!--\t\t<td class=\"text-right\">-->\n\t<!--\t\t\t{{ doc.get_formatted(\"change_amount\") }}-->\n\t<!--\t\t</td>-->\n\t<!--\t</tr>-->\n\t<!--{%- endif -%}-->\n\t</tbody>\n</table>\n<p>{{ doc.terms or \"\" }}</p>\n<center><img src=\"/files/qr-code-10.png\" width=\"25%\"></center>\n<p class=\"text-center\">{{ _(\"Thank you, please visit again.\") }}</p>\n",
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2025-03-09 03:50:34.250137",
  "module": "Business Needed Solutions",
  "name": "BNS POS SI 3Inch - V1",
  "page_number": "Hide",
  "pdf_generator": null,
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "br {\n    line-height:5px;\n}\n\n.text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Sales Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% set e_invoice_log = None %}\n{% if doc.irn %}\n{% set e_invoice_log = frappe.db.get_value(\n        \"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True\n    ) %}\n{% set invoice_data = e_invoice_log and e_invoice_log.invoice_data and _dict(json.loads(e_invoice_log.invoice_data)) or None %}\n{% endif %}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;padding:10px\">\n            <div class=\"col-xs-3 column-break\">\n                {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n                {% if company_logo %}\n                <div>\n                    <img width=\"100%\" src=\"{{ company_logo }}\">\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 column-break text-center\">\n                <h2 style=\"margin:0;\">{{ doc.company }}</h2>\n                <div style=\"font-size:0.85rem\">\n                    <b>{% set seller_address = frappe.db.get_value(\"Address\", doc.company_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                        {{ format_address(seller_address) }}\n                        {% if doc.company_gstin %}\n                        GST: {{ doc.company_gstin }}<br>\n                        {% endif %}\n                        <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                    </b>\n                </div>\n            </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;\"><b>\n                        {% if doc.is_return %}\n                        Credit Note\n                        {% else %}\n                        {% if doc.status == \"Draft\" %}\n                        Draft Invoice\n                        {% elif doc.status == \"Cancelled\" %}\n                        Cancelled Invoice\n                        {% elif doc.irn %}\n                        e-Invoice\n                        {% else %}\n                        Invoice\n                        {% endif %}\n                        {% endif %}\n                    </b>\n                </h2>\n                <b><span style=\"font-size:0.35rem\">{{ doc.invoice_copy }}</span></b><br><br>\n                <div class=\"row\" style=\"font-size:0.6rem\">\n                    <div class=\"col-xs-5 text-left\" style=\"text-wrap: nowrap;font-size:0.45rem\"><b>Inv Date:<br>Invoice No:<br>Place of Supply:</b></div>\n                    <div class=\"col-xs-7 text-right\" style=\"text-wrap: nowrap;\">{{ frappe.utils.formatdate(doc.posting_date) }}<br><b>{{ doc.name }}</b><br>\n                        <div>{{doc.place_of_supply}}</div>\n                    </div>\n                    <!--<div class=\"col-xs-5 column-break\" style=\"\"></div>-->\n                </div>\n            </div>\n        </div>\n    </div>\n    <!--<div class=\"main-content\">-->\n        {% if doc.irn %}\n        <div class=\"col-xs-12 column-break einv-det\" style=\"margin-bottom:2px;\">\n            <!--<div class=\"col-xs-2 column-break text-left\"></div>-->\n            <div class=\"col-xs-4 column-break text-left\">\n                {% if e_invoice_log and e_invoice_log.signed_qr_code %}\n                <img src=\"data:image/png;base64,{{ get_qr_code(e_invoice_log.signed_qr_code, scale=3) }}\" class=\"qrcode\">\n                {% endif %}\n            </div>\n            <div class=\"col-xs-8 column-break text-right\">\n                {% if invoice_data and invoice_data.Irn %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>IRN</label></div>\n                    <div class=\"col-xs-8 value\"><u>{{ invoice_data.Irn }}</u></div>\n                </div>\n                {% endif %}\n                {% if invoice_data and invoice_data.AckNo %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>Ack. No.</label></div>\n                    <div class=\"col-xs-8 value\">{{ invoice_data.AckNo }}</div>\n                </div>\n                {% endif %}\n                {% if invoice_data and invoice_data.AckDt %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>Ack. Date</label></div>\n                    <div class=\"col-xs-8 value\">{{ frappe.utils.format_datetime(invoice_data.AckDt, \"dd/MM/yyyy hh:mm:ss\") }}</div>\n                </div>\n                {% endif %}\n                {% if doc.ewaybill %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>e-Waybill No.</label></div>\n                    <div class=\"col-xs-8 value\"><u>{{ doc.ewaybill }}</u></div>\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-1 column-break text-right\">\n            </div>\n        </div>\n        {% endif %}\n        <!--</div>-->\n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td colspan=6 rowspan=5>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Buyer Details</u></b></h6>\n                            <p><b>{{ doc.customer_name }}</b></p>\n                            {% set customer_address = frappe.db.get_value(\"Address\", doc.customer_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(customer_address) }}\n\n                            {% if doc.billing_address_gstin %}\n                            GST: <u>{{ doc.billing_address_gstin }}</u><br>\n                            {% endif %}\n                            {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer_name, \"pan\")%}\n                            {% if customer_pan %}\n                            PAN: {{ customer_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address_name }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% if shipping_address.gstin %}\n                            GST: <u>{{ shipping_address.gstin }}</u><br>\n                            {% endif %}\n                            {% endif %}\n                            {% if doc.dispatch_address %}\n                            <h6><b><u>Dispatch Details</u></b></h6>\n                            <p><b>{{ frappe.db.get_value(\"Address\", doc.dispatch_address_name, \"address_title\") }}</b></p>\n                            <!--<p>{{doc.dispatch_address}}</p>-->\n                            {% set dispatch_address = frappe.db.get_value(\"Address\", doc.dispatch_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                            {{ format_address(dispatch_address) }}\n                            {% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Transporter:</h6>\n                            {% if doc.transporter_name %}\n                            {{ doc.transporter_name }} <br>\n                            {{ doc.gst_transporter_id }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Vehicle No:</h6>\n                            {% if doc.vehicle_no %}\n                            {{ doc.vehicle_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Buyer's PO No:</h6>\n                            {% if doc.po_no %}\n                            {{ doc.po_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>PO Date:</h6>\n                            {% if doc.po_date %}\n                            {{ doc.po_date }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Builty No:</h6>\n                            {% if doc.custom_builty_no %}\n                            {{ doc.custom_builty_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Remarks:</h6>\n                            {% if doc.remarks %}\n                            {{ doc.remarks }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% if doc.incoterm or doc.named_place  %}\n                    <tr>\n                        <td colspan=3>\n                            <h6>Incoterm:</h6>\n                            {% if doc.incoterm %}\n                            {{ doc.incoterm }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Named Place:</h6>\n                            {% if doc.named_place %}\n                            {{ doc.named_place }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% endif %}\n                    <tr>\n                        <td colspan=2>\n                            \n                            <h6>Destination:</h6>\n                            {% if doc.custom_destination %}\n                            {{doc.custom_destination}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td rowspan=2 colspan=4>\n                            <h6>Terms of Delivery:</h6>\n                            {% if doc.custom_terms_of_delivery %}\n                            {{ doc.custom_terms_of_delivery }}\n                            {% elif doc.custom_terms_of_delivery_new %}\n                            {{ doc.custom_terms_of_delivery_new }}\n                            {% else %}<br><br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=2 rowspan=1>\n                            <h6>Doc No:</h6>\n                            {% if doc.custom_doc_no %}\n                            {{doc.custom_doc_no}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <!--</div>-->\n        <div class=\"col-xs-12 column-break item-det\">\n            <table class=\"table table-bordered e-invoice-table\">\n                <thead>\n                    <tr>\n                        <th colspan=\"2\">#</th>\n                        <th colspan=\"22\">Item</th>\n                        <th colspan=\"7\">HSN/SAC</th>\n                        <th colspan=\"7\">Qty</th>\n                        <th colspan=\"10\">Rate(Inc Tax)</th>\n                        <th colspan=\"10\">Rate(Exc Tax)</th>\n                        <th colspan=\"4\">D1</th>\n                        <th colspan=\"4\">D2</th>\n                        <th colspan=\"4\">D3</th>\n                        <th colspan=\"11\">Net Total</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {% for item in doc.items %}\n                    <tr class=\"no-break\">\n                        <td colspan=\"2\">{{ loop.index }}</td>\n                        <td colspan=\"22\">\n                            <b style=\"font-size:0.5rem;\">{{ item.item_name }}</b><br>\n                            {% if item.barcode %}\n                            <p style=\"font-size:0.35rem;\">\n                                EAN: {{ item.barcode }}\n                            </p>\n                            {% endif %}\n                        </td>\n                        <td colspan=\"7\" style=\"font-size:0.45rem;\">{{ item.gst_hsn_code }}</td>\n                        <td colspan=\"7\" class=\"text-left\" style=\"line-height: 95%;\"><b>\n                            {% set is_uom_whole = frappe.db.get_value(\"UOM\", item.uom, \"must_be_whole_number\") %}\n                            {% set is_stock_uom_whole = frappe.db.get_value(\"UOM\", item.stock_uom, \"must_be_whole_number\") %}\n                            \n                            <!--{% if item.weight_uom == \"Kg\" and item.weight_uom!=item.uom%}-->\n                            <!--    <p style=\"font-size:0.6rem;\">-->\n                            <!--        {{ item.total_weight }} Kg-->\n                            <!--    </p>-->\n                            <!--{% elif item.weight_uom == \"Gram\" and item.weight_uom!=\"Kg\" and item.weight_uom!=\"Gram\"%}-->\n                            <!--    <p style=\"font-size:0.6rem;\">-->\n                            <!--        {{ item.total_weight/1000 }} Kg-->\n                            <!--    </p>-->\n                            <!--{% endif %}-->\n                            <span style=\"font-size:0.5rem;\">\n                                {% if is_uom_whole %}\n                                    {{ item.qty | int}}\n                                {% else %}\n                                    {{ item.qty}}\n                                {% endif %}\n                            </span>\n                            <span style=\"font-size:0.45rem;\">\n                                {{ item.uom }}\n                            </span>\n                            {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                            {% set print_uom_conversion = frappe.db.get_value(\n                                \"UOM Conversion Detail\",\n                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                \"conversion_factor\"\n                            ) %}\n                            <!--{% if item.uom != item.stock_uom %}-->\n                            <!--    <p style=\"font-size:0.35rem;\">-->\n                            <!--        {% if is_stock_uom_whole %}-->\n                            <!--            {{item.conversion_factor | int}}-->\n                            <!--        {% else %}-->\n                            <!--            {{item.conversion_factor}}-->\n                            <!--        {% endif %}-->\n                            <!--        {{item.stock_uom}}/{{ item.uom }}-->\n                            <!--    </p>-->\n                            <!--{% endif %}-->\n                            {% if print_uom and item.uom != print_uom %}\n                                {% set print_uom_qty = item.conversion_factor/print_uom_conversion %}\n                                <p style=\"font-size:0.35rem;\">\n                                    {% if is_stock_uom_whole %}\n                                        {{print_uom_qty | int}}\n                                    {% else %}\n                                        {{print_uom_qty}}\n                                    {% endif %}\n                                    {{print_uom}}/{{ item.uom }}\n                                </p>\n                            {% endif %}\n                            </b>\n                        </td>\n                        {% if doc.taxes[0].included_in_print_rate == 1 %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set inclusive_rate = item.price_list_rate %}\n                            {% set exclusive_rate = inclusive_rate*100/(100+gst_rate) %}\n                        \n                        {% else %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set exclusive_rate = item.price_list_rate %}\n                            {% set inclusive_rate = exclusive_rate*(100+gst_rate)/100 %}\n                        \n                        {% endif %}\n                        <td colspan=\"10\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.4rem;\">{{ item.uom }}</small>\n                                </span>\n                                {% if print_uom and item.uom != print_uom %}\n                                <br>\n                                    <span style=\"font-size:0.45rem;\">\n                                    {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate * print_uom_conversion / item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                    </span>\n                                {% endif %}\n                            </b>\n                        </td>\n                        <td colspan=\"10\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </span>\n                                {% if print_uom and item.uom != print_uom %}\n                                <br>\n                                    <span style=\"font-size:0.45rem;\">\n                                    {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate*print_uom_conversion/item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                    </span>\n                                {% endif %}\n                            </b>\n                        </td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d1_ == 0.0 else item.custom_d1_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d2_ == 0.0 else item.custom_d2_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d3_ == 0.0 else item.custom_d3_ ~ '%' }}</td>\n                        <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(\"{:.2f}\".format(item.net_amount), currency=doc.currency) }}</b></td>\n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        </div>\n\n\n\n    <!--</div>-->\n\n\n{% set freight_row = doc.taxes | selectattr('account_head', 'equalto', 'Freight and Forwarding Charges') | first %}\n    <!--<div class=\"no-break\">-->\n        <table class=\"table table-bordered e-invoice-table\">\n            <tbody>\n                <tr>\n                    <td rowspan=1 colspan=2 style=\"vertical-align:top !important;\"><b>T&C</b></td>\n                    <td class=\"text-right\">Total Taxable Value</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.net_total), currency=doc.currency) }}</td>\n                </tr>\n                \n                {% if freight_row %}\n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges-freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                    <tr>\n                        <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                {% else %}\n                    \n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms %}<span style=\"font-size:0.5rem;\">{{doc.terms}}</span>{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                    \n                {% endif %}\n                \n                {% if doc.discount_amount %}\n                <tr>\n                    <td class=\"text-right\">Additional Discount</td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.discount_amount, currency=\"INR\") }}</b></td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td class=\"text-right\"><b>Grand Total</b></td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.rounded_total, currency=\"INR\") }}</b></td>\n                </tr>\n                <tr>\n                    <td colspan=2>\n                        <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.in_words }}</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    <!--</div>-->\n    {{ doc.gst_breakup_table }}\n    <div class=\"no-break\">\n        <table style=\"table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4>\n                    <b>Bank Details</b>\n                </td>\n                <td colspan=4>\n                    <b>Pre Authenticated By. : </b>{{doc.company}}\n                </td>\n            </tr>\n            <tr rowspan=3>\n                <td rowspan=1 colspan=4>\n                    {% set bank_account = frappe.db.get_value(\"Bank Account\", {\"company\": doc.company, \"is_default\": 1}, [\"account_name\",\"bank\", \"bank_account_no\", \"branch_code\",\"iban\"], as_dict=True) %}\n                    {% if bank_account.account_name %}\n                    Account Name: <b><i>{{ bank_account.account_name }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank %}\n                    Bank Name: <b><i>{{ bank_account.bank }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank_account_no %}\n                    Account Number: <b><i>{{ bank_account.bank_account_no }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.branch_code %}\n                    Branch Code (IFSC): <b><i>{{ bank_account.branch_code }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.iban %}\n                    IBAN: <b><i>{{ bank_account.iban }}</i></b><br>\n                    {% endif %}\n                </td>\n                <td colspan=4><br><br><br><br></td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4><b>{% if doc.custom_is_print==1%} Payment Terms {% endif %}</b></td>\n                <td colspan=2>\n                    Authorised Signatory\n                </td>\n                <td colspan=2>\n                    Issuing Signatory\n                </td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=2 colspan=4>\n                    {% if doc.payment_schedule and doc.custom_is_print==1 %}\n                    <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                        <thead>\n                            <tr>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for row in doc.payment_schedule %}\n                            <tr>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                            </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                    {% endif %}\n                </td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n            </tr>\n            <tr rowspan=1>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n            </tr>\n        </table>\n    <!--</div>-->\n\n\n\n    {% if doc.ewaybill %}\n    {% set e_waybill_data = frappe.db.get_value(\"e-Waybill Log\", {\"reference_name\": doc.name, \"reference_doctype\": \"Sales Invoice\"}, \"data\") %}\n    <div class=\"page-break\"></div>\n    {% set data = _dict(json.loads(e_waybill_data)) %}\n    {%- set irn = doc.irn -%}\n\n    {% if data.supplyType == \"O\" %}\n    {% set generated_by = data.fromTrdName %}\n    {% else %}\n    {% set generated_by = data.toTrdName %}\n    {% endif %}\n\n    <div class=\"ewaybill-page-layout\">\n        <table class=\"table borderless\" style=\"border:0\">\n            <tbody>\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <h1 class=\"title\">e-Waybill</h1>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img src=\"data:image/png;base64,{{ get_e_waybill_qr_code(data.ewbNo,data.userGstin, data.ewayBillDate) }}\" class=\"qr-code\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table class=\"table borderless\">\n            <tbody>\n                <tr>\n                    <td style=\"width: 200px\">\n                        <span>e-Waybill No:</span>\n                    </td>\n                    <td>\n                        <span class=\"e-waybill-number\">\n                            <strong>{{ add_spacing(data.ewbNo, 4) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>e-Waybill Date:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \"\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Generated By:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>\n                                {{ add_spacing(data.userGstin, 5) }} - {{ generated_by }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid From:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \" \") }}\n                                {{ \" [\" }}{{ data.actualDist }}{{ \"Kms]\" }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid Until:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.validUpto[:10] }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if irn %}\n                <tr>\n                    <td>\n                        <span>IRN:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ irn }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - A</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Supplier</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.fromGstin, 5) }}-{{ data.fromTrdName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Dispatch</td>\n                    <td>\n                        <span>\n                            <strong>{{ data.fromPlace }},\n                                {{ get_state(data.actFromStateCode) }} -\n                                {{ data.fromPincode }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Recipient</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.toGstin, 5) }}-{{ data.toTrdName }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Delivery</td>\n                    <td>\n                        <span><strong>\n                                {{ data.toPlace }},\n                                {{ get_state(data.actToStateCode) }} -{{ data.toPincode }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document No.</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docNo }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document Date</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docDate }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Transaction Type:</span>\n                    </td>\n                    <td>\n                        <span><strong>{{ get_transport_type(data.transactionType) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Value of Goods</td>\n                    <td>\n                        <span class=\"classfont\">\n                            <strong>\n                                {{ frappe.utils.fmt_money(data.totInvValue, currency=\"INR\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>HSN Code</td>\n                    <td>\n                        <span class=\"form-control1\" onkeydown=\"expandtext(this);\">\n                            <strong>{{ data.itemList[0].hsnCode }}\n                                {%if data.itemList[0].productDesc%}\n                                {{ \" - \" ~data.itemList[0].productDesc }}\n                                {%endif%}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Reason for Transportation</td>\n                    <td>\n                        <span>\n                            <strong>{{ get_supply_type(data.supplyType) }} - {{ get_sub_supply_type(data.subSupplyType) }} </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Transporter</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.transporterId, 5) }}-\n                                {{ data.transporterName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if data.VehiclListDetails|length > 0 %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - B</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div>\n                            <table cellspacing=\"0\" cellpadding=\"3\" rules=\"all\" class=\"table table-responsive vehicle-info\" border=\"1\">\n                                <tbody>\n                                    <tr>\n                                        <th scope=\"col\">Mode</th>\n                                        <th scope=\"col\">\n                                            Vehicle / Trans <br />\n                                            Doc No &amp; Dt.\n                                        </th>\n                                        <th scope=\"col\">From</th>\n                                        <th scope=\"col\">Entered Date</th>\n                                        <th scope=\"col\">Entered By</th>\n                                        <th scope=\"col\">\n                                            Cdata No. <br />\n                                            (If any)\n                                        </th>\n                                        <th scope=\"col\">\n                                            Multi Veh.Info <br />\n                                            (If any)\n                                        </th>\n                                    </tr>\n                                    {% for detail in data.VehiclListDetails %}\n                                    <tr>\n                                        <td>\n                                            {{ get_transport_mode(detail.transMode) }}\n                                        </td>\n                                        <td>\n                                            {{ detail.vehicleNo }} /\n                                            {{ detail.transDocNo }} Dt:\n                                            {{ detail.transDocDate }}\n                                        </td>\n                                        <td>{{ detail.fromPlace }}</td>\n                                        <td>\n                                            {{ detail.enteredDate |\n                                                replace(\":00 \", \" \") }}\n                                        </td>\n                                        <td>{{ detail.userGSTINTransin }}</td>\n                                        <td>-</td>\n                                        <td>-</td>\n                                    </tr>\n                                    {% endfor%}\n                                </tbody>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img class=\"barcode\" src=\"data:image/png;base64,{{ get_ewaybill_barcode(data.ewbNo) }}\">\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    {% endif %}\n\n\n\n\n\n    <div id=\"footer-html\" class=\"visible-pdf\">\n        <p class=\"text-center small page-number visible-pdf\">\n            {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n        </p>\n    </div>\n<!--</div>-->",
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2025-04-06 19:39:46.881326",
  "module": "Business Needed Solutions",
  "name": "BNS SI -V2 (d1d2d3)",
  "page_number": "Hide",
  "pdf_generator": null,
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "br {\n    line-height:5px;\n}\n\n.text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Sales Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% set e_invoice_log = None %}\n{% if doc.irn %}\n{% set e_invoice_log = frappe.db.get_value(\n        \"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True\n    ) %}\n{% set invoice_data = e_invoice_log and e_invoice_log.invoice_data and _dict(json.loads(e_invoice_log.invoice_data)) or None %}\n{% endif %}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n{% set bns_settings = frappe.get_doc(\"BNS Settings\") %}\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;padding:10px\">\n            <div class=\"col-xs-3 column-break\">\n                {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n                {% if company_logo %}\n                <div>\n                    <img width=\"100%\" src=\"{{ company_logo }}\">\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 column-break text-center\">\n                <h2 style=\"margin:0;\">{{ doc.company }}</h2>\n                <div style=\"font-size:0.85rem\">\n                    <b>{% set seller_address = frappe.db.get_value(\"Address\", doc.company_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                        {{ format_address(seller_address) }}\n                        {% if doc.company_gstin %}\n                        GST: {{ doc.company_gstin }}<br>\n                        {% endif %}\n                        <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                    </b>\n                </div>\n            </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;\"><b>\n                        {% if doc.is_return %}\n                        Credit Note\n                        {% else %}\n                        {% if doc.status == \"Draft\" %}\n                        Draft Invoice\n                        {% elif doc.status == \"Cancelled\" %}\n                        Cancelled Invoice\n                        {% elif doc.irn %}\n                        e-Invoice\n                        {% else %}\n                        Invoice\n                        {% endif %}\n                        {% endif %}\n                    </b>\n                </h2>\n                <b><span style=\"font-size:0.35rem\">{{ doc.invoice_copy }}</span></b><br><br>\n                <div class=\"row\" style=\"font-size:0.6rem\">\n                    <div class=\"col-xs-5 text-left\" style=\"text-wrap: nowrap;font-size:0.45rem\"><b>Inv Date:<br>Invoice No:<br>Place of Supply:</b></div>\n                    <div class=\"col-xs-7 text-right\" style=\"text-wrap: nowrap;\">{{ frappe.utils.formatdate(doc.posting_date) }}<br><b>{{ doc.name }}</b><br>\n                        <div>{{doc.place_of_supply}}</div>\n                    </div>\n                    <!--<div class=\"col-xs-5 column-break\" style=\"\"></div>-->\n                </div>\n            </div>\n        </div>\n    </div>\n    <!--<div class=\"main-content\">-->\n        {% if doc.irn %}\n        <div class=\"col-xs-12 column-break einv-det\" style=\"margin-bottom:2px;\">\n            <!--<div class=\"col-xs-2 column-break text-left\"></div>-->\n            <div class=\"col-xs-4 column-break text-left\">\n                {% if e_invoice_log and e_invoice_log.signed_qr_code %}\n                <img src=\"data:image/png;base64,{{ get_qr_code(e_invoice_log.signed_qr_code, scale=3) }}\" class=\"qrcode\">\n                {% endif %}\n            </div>\n            <div class=\"col-xs-8 column-break text-right\">\n                {% if invoice_data and invoice_data.Irn %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>IRN</label></div>\n                    <div class=\"col-xs-8 value\"><u>{{ invoice_data.Irn }}</u></div>\n                </div>\n                {% endif %}\n                {% if invoice_data and invoice_data.AckNo %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>Ack. No.</label></div>\n                    <div class=\"col-xs-8 value\">{{ invoice_data.AckNo }}</div>\n                </div>\n                {% endif %}\n                {% if invoice_data and invoice_data.AckDt %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>Ack. Date</label></div>\n                    <div class=\"col-xs-8 value\">{{ frappe.utils.format_datetime(invoice_data.AckDt, \"dd/MM/yyyy hh:mm:ss\") }}</div>\n                </div>\n                {% endif %}\n                {% if doc.ewaybill %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>e-Waybill No.</label></div>\n                    <div class=\"col-xs-8 value\"><u>{{ doc.ewaybill }}</u></div>\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-1 column-break text-right\">\n            </div>\n        </div>\n        {% endif %}\n        <!--</div>-->\n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td colspan=6 rowspan=5>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Buyer Details</u></b></h6>\n                            <p><b>{{ doc.customer_name }}</b></p>\n                            {% set customer_address = frappe.db.get_value(\"Address\", doc.customer_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(customer_address) }}\n\n                            {% if doc.billing_address_gstin %}\n                            GST: <u>{{ doc.billing_address_gstin }}</u><br>\n                            {% endif %}\n                            {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer_name, \"pan\")%}\n                            {% if customer_pan %}\n                            PAN: {{ customer_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address_name }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% if shipping_address.gstin %}\n                            GST: <u>{{ shipping_address.gstin }}</u><br>\n                            {% endif %}\n                            {% endif %}\n                            {% if doc.dispatch_address %}\n                            <h6><b><u>Dispatch Details</u></b></h6>\n                            <p><b>{{ frappe.db.get_value(\"Address\", doc.dispatch_address_name, \"address_title\") }}</b></p>\n                            <!--<p>{{doc.dispatch_address}}</p>-->\n                            {% set dispatch_address = frappe.db.get_value(\"Address\", doc.dispatch_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                            {{ format_address(dispatch_address) }}\n                            {% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Transporter:</h6>\n                            {% if doc.transporter_name %}\n                            {{ doc.transporter_name }} <br>\n                            {{ doc.gst_transporter_id }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Vehicle No:</h6>\n                            {% if doc.vehicle_no %}\n                            {{ doc.vehicle_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Buyer's PO No:</h6>\n                            {% if doc.po_no %}\n                            {{ doc.po_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>PO Date:</h6>\n                            {% if doc.po_date %}\n                            {{ doc.po_date }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Builty No:</h6>\n                            {% if doc.custom_builty_no %}\n                            {{ doc.custom_builty_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Remarks:</h6>\n                            {% if doc.remarks %}\n                            {{ doc.remarks }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% if doc.incoterm or doc.named_place  %}\n                    <tr>\n                        <td colspan=3>\n                            <h6>Incoterm:</h6>\n                            {% if doc.incoterm %}\n                            {{ doc.incoterm }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Named Place:</h6>\n                            {% if doc.named_place %}\n                            {{ doc.named_place }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% endif %}\n                    <tr>\n                        <td colspan=2>\n                            \n                            <h6>Destination:</h6>\n                            {% if doc.custom_destination %}\n                            {{doc.custom_destination}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td rowspan=2 colspan=4>\n                            <h6>Terms of Delivery:</h6>\n                            {% if doc.custom_terms_of_delivery %}\n                            {{ doc.custom_terms_of_delivery }}\n                            {% elif doc.custom_terms_of_delivery_new %}\n                            {{ doc.custom_terms_of_delivery_new }}\n                            {% else %}<br><br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=2 rowspan=1>\n                            <h6>Doc No:</h6>\n                            {% if doc.custom_doc_no %}\n                            {{doc.custom_doc_no}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <!--</div>-->\n        <div class=\"col-xs-12 column-break item-det\">\n            <table class=\"table table-bordered e-invoice-table\">\n            <thead>\n                <tr>\n                    <th colspan=\"2\">#</th>\n                    <th colspan=\"24\">Item</th>\n                    <th colspan=\"7\">HSN/SAC</th>\n                    <th colspan=\"7\">Qty</th>\n                    {% if bns_settings.rate_excl_tax %}\n                    <th colspan=\"9\">Rate(Exc Tax)</th>\n                    {% endif %}\n                    {% if doc.is_print_gst_rate_per_row %}\n                    <th colspan=\"4\">GST</th>\n                    {% endif %}\n                    {% if bns_settings.rate_incl_tax %}\n                    <th colspan=\"9\">Rate(Inc Tax)</th>\n                    {% endif %}\n                    {% if bns_settings.discount_type == \"Triple Compounded\" %}\n                    <th colspan=\"4\">D1</th>\n                    <th colspan=\"4\">D2</th>\n                    <th colspan=\"4\">D3</th>\n                    {% else %}\n                    <th colspan=\"4\">Disc</th>\n                    {% endif %}\n                    <th colspan=\"11\">Net Total</th>\n                </tr>\n            </thead>\n            \n                <tbody>\n                    {% for item in doc.items %}\n                    <tr class=\"no-break\">\n                        <td colspan=\"2\">{{ loop.index }}</td>\n                        <td colspan=\"24\">\n                            <b style=\"font-size:0.5rem;\">{{ item.item_name }}</b><br>\n                            {% if item.barcode %}\n                            <p style=\"font-size:0.35rem;\">\n                                EAN: {{ item.barcode }}\n                            </p>\n                            {% endif %}\n                        </td>\n                        <td colspan=\"7\" style=\"font-size:0.45rem;\">{{ item.gst_hsn_code }}</td>\n                        <td colspan=\"7\" class=\"text-left\" style=\"line-height: 95%;\">\n                            <b>\n                                {{ item.qty }} {{ item.uom }}\n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <small style=\"font-size:0.35rem;\">{{ (item.conversion_factor / print_uom_conversion) | int }} {{ print_uom }}/{{ item.uom }}</small>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <br>\n                                            <small style=\"font-size:0.6rem;\">{{ item.total_weight }} Kg</small>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <br>\n                                            <small style=\"font-size:0.6rem;\">{{ item.total_weight / 1000 }} Kg</small>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% if doc.taxes[0].included_in_print_rate == 1 %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set inclusive_rate = item.price_list_rate %}\n                            {% set exclusive_rate = inclusive_rate*100/(100+gst_rate) %}\n                        \n                        {% else %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set exclusive_rate = item.price_list_rate %}\n                            {% set inclusive_rate = exclusive_rate*(100+gst_rate)/100 %}\n                        \n                        {% endif %}\n                        \n                        {% if bns_settings.rate_excl_tax %}\n                        <td colspan=\"9\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </span>\n                                \n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <span style=\"font-size:0.45rem;\">\n                                            {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate * print_uom_conversion / item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                            </span>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = exclusive_rate * item.qty / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = exclusive_rate * item.qty * 1000 / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% endif %}\n                        \n                        {% if doc.is_print_gst_rate_per_row %}\n                            <td colspan=\"4\">{{ gst_rate | round(0) | int }}%</td>\n                        {% endif %}\n                        \n                        {% if bns_settings.rate_incl_tax %}\n                        <td colspan=\"9\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </span>\n                                \n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <span style=\"font-size:0.45rem;\">\n                                            {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate * print_uom_conversion / item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                            </span>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = inclusive_rate * item.qty / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = inclusive_rate * item.qty * 1000 / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% endif %}\n                        \n                        {% if bns_settings.discount_type != \"Single\" %}\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d1_ == 0.0 else item.custom_d1_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d2_ == 0.0 else item.custom_d2_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d3_ == 0.0 else item.custom_d3_ ~ '%' }}</td>\n                        {% else %}\n                        <td colspan=\"4\">{{ item.discount_percentage }}% </td>\n                        {% endif %}\n                        <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(\"{:.2f}\".format(item.net_amount), currency=doc.currency) }}</b></td>\n                        \n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        </div>\n\n\n\n    <!--</div>-->\n\n    <!--<div class=\"no-break\">-->\n        <table class=\"table table-bordered e-invoice-table\">\n            <tbody>\n                <tr>\n                    <td rowspan=1 colspan=2 style=\"vertical-align:top !important;\"><b>T&C</b></td>\n                    <td class=\"text-right\">Total Taxable Value</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.net_total), currency=doc.currency) }}</td>\n                </tr>\n                {% set ns = namespace(freight_row=false) %}\n                \n                {% for tax_row in doc.taxes %}\n                    {% if \"Freight and Forwarding Charges\" in tax_row.account_head %}\n                        {% set ns.freight_row = tax_row %}\n                    {% endif %}\n                {% endfor %}\n                {% set freight_row = ns.freight_row %}\n                {% if freight_row %}\n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges-freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                    <tr>\n                        <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                {% else %}\n                    \n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms %}<span style=\"font-size:0.5rem;\">{{doc.terms}}</span>{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges), currency=doc.currency) }}</td>\n                    </tr>\n                {% endif %}\n                \n                {% if doc.discount_amount %}\n                <tr>\n                    <td class=\"text-right\">Additional Discount</td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.discount_amount, currency=\"INR\") }}</b></td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td class=\"text-right\"><b>Grand Total</b></td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.rounded_total, currency=\"INR\") }}</b></td>\n                </tr>\n                <tr>\n                    <td colspan=2>\n                        <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.in_words }}</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    <!--</div>-->\n    {{ doc.gst_breakup_table }}\n    {% if doc.is_print_gst_table %}\n    \n        {% set gst_summary = {} %}\n        {% set gst_flags = {\"uses_igst\": false, \"uses_cgst_sgst\": false} %}\n            \n            {% for item in doc.items %}\n                {% set gst_rate = (frappe.db.get_value(\"Item Tax Template\", {\"name\": item.item_tax_template}, \"gst_rate\") or 0) | float %}\n                {% set key = gst_rate|string %}\n            \n                {% if item.igst_amount %}\n                    {% set _ = gst_flags.update({\"uses_igst\": true}) %}\n                    {% if gst_summary[key] is not defined %}\n                        {% set _ = gst_summary.update({ key: {\n                            \"gst_rate\": gst_rate,\n                            \"taxable_value\": 0,\n                            \"igst_amount\": 0\n                        } }) %}\n                    {% endif %}\n                    {% set _ = gst_summary[key].update({\n                        \"taxable_value\": gst_summary[key].taxable_value + item.net_amount,\n                        \"igst_amount\": gst_summary[key].igst_amount + item.igst_amount\n                    }) %}\n                {% elif item.cgst_amount and item.sgst_amount %}\n                    {% set _ = gst_flags.update({\"uses_cgst_sgst\": true}) %}\n                    {% if gst_summary[key] is not defined %}\n                        {% set _ = gst_summary.update({ key: {\n                            \"gst_rate\": gst_rate,\n                            \"taxable_value\": 0,\n                            \"cgst_amount\": 0,\n                            \"sgst_amount\": 0\n                        } }) %}\n                    {% endif %}\n                    {% set _ = gst_summary[key].update({\n                        \"taxable_value\": gst_summary[key].taxable_value + item.net_amount,\n                        \"cgst_amount\": gst_summary[key].cgst_amount + item.cgst_amount,\n                        \"sgst_amount\": gst_summary[key].sgst_amount + item.sgst_amount\n                    }) %}\n                {% endif %}\n            {% endfor %}\n            \n            <h4>GST Summary</h4>\n            <table class=\"table table-bordered table-hover\" style=\"text-align: center;\">\n                <thead>\n                    <tr>\n                        <th rowspan=\"2\" style=\"text-align: center; vertical-align: middle;\">GST RATE</th>\n                        <th rowspan=\"2\" style=\"text-align: center; vertical-align: middle;\">Taxable Value</th>\n                        {% if gst_flags.uses_cgst_sgst %}\n                            <th colspan=\"2\" style=\"text-align: center; vertical-align: middle;\">CGST</th>\n                            <th colspan=\"2\" style=\"text-align: center; vertical-align: middle;\">SGST/UTGST</th>\n                        {% elif gst_flags.uses_igst %}\n                            <th colspan=\"2\" style=\"text-align: center; vertical-align: middle;\">IGST</th>\n                        {% endif %}\n                    </tr>\n                    <tr>\n                        {% if gst_flags.uses_cgst_sgst %}\n                            <th style=\"text-align: center; vertical-align: middle;\">Rate</th>\n                            <th style=\"text-align: center; vertical-align: middle;\">Amount</th>\n                            <th style=\"text-align: center; vertical-align: middle;\">Rate</th>\n                            <th style=\"text-align: center; vertical-align: middle;\">Amount</th>\n                        {% elif gst_flags.uses_igst %}\n                            <th style=\"text-align: center; vertical-align: middle;\">Rate</th>\n                            <th style=\"text-align: center; vertical-align: middle;\">Amount</th>\n                        {% endif %}\n                    </tr>\n                </thead>\n                <tbody>\n                    {% for row in gst_summary.values() %}\n                        <tr>\n                            <td>{{ row.gst_rate }}%</td>\n                            <td>{{ frappe.utils.fmt_money(\"{:.2f}\".format(row.taxable_value), currency=doc.currency) }}</td>\n            \n                            {% if gst_flags.uses_cgst_sgst %}\n                                <td>{{ (row.gst_rate / 2) | round(1) }}%</td>\n                                <td>{{ frappe.utils.fmt_money(\"{:.2f}\".format(row.cgst_amount), currency=doc.currency) }}</td>\n                                <td>{{ (row.gst_rate / 2) | round(1) }}%</td>\n                                <td>{{ frappe.utils.fmt_money(\"{:.2f}\".format(row.sgst_amount), currency=doc.currency) }}</td>\n                            {% elif gst_flags.uses_igst %}\n                                <td>{{ row.gst_rate }}%</td>\n                                <td>{{ frappe.utils.fmt_money(\"{:.2f}\".format(row.igst_amount), currency=doc.currency) }}</td>\n                            {% endif %}\n                        </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n\n\n    {% endif %}\n\n    <div class=\"no-break\">\n        <table style=\"table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4>\n                    <b>Bank Details</b>\n                </td>\n                <td colspan=4>\n                    <b>Pre Authenticated By. : </b>{{doc.company}}\n                </td>\n            </tr>\n            <tr rowspan=3>\n                <td rowspan=1 colspan=4>\n                    {% set bank_account = frappe.db.get_value(\"Bank Account\", {\"company\": doc.company, \"is_default\": 1}, [\"account_name\",\"bank\", \"bank_account_no\", \"branch_code\",\"iban\"], as_dict=True) %}\n                    {% if bank_account.account_name %}\n                    Account Name: <b><i>{{ bank_account.account_name }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank %}\n                    Bank Name: <b><i>{{ bank_account.bank }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank_account_no %}\n                    Account Number: <b><i>{{ bank_account.bank_account_no }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.branch_code %}\n                    Branch Code (IFSC): <b><i>{{ bank_account.branch_code }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.iban %}\n                    IBAN: <b><i>{{ bank_account.iban }}</i></b><br>\n                    {% endif %}\n                </td>\n                <td colspan=4><br><br><br><br></td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4><b>{% if doc.is_print_payment_terms==1%} Payment Terms {% endif %}</b></td>\n                <td colspan=2>\n                    Authorised Signatory\n                </td>\n                <td colspan=2>\n                    Issuing Signatory\n                </td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=2 colspan=4>\n                    {% if doc.payment_schedule and doc.is_print_payment_terms==1 %}\n                    <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                        <thead>\n                            <tr>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for row in doc.payment_schedule %}\n                            <tr>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                            </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                    {% endif %}\n                </td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n            </tr>\n            <tr rowspan=1>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n            </tr>\n        </table>\n    <!--</div>-->\n\n\n\n    {% if doc.ewaybill %}\n    {% set e_waybill_data = frappe.db.get_value(\"e-Waybill Log\", {\"reference_name\": doc.name, \"reference_doctype\": \"Sales Invoice\"}, \"data\") %}\n    <div class=\"page-break\"></div>\n    {% set data = _dict(json.loads(e_waybill_data)) %}\n    {%- set irn = doc.irn -%}\n\n    {% if data.supplyType == \"O\" %}\n    {% set generated_by = data.fromTrdName %}\n    {% else %}\n    {% set generated_by = data.toTrdName %}\n    {% endif %}\n\n    <div class=\"ewaybill-page-layout\">\n        <table class=\"table borderless\" style=\"border:0\">\n            <tbody>\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <h1 class=\"title\">e-Waybill</h1>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img src=\"data:image/png;base64,{{ get_e_waybill_qr_code(data.ewbNo,data.userGstin, data.ewayBillDate) }}\" class=\"qr-code\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table class=\"table borderless\">\n            <tbody>\n                <tr>\n                    <td style=\"width: 200px\">\n                        <span>e-Waybill No:</span>\n                    </td>\n                    <td>\n                        <span class=\"e-waybill-number\">\n                            <strong>{{ add_spacing(data.ewbNo, 4) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>e-Waybill Date:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \"\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Generated By:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>\n                                {{ add_spacing(data.userGstin, 5) }} - {{ generated_by }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid From:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \" \") }}\n                                {{ \" [\" }}{{ data.actualDist }}{{ \"Kms]\" }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid Until:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.validUpto[:10] }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if irn %}\n                <tr>\n                    <td>\n                        <span>IRN:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ irn }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - A</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Supplier</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.fromGstin, 5) }}-{{ data.fromTrdName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Dispatch</td>\n                    <td>\n                        <span>\n                            <strong>{{ data.fromPlace }},\n                                {{ get_state(data.actFromStateCode) }} -\n                                {{ data.fromPincode }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Recipient</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.toGstin, 5) }}-{{ data.toTrdName }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Delivery</td>\n                    <td>\n                        <span><strong>\n                                {{ data.toPlace }},\n                                {{ get_state(data.actToStateCode) }} -{{ data.toPincode }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document No.</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docNo }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document Date</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docDate }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Transaction Type:</span>\n                    </td>\n                    <td>\n                        <span><strong>{{ get_transport_type(data.transactionType) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Value of Goods</td>\n                    <td>\n                        <span class=\"classfont\">\n                            <strong>\n                                {{ frappe.utils.fmt_money(data.totInvValue, currency=\"INR\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>HSN Code</td>\n                    <td>\n                        <span class=\"form-control1\" onkeydown=\"expandtext(this);\">\n                            <strong>{{ data.itemList[0].hsnCode }}\n                                {%if data.itemList[0].productDesc%}\n                                {{ \" - \" ~data.itemList[0].productDesc }}\n                                {%endif%}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Reason for Transportation</td>\n                    <td>\n                        <span>\n                            <strong>{{ get_supply_type(data.supplyType) }} - {{ get_sub_supply_type(data.subSupplyType) }} </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Transporter</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.transporterId, 5) }}-\n                                {{ data.transporterName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if data.VehiclListDetails|length > 0 %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - B</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div>\n                            <table cellspacing=\"0\" cellpadding=\"3\" rules=\"all\" class=\"table table-responsive vehicle-info\" border=\"1\">\n                                <tbody>\n                                    <tr>\n                                        <th scope=\"col\">Mode</th>\n                                        <th scope=\"col\">\n                                            Vehicle / Trans <br />\n                                            Doc No &amp; Dt.\n                                        </th>\n                                        <th scope=\"col\">From</th>\n                                        <th scope=\"col\">Entered Date</th>\n                                        <th scope=\"col\">Entered By</th>\n                                        <th scope=\"col\">\n                                            Cdata No. <br />\n                                            (If any)\n                                        </th>\n                                        <th scope=\"col\">\n                                            Multi Veh.Info <br />\n                                            (If any)\n                                        </th>\n                                    </tr>\n                                    {% for detail in data.VehiclListDetails %}\n                                    <tr>\n                                        <td>\n                                            {{ get_transport_mode(detail.transMode) }}\n                                        </td>\n                                        <td>\n                                            {{ detail.vehicleNo }} /\n                                            {{ detail.transDocNo }} Dt:\n                                            {{ detail.transDocDate }}\n                                        </td>\n                                        <td>{{ detail.fromPlace }}</td>\n                                        <td>\n                                            {{ detail.enteredDate |\n                                                replace(\":00 \", \" \") }}\n                                        </td>\n                                        <td>{{ detail.userGSTINTransin }}</td>\n                                        <td>-</td>\n                                        <td>-</td>\n                                    </tr>\n                                    {% endfor%}\n                                </tbody>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img class=\"barcode\" src=\"data:image/png;base64,{{ get_ewaybill_barcode(data.ewbNo) }}\">\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    {% endif %}\n\n\n\n\n\n    <div id=\"footer-html\" class=\"visible-pdf\">\n        <p class=\"text-center small page-number visible-pdf\">\n            {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n        </p>\n    </div>\n<!--</div>-->",
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2025-04-23 20:21:51.617304",
  "module": "Business Needed Solutions",
  "name": "BNS SI Dynamic V1",
  "page_number": "Bottom Center",
  "pdf_generator": null,
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "br {\n    line-height:5px;\n}\n\n.text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Sales Order",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n{% set bns_settings = frappe.get_doc(\"BNS Settings\") %}\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;padding:10px\">\n            <div class=\"col-xs-3 column-break\">\n                {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n                {% if company_logo %}\n                <div>\n                    <img width=\"100%\" src=\"{{ company_logo }}\">\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 column-break text-center\">\n                <h2 style=\"margin:0;\">{{ doc.company }}</h2>\n                <div style=\"font-size:0.85rem\">\n                    <b>{% set seller_address = frappe.db.get_value(\"Address\", doc.company_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                        {{ format_address(seller_address) }}\n                        {% if doc.company_gstin %}\n                        GST: {{ doc.company_gstin }}<br>\n                        {% endif %}\n                        <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                    </b>\n                </div>\n            </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;\"><b>\n                        {% if doc.status == \"Draft\" %}\n                        Draft Sales Order\n                        {% elif doc.status == \"On Hold\" %}\n                        On Hold\n                        {% elif doc.status == \"To Deliver and Bill\" %}\n                        To Deliver and Bill\n                        {% elif doc.status == \"To Bill\" %}\n                        To Bill\n                        {% elif doc.status == \"To Deliver\" %}\n                        To Deliver\n                        {% elif doc.status == \"Completed\" %}\n                        Completed\n                        {% elif doc.status == \"Cancelled\" %}\n                        Cancelled Sales Order\n                        {% elif doc.status == \"Closed\" %}\n                        Closed\n                        {% else %}\n                        Sales Order\n                        {% endif %}\n                    </b>\n                </h2>\n                <div class=\"row\" style=\"font-size:0.6rem\">\n                    <div class=\"col-xs-5 text-left\" style=\"text-wrap: nowrap;font-size:0.45rem\"><b>SO Date:<br>Order No:<br>Delivery Status:</b></div>\n                    <div class=\"col-xs-7 text-right\" style=\"text-wrap: nowrap;\">{{ frappe.utils.formatdate(doc.transaction_date) }}<br><b>{{ doc.name }}</b><br>\n                        <div>{{ doc.delivery_status }}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!--<div class=\"main-content\">-->\n        {% if doc.irn %}\n        <div class=\"col-xs-12 column-break einv-det\" style=\"margin-bottom:2px;\">\n            <!--<div class=\"col-xs-2 column-break text-left\"></div>-->\n            <div class=\"col-xs-4 column-break text-left\">\n                {% if e_invoice_log and e_invoice_log.signed_qr_code %}\n                <img src=\"data:image/png;base64,{{ get_qr_code(e_invoice_log.signed_qr_code, scale=3) }}\" class=\"qrcode\">\n                {% endif %}\n            </div>\n            <div class=\"col-xs-8 column-break text-right\">\n                {% if invoice_data and invoice_data.Irn %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>IRN</label></div>\n                    <div class=\"col-xs-8 value\"><u>{{ invoice_data.Irn }}</u></div>\n                </div>\n                {% endif %}\n                {% if invoice_data and invoice_data.AckNo %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>Ack. No.</label></div>\n                    <div class=\"col-xs-8 value\">{{ invoice_data.AckNo }}</div>\n                </div>\n                {% endif %}\n                {% if invoice_data and invoice_data.AckDt %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>Ack. Date</label></div>\n                    <div class=\"col-xs-8 value\">{{ frappe.utils.format_datetime(invoice_data.AckDt, \"dd/MM/yyyy hh:mm:ss\") }}</div>\n                </div>\n                {% endif %}\n                {% if doc.ewaybill %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>e-Waybill No.</label></div>\n                    <div class=\"col-xs-8 value\"><u>{{ doc.ewaybill }}</u></div>\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-1 column-break text-right\">\n            </div>\n        </div>\n        {% endif %}\n        <!--</div>-->\n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td colspan=6 rowspan=5>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Buyer Details</u></b></h6>\n                            <p><b>{{ doc.customer_name }}</b></p>\n                            {% set customer_address = frappe.db.get_value(\"Address\", doc.customer_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(customer_address) }}\n\n                            {% if doc.billing_address_gstin %}\n                            GST: <u>{{ doc.billing_address_gstin }}</u><br>\n                            {% endif %}\n                            {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer_name, \"pan\")%}\n                            {% if customer_pan %}\n                            PAN: {{ customer_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address_name }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% if shipping_address.gstin %}\n                            GST: <u>{{ shipping_address.gstin }}</u><br>\n                            {% endif %}\n                            {% endif %}\n                            {% if doc.dispatch_address %}\n                            <h6><b><u>Dispatch Details</u></b></h6>\n                            <p><b>{{ frappe.db.get_value(\"Address\", doc.dispatch_address_name, \"address_title\") }}</b></p>\n                            <!--<p>{{doc.dispatch_address}}</p>-->\n                            {% set dispatch_address = frappe.db.get_value(\"Address\", doc.dispatch_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                            {{ format_address(dispatch_address) }}\n                            {% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Transporter:</h6>\n                            {% if doc.transporter_name %}\n                            {{ doc.transporter_name }} <br>\n                            {{ doc.gst_transporter_id }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Vehicle No:</h6>\n                            {% if doc.vehicle_no %}\n                            {{ doc.vehicle_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Buyer's PO No:</h6>\n                            {% if doc.po_no %}\n                            {{ doc.po_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>PO Date:</h6>\n                            {% if doc.po_date %}\n                            {{ doc.po_date }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Builty No:</h6>\n                            {% if doc.custom_builty_no %}\n                            {{ doc.custom_builty_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Remarks:</h6>\n                            {% if doc.remarks %}\n                            {{ doc.remarks }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% if doc.incoterm or doc.named_place  %}\n                    <tr>\n                        <td colspan=3>\n                            <h6>Incoterm:</h6>\n                            {% if doc.incoterm %}\n                            {{ doc.incoterm }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Named Place:</h6>\n                            {% if doc.named_place %}\n                            {{ doc.named_place }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% endif %}\n                    <tr>\n                        <td colspan=2>\n                            \n                            <h6>Destination:</h6>\n                            {% if doc.custom_destination %}\n                            {{doc.custom_destination}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td rowspan=2 colspan=4>\n                            <h6>Terms of Delivery:</h6>\n                            {% if doc.custom_terms_of_delivery %}\n                            {{ doc.custom_terms_of_delivery }}\n                            {% elif doc.custom_terms_of_delivery_new %}\n                            {{ doc.custom_terms_of_delivery_new }}\n                            {% else %}<br><br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=2 rowspan=1>\n                            <h6>Doc No:</h6>\n                            {% if doc.custom_doc_no %}\n                            {{doc.custom_doc_no}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <!--</div>-->\n        <div class=\"col-xs-12 column-break item-det\">\n            <table class=\"table table-bordered e-invoice-table\">\n            <thead>\n                <tr>\n                    <th colspan=\"2\">#</th>\n                    <th colspan=\"24\">Item</th>\n                    <th colspan=\"7\">HSN/SAC</th>\n                    <th colspan=\"7\">Qty</th>\n                    {% if bns_settings.rate_incl_tax %}\n                    <th colspan=\"9\">Rate(Inc Tax)</th>\n                    {% endif %}\n                    {% if bns_settings.rate_excl_tax %}\n                    <th colspan=\"9\">Rate(Exc Tax)</th>\n                    {% endif %}\n                    {% if bns_settings.discount_type == \"Triple Compounded\" %}\n                    <th colspan=\"4\">D1</th>\n                    <th colspan=\"4\">D2</th>\n                    <th colspan=\"4\">D3</th>\n                    {% else %}\n                    <th colspan=\"4\">Disc</th>\n                    {% endif %}\n                    <th colspan=\"11\">Net Total</th>\n                </tr>\n            </thead>\n            \n                <tbody>\n                    {% for item in doc.items %}\n                    <tr class=\"no-break\">\n                        <td colspan=\"2\">{{ loop.index }}</td>\n                        <td colspan=\"24\">\n                            <b style=\"font-size:0.5rem;\">{{ item.item_name }}</b><br>\n                            {% if item.barcode %}\n                            <p style=\"font-size:0.35rem;\">\n                                EAN: {{ item.barcode }}\n                            </p>\n                            {% endif %}\n                        </td>\n                        <td colspan=\"7\" style=\"font-size:0.45rem;\">{{ item.gst_hsn_code }}</td>\n                        <td colspan=\"7\" class=\"text-left\" style=\"line-height: 95%;\">\n                            <b>\n                                {{ item.qty }} {{ item.uom }}\n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <small style=\"font-size:0.35rem;\">{{ (item.conversion_factor / print_uom_conversion) | int }} {{ print_uom }}/{{ item.uom }}</small>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <br>\n                                            <small style=\"font-size:0.6rem;\">{{ item.total_weight }} Kg</small>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <br>\n                                            <small style=\"font-size:0.6rem;\">{{ item.total_weight / 1000 }} Kg</small>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% if doc.taxes[0].included_in_print_rate == 1 %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set inclusive_rate = item.price_list_rate %}\n                            {% set exclusive_rate = inclusive_rate*100/(100+gst_rate) %}\n                        \n                        {% else %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set exclusive_rate = item.price_list_rate %}\n                            {% set inclusive_rate = exclusive_rate*(100+gst_rate)/100 %}\n                        \n                        {% endif %}\n                        \n                        {% if bns_settings.rate_incl_tax %}\n                        <td colspan=\"9\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </span>\n                                \n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <span style=\"font-size:0.45rem;\">\n                                            {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate * print_uom_conversion / item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                            </span>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = inclusive_rate * item.qty / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = inclusive_rate * item.qty * 1000 / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% endif %}\n                        \n                        {% if bns_settings.rate_excl_tax %}\n                        <td colspan=\"9\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </span>\n                                \n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <span style=\"font-size:0.45rem;\">\n                                            {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate * print_uom_conversion / item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                            </span>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = exclusive_rate * item.qty / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = exclusive_rate * item.qty * 1000 / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% endif %}\n                        \n                        {% if bns_settings.discount_type != \"Single\" %}\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d1_ == 0.0 else item.custom_d1_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d2_ == 0.0 else item.custom_d2_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d3_ == 0.0 else item.custom_d3_ ~ '%' }}</td>\n                        {% else %}\n                        <td colspan=\"4\">{{ item.discount_percentage }}% </td>\n                        {% endif %}\n                        <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(\"{:.2f}\".format(item.net_amount), currency=doc.currency) }}</b></td>\n                        \n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        </div>\n\n\n\n    <!--</div>-->\n\n    <!--<div class=\"no-break\">-->\n        <table class=\"table table-bordered e-invoice-table\">\n            <tbody>\n                <tr>\n                    <td rowspan=1 colspan=2 style=\"vertical-align:top !important;\"><b>T&C</b></td>\n                    <td class=\"text-right\">Total Taxable Value</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.net_total), currency=doc.currency) }}</td>\n                </tr>\n                {% set ns = namespace(freight_row=false) %}\n                \n                {% for tax_row in doc.taxes %}\n                    {% if \"Freight and Forwarding Charges\" in tax_row.account_head %}\n                        {% set ns.freight_row = tax_row %}\n                    {% endif %}\n                {% endfor %}\n                {% set freight_row = ns.freight_row %}\n                {% if freight_row %}\n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges-freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                    <tr>\n                        <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                {% else %}\n                    \n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms %}<span style=\"font-size:0.5rem;\">{{doc.terms}}</span>{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges), currency=doc.currency) }}</td>\n                    </tr>\n                {% endif %}\n                \n                {% if doc.discount_amount %}\n                <tr>\n                    <td class=\"text-right\">Additional Discount</td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.discount_amount, currency=\"INR\") }}</b></td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td class=\"text-right\"><b>Grand Total</b></td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.rounded_total, currency=\"INR\") }}</b></td>\n                </tr>\n                <tr>\n                    <td colspan=2>\n                        <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.in_words }}</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    <!--</div>-->\n    {{ doc.gst_breakup_table }}\n    <div class=\"no-break\">\n        <table style=\"table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4>\n                    <b>Bank Details</b>\n                </td>\n                <td colspan=4>\n                    <b>Pre Authenticated By. : </b>{{doc.company}}\n                </td>\n            </tr>\n            <tr rowspan=3>\n                <td rowspan=1 colspan=4>\n                    {% set bank_account = frappe.db.get_value(\"Bank Account\", {\"company\": doc.company, \"is_default\": 1}, [\"account_name\",\"bank\", \"bank_account_no\", \"branch_code\",\"iban\"], as_dict=True) %}\n                    {% if bank_account.account_name %}\n                    Account Name: <b><i>{{ bank_account.account_name }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank %}\n                    Bank Name: <b><i>{{ bank_account.bank }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank_account_no %}\n                    Account Number: <b><i>{{ bank_account.bank_account_no }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.branch_code %}\n                    Branch Code (IFSC): <b><i>{{ bank_account.branch_code }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.iban %}\n                    IBAN: <b><i>{{ bank_account.iban }}</i></b><br>\n                    {% endif %}\n                </td>\n                <td colspan=4><br><br><br><br></td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4><b>{% if doc.custom_is_print==1%} Payment Terms {% endif %}</b></td>\n                <td colspan=2>\n                    Authorised Signatory\n                </td>\n                <td colspan=2>\n                    Issuing Signatory\n                </td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=2 colspan=4>\n                    {% if doc.payment_schedule and doc.custom_is_print==1 %}\n                    <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                        <thead>\n                            <tr>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for row in doc.payment_schedule %}\n                            <tr>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                            </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                    {% endif %}\n                </td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n            </tr>\n            <tr rowspan=1>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n            </tr>\n        </table>\n    <!--</div>-->\n\n\n\n    {% if doc.ewaybill %}\n    {% set e_waybill_data = frappe.db.get_value(\"e-Waybill Log\", {\"reference_name\": doc.name, \"reference_doctype\": \"Sales Invoice\"}, \"data\") %}\n    <div class=\"page-break\"></div>\n    {% set data = _dict(json.loads(e_waybill_data)) %}\n    {%- set irn = doc.irn -%}\n\n    {% if data.supplyType == \"O\" %}\n    {% set generated_by = data.fromTrdName %}\n    {% else %}\n    {% set generated_by = data.toTrdName %}\n    {% endif %}\n\n    <div class=\"ewaybill-page-layout\">\n        <table class=\"table borderless\" style=\"border:0\">\n            <tbody>\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <h1 class=\"title\">e-Waybill</h1>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img src=\"data:image/png;base64,{{ get_e_waybill_qr_code(data.ewbNo,data.userGstin, data.ewayBillDate) }}\" class=\"qr-code\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table class=\"table borderless\">\n            <tbody>\n                <tr>\n                    <td style=\"width: 200px\">\n                        <span>e-Waybill No:</span>\n                    </td>\n                    <td>\n                        <span class=\"e-waybill-number\">\n                            <strong>{{ add_spacing(data.ewbNo, 4) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>e-Waybill Date:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \"\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Generated By:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>\n                                {{ add_spacing(data.userGstin, 5) }} - {{ generated_by }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid From:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \" \") }}\n                                {{ \" [\" }}{{ data.actualDist }}{{ \"Kms]\" }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid Until:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.validUpto[:10] }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if irn %}\n                <tr>\n                    <td>\n                        <span>IRN:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ irn }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - A</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Supplier</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.fromGstin, 5) }}-{{ data.fromTrdName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Dispatch</td>\n                    <td>\n                        <span>\n                            <strong>{{ data.fromPlace }},\n                                {{ get_state(data.actFromStateCode) }} -\n                                {{ data.fromPincode }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Recipient</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.toGstin, 5) }}-{{ data.toTrdName }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Delivery</td>\n                    <td>\n                        <span><strong>\n                                {{ data.toPlace }},\n                                {{ get_state(data.actToStateCode) }} -{{ data.toPincode }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document No.</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docNo }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document Date</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docDate }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Transaction Type:</span>\n                    </td>\n                    <td>\n                        <span><strong>{{ get_transport_type(data.transactionType) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Value of Goods</td>\n                    <td>\n                        <span class=\"classfont\">\n                            <strong>\n                                {{ frappe.utils.fmt_money(data.totInvValue, currency=\"INR\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>HSN Code</td>\n                    <td>\n                        <span class=\"form-control1\" onkeydown=\"expandtext(this);\">\n                            <strong>{{ data.itemList[0].hsnCode }}\n                                {%if data.itemList[0].productDesc%}\n                                {{ \" - \" ~data.itemList[0].productDesc }}\n                                {%endif%}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Reason for Transportation</td>\n                    <td>\n                        <span>\n                            <strong>{{ get_supply_type(data.supplyType) }} - {{ get_sub_supply_type(data.subSupplyType) }} </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Transporter</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.transporterId, 5) }}-\n                                {{ data.transporterName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if data.VehiclListDetails|length > 0 %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - B</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div>\n                            <table cellspacing=\"0\" cellpadding=\"3\" rules=\"all\" class=\"table table-responsive vehicle-info\" border=\"1\">\n                                <tbody>\n                                    <tr>\n                                        <th scope=\"col\">Mode</th>\n                                        <th scope=\"col\">\n                                            Vehicle / Trans <br />\n                                            Doc No &amp; Dt.\n                                        </th>\n                                        <th scope=\"col\">From</th>\n                                        <th scope=\"col\">Entered Date</th>\n                                        <th scope=\"col\">Entered By</th>\n                                        <th scope=\"col\">\n                                            Cdata No. <br />\n                                            (If any)\n                                        </th>\n                                        <th scope=\"col\">\n                                            Multi Veh.Info <br />\n                                            (If any)\n                                        </th>\n                                    </tr>\n                                    {% for detail in data.VehiclListDetails %}\n                                    <tr>\n                                        <td>\n                                            {{ get_transport_mode(detail.transMode) }}\n                                        </td>\n                                        <td>\n                                            {{ detail.vehicleNo }} /\n                                            {{ detail.transDocNo }} Dt:\n                                            {{ detail.transDocDate }}\n                                        </td>\n                                        <td>{{ detail.fromPlace }}</td>\n                                        <td>\n                                            {{ detail.enteredDate |\n                                                replace(\":00 \", \" \") }}\n                                        </td>\n                                        <td>{{ detail.userGSTINTransin }}</td>\n                                        <td>-</td>\n                                        <td>-</td>\n                                    </tr>\n                                    {% endfor%}\n                                </tbody>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img class=\"barcode\" src=\"data:image/png;base64,{{ get_ewaybill_barcode(data.ewbNo) }}\">\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    {% endif %}\n\n\n\n\n\n    <div id=\"footer-html\" class=\"visible-pdf\">\n        <p class=\"text-center small page-number visible-pdf\">\n            {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n        </p>\n    </div>\n<!--</div>-->",
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2025-04-12 01:34:02.711235",
  "module": "Business Needed Solutions",
  "name": "BNS SO Dynamic V1",
  "page_number": "Bottom Center",
  "pdf_generator": null,
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "br {\n    line-height:5px;\n}\n\n.text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Delivery Note",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n{% set bns_settings = frappe.get_doc(\"BNS Settings\") %}\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;padding:10px\">\n            <div class=\"col-xs-3 column-break\">\n                {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n                {% if company_logo %}\n                <div>\n                    <img width=\"100%\" src=\"{{ company_logo }}\">\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 column-break text-center\">\n                <h2 style=\"margin:0;\">{{ doc.company }}</h2>\n                <div style=\"font-size:0.85rem\">\n                    <b>{% set seller_address = frappe.db.get_value(\"Address\", doc.company_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                        {{ format_address(seller_address) }}\n                        {% if doc.company_gstin %}\n                        GST: {{ doc.company_gstin }}<br>\n                        {% endif %}\n                        <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                    </b>\n                </div>\n            </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;\"><b>\n                        {% if doc.is_return %}\n                        Delivery Note Return\n                        {% else %}\n                        {% if doc.status == \"Draft\" %}\n                        Draft Delivery Note\n                        {% elif doc.status == \"Cancelled\" %}\n                        Cancelled Delivery Note\n                        {% else %}\n                        Delivery Note\n                        {% endif %}\n                        {% endif %}\n                    </b>\n                </h2>\n                <div class=\"row\" style=\"font-size:0.6rem\">\n                    <div class=\"col-xs-5 text-left\" style=\"text-wrap: nowrap;font-size:0.45rem\"><b>DN Date:<br>DN No:<br>Place of Supply:</b></div>\n                    <div class=\"col-xs-7 text-right\" style=\"text-wrap: nowrap;\">{{ frappe.utils.formatdate(doc.posting_date) }}<br><b>{{ doc.name }}</b><br>\n                        <div>{{doc.place_of_supply}}</div>\n                    </div>\n                    <!--<div class=\"col-xs-5 column-break\" style=\"\"></div>-->\n                </div>\n            </div>\n        </div>\n    </div>\n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td colspan=6 rowspan=5>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Buyer Details</u></b></h6>\n                            <p><b>{{ doc.customer_name }}</b></p>\n                            {% set customer_address = frappe.db.get_value(\"Address\", doc.customer_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(customer_address) }}\n\n                            {% if doc.billing_address_gstin %}\n                            GST: <u>{{ doc.billing_address_gstin }}</u><br>\n                            {% endif %}\n                            {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer_name, \"pan\")%}\n                            {% if customer_pan %}\n                            PAN: {{ customer_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address_name }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% if shipping_address.gstin %}\n                            GST: <u>{{ shipping_address.gstin }}</u><br>\n                            {% endif %}\n                            {% endif %}\n                            {% if doc.dispatch_address %}\n                            <h6><b><u>Dispatch Details</u></b></h6>\n                            <p><b>{{ frappe.db.get_value(\"Address\", doc.dispatch_address_name, \"address_title\") }}</b></p>\n                            <!--<p>{{doc.dispatch_address}}</p>-->\n                            {% set dispatch_address = frappe.db.get_value(\"Address\", doc.dispatch_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                            {{ format_address(dispatch_address) }}\n                            {% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Transporter:</h6>\n                            {% if doc.transporter_name %}\n                            {{ doc.transporter_name }} <br>\n                            {{ doc.gst_transporter_id }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Vehicle No:</h6>\n                            {% if doc.vehicle_no %}\n                            {{ doc.vehicle_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Buyer's PO No:</h6>\n                            {% if doc.po_no %}\n                            {{ doc.po_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>PO Date:</h6>\n                            {% if doc.po_date %}\n                            {{ doc.po_date }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            {% if doc.ewaybill %}\n                            <h6>e-Waybill No:</h6>\n                            {{ doc.ewaybill }}\n                            </div>\n                            {% endif %}\n                            <h6>Builty No:</h6>\n                            {% if doc.custom_builty_no %}\n                            {{ doc.custom_builty_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Remarks:</h6>\n                            {% if doc.remarks %}\n                            {{ doc.remarks }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% if doc.incoterm or doc.named_place  %}\n                    <tr>\n                        <td colspan=3>\n                            <h6>Incoterm:</h6>\n                            {% if doc.incoterm %}\n                            {{ doc.incoterm }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Named Place:</h6>\n                            {% if doc.named_place %}\n                            {{ doc.named_place }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% endif %}\n                    <tr>\n                        <td colspan=2>\n                            \n                            <h6>Destination:</h6>\n                            {% if doc.custom_destination %}\n                            {{doc.custom_destination}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td rowspan=2 colspan=4>\n                            <h6>Terms of Delivery:</h6>\n                            {% if doc.custom_terms_of_delivery %}\n                            {{ doc.custom_terms_of_delivery }}\n                            {% elif doc.custom_terms_of_delivery_new %}\n                            {{ doc.custom_terms_of_delivery_new }}\n                            {% else %}<br><br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=2 rowspan=1>\n                            <h6>Doc No:</h6>\n                            {% if doc.custom_doc_no %}\n                            {{doc.custom_doc_no}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <!--</div>-->\n        <div class=\"col-xs-12 column-break item-det\">\n            <table class=\"table table-bordered e-invoice-table\">\n            <thead>\n                <tr>\n                    <th colspan=\"2\">#</th>\n                    <th colspan=\"24\">Item</th>\n                    <th colspan=\"7\">HSN/SAC</th>\n                    <th colspan=\"7\">Qty</th>\n                    {% if bns_settings.rate_incl_tax %}\n                    <th colspan=\"9\">Rate(Inc Tax)</th>\n                    {% endif %}\n                    {% if bns_settings.rate_excl_tax %}\n                    <th colspan=\"9\">Rate(Exc Tax)</th>\n                    {% endif %}\n                    {% if bns_settings.discount_type == \"Triple Compounded\" %}\n                    <th colspan=\"4\">D1</th>\n                    <th colspan=\"4\">D2</th>\n                    <th colspan=\"4\">D3</th>\n                    {% else %}\n                    <th colspan=\"4\">Disc</th>\n                    {% endif %}\n                    <th colspan=\"11\">Net Total</th>\n                </tr>\n            </thead>\n            \n                <tbody>\n                    {% for item in doc.items %}\n                    <tr class=\"no-break\">\n                        <td colspan=\"2\">{{ loop.index }}</td>\n                        <td colspan=\"24\">\n                            <b style=\"font-size:0.5rem;\">{{ item.item_name }}</b><br>\n                            {% if item.barcode %}\n                            <p style=\"font-size:0.35rem;\">\n                                EAN: {{ item.barcode }}\n                            </p>\n                            {% endif %}\n                        </td>\n                        <td colspan=\"7\" style=\"font-size:0.45rem;\">{{ item.gst_hsn_code }}</td>\n                        <td colspan=\"7\" class=\"text-left\" style=\"line-height: 95%;\">\n                            <b>\n                                {{ item.qty }} {{ item.uom }}\n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <small style=\"font-size:0.35rem;\">{{ (item.conversion_factor / print_uom_conversion) | int }} {{ print_uom }}/{{ item.uom }}</small>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <br>\n                                            <small style=\"font-size:0.6rem;\">{{ item.total_weight }} Kg</small>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <br>\n                                            <small style=\"font-size:0.6rem;\">{{ item.total_weight / 1000 }} Kg</small>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% if doc.taxes and doc.taxes|length > 0 %}\n                            {% if doc.taxes[0].included_in_print_rate == 1 %}\n                            \n                                {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                                {% set inclusive_rate = item.price_list_rate %}\n                                {% set exclusive_rate = inclusive_rate*100/(100+gst_rate) %}\n                            \n                            {% else %}\n                            \n                                {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                                {% set exclusive_rate = item.price_list_rate %}\n                                {% set inclusive_rate = exclusive_rate*(100+gst_rate)/100 %}\n                            \n                            {% endif %}\n                        {% else %}\n                        \n                        {% set inclusive_rate = item.price_list_rate %}\n                        {% set exclusive_rate = item.price_list_rate %}\n                        \n                        {% endif %}\n                        \n                        {% if bns_settings.rate_incl_tax %}\n                        <td colspan=\"9\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </span>\n                                \n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <span style=\"font-size:0.45rem;\">\n                                            {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate * print_uom_conversion / item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                            </span>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = inclusive_rate * item.qty / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = inclusive_rate * item.qty * 1000 / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% endif %}\n                        \n                        {% if bns_settings.rate_excl_tax %}\n                        <td colspan=\"9\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </span>\n                                \n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <span style=\"font-size:0.45rem;\">\n                                            {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate * print_uom_conversion / item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                            </span>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = exclusive_rate * item.qty / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = exclusive_rate * item.qty * 1000 / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% endif %}\n                        \n                        {% if bns_settings.discount_type != \"Single\" %}\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d1_ == 0.0 else item.custom_d1_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d2_ == 0.0 else item.custom_d2_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d3_ == 0.0 else item.custom_d3_ ~ '%' }}</td>\n                        {% else %}\n                        <td colspan=\"4\">{{ item.discount_percentage }}% </td>\n                        {% endif %}\n                        <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(\"{:.2f}\".format(item.net_amount), currency=doc.currency) }}</b></td>\n                        \n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        </div>\n\n\n\n    <!--</div>-->\n\n    <!--<div class=\"no-break\">-->\n        <table class=\"table table-bordered e-invoice-table\">\n            <tbody>\n                <tr>\n                    <td rowspan=1 colspan=2 style=\"vertical-align:top !important;\"><b>T&C</b></td>\n                    <td class=\"text-right\">Total Taxable Value</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.net_total), currency=doc.currency) }}</td>\n                </tr>\n                {% set ns = namespace(freight_row=false) %}\n                \n                {% for tax_row in doc.taxes %}\n                    {% if \"Freight and Forwarding Charges\" in tax_row.account_head %}\n                        {% set ns.freight_row = tax_row %}\n                    {% endif %}\n                {% endfor %}\n                {% set freight_row = ns.freight_row %}\n                {% if freight_row %}\n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges-freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                    <tr>\n                        <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                {% else %}\n                    \n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms %}<span style=\"font-size:0.5rem;\">{{doc.terms}}</span>{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges), currency=doc.currency) }}</td>\n                    </tr>\n                {% endif %}\n                \n                {% if doc.discount_amount %}\n                <tr>\n                    <td class=\"text-right\">Additional Discount</td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.discount_amount, currency=\"INR\") }}</b></td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td class=\"text-right\"><b>Grand Total</b></td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.rounded_total, currency=\"INR\") }}</b></td>\n                </tr>\n                <tr>\n                    <td colspan=2>\n                        <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.in_words }}</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    <!--</div>-->\n    {{ doc.gst_breakup_table }}\n    <div class=\"no-break\">\n        <table style=\"table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4>\n                    <b>Bank Details</b>\n                </td>\n                <td colspan=4>\n                    <b>Pre Authenticated By. : </b>{{doc.company}}\n                </td>\n            </tr>\n            <tr rowspan=3>\n                <td rowspan=1 colspan=4>\n                    {% set bank_account = frappe.db.get_value(\"Bank Account\", {\"company\": doc.company, \"is_default\": 1}, [\"account_name\",\"bank\", \"bank_account_no\", \"branch_code\",\"iban\"], as_dict=True) %}\n                    {% if bank_account.account_name %}\n                    Account Name: <b><i>{{ bank_account.account_name }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank %}\n                    Bank Name: <b><i>{{ bank_account.bank }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank_account_no %}\n                    Account Number: <b><i>{{ bank_account.bank_account_no }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.branch_code %}\n                    Branch Code (IFSC): <b><i>{{ bank_account.branch_code }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.iban %}\n                    IBAN: <b><i>{{ bank_account.iban }}</i></b><br>\n                    {% endif %}\n                </td>\n                <td colspan=4><br><br><br><br></td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4><b>{% if doc.custom_is_print==1%} Payment Terms {% endif %}</b></td>\n                <td colspan=2>\n                    Authorised Signatory\n                </td>\n                <td colspan=2>\n                    Issuing Signatory\n                </td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=2 colspan=4>\n                    {% if doc.payment_schedule and doc.custom_is_print==1 %}\n                    <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                        <thead>\n                            <tr>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for row in doc.payment_schedule %}\n                            <tr>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                            </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                    {% endif %}\n                </td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n            </tr>\n            <tr rowspan=1>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n            </tr>\n        </table>\n    <!--</div>-->\n\n\n\n    {% if doc.ewaybill %}\n    {% set e_waybill_data = frappe.db.get_value(\"e-Waybill Log\", {\"reference_name\": doc.name, \"reference_doctype\": \"Delivery Note\"}, \"data\") %}\n    <div class=\"page-break\"></div>\n    {% set data = _dict(json.loads(e_waybill_data)) %}\n    {%- set irn = doc.irn -%}\n\n    {% if data.supplyType == \"O\" %}\n    {% set generated_by = data.fromTrdName %}\n    {% else %}\n    {% set generated_by = data.toTrdName %}\n    {% endif %}\n\n    <div class=\"ewaybill-page-layout\">\n        <table class=\"table borderless\" style=\"border:0\">\n            <tbody>\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <h1 class=\"title\">e-Waybill</h1>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img src=\"data:image/png;base64,{{ get_e_waybill_qr_code(data.ewbNo,data.userGstin, data.ewayBillDate) }}\" class=\"qr-code\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table class=\"table borderless\">\n            <tbody>\n                <tr>\n                    <td style=\"width: 200px\">\n                        <span>e-Waybill No:</span>\n                    </td>\n                    <td>\n                        <span class=\"e-waybill-number\">\n                            <strong>{{ add_spacing(data.ewbNo, 4) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>e-Waybill Date:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \"\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Generated By:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>\n                                {{ add_spacing(data.userGstin, 5) }} - {{ generated_by }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid From:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \" \") }}\n                                {{ \" [\" }}{{ data.actualDist }}{{ \"Kms]\" }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid Until:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.validUpto[:10] }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if irn %}\n                <tr>\n                    <td>\n                        <span>IRN:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ irn }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - A</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Supplier</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.fromGstin, 5) }}-{{ data.fromTrdName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Dispatch</td>\n                    <td>\n                        <span>\n                            <strong>{{ data.fromPlace }},\n                                {{ get_state(data.actFromStateCode) }} -\n                                {{ data.fromPincode }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Recipient</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.toGstin, 5) }}-{{ data.toTrdName }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Delivery</td>\n                    <td>\n                        <span><strong>\n                                {{ data.toPlace }},\n                                {{ get_state(data.actToStateCode) }} -{{ data.toPincode }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document No.</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docNo }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document Date</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docDate }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Transaction Type:</span>\n                    </td>\n                    <td>\n                        <span><strong>{{ get_transport_type(data.transactionType) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Value of Goods</td>\n                    <td>\n                        <span class=\"classfont\">\n                            <strong>\n                                {{ frappe.utils.fmt_money(data.totInvValue, currency=\"INR\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>HSN Code</td>\n                    <td>\n                        <span class=\"form-control1\" onkeydown=\"expandtext(this);\">\n                            <strong>{{ data.itemList[0].hsnCode }}\n                                {%if data.itemList[0].productDesc%}\n                                {{ \" - \" ~data.itemList[0].productDesc }}\n                                {%endif%}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Reason for Transportation</td>\n                    <td>\n                        <span>\n                            <strong>{{ get_supply_type(data.supplyType) }} - {{ get_sub_supply_type(data.subSupplyType) }} </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Transporter</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.transporterId, 5) }}-\n                                {{ data.transporterName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if data.VehiclListDetails|length > 0 %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - B</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div>\n                            <table cellspacing=\"0\" cellpadding=\"3\" rules=\"all\" class=\"table table-responsive vehicle-info\" border=\"1\">\n                                <tbody>\n                                    <tr>\n                                        <th scope=\"col\">Mode</th>\n                                        <th scope=\"col\">\n                                            Vehicle / Trans <br />\n                                            Doc No &amp; Dt.\n                                        </th>\n                                        <th scope=\"col\">From</th>\n                                        <th scope=\"col\">Entered Date</th>\n                                        <th scope=\"col\">Entered By</th>\n                                        <th scope=\"col\">\n                                            Cdata No. <br />\n                                            (If any)\n                                        </th>\n                                        <th scope=\"col\">\n                                            Multi Veh.Info <br />\n                                            (If any)\n                                        </th>\n                                    </tr>\n                                    {% for detail in data.VehiclListDetails %}\n                                    <tr>\n                                        <td>\n                                            {{ get_transport_mode(detail.transMode) }}\n                                        </td>\n                                        <td>\n                                            {{ detail.vehicleNo }} /\n                                            {{ detail.transDocNo }} Dt:\n                                            {{ detail.transDocDate }}\n                                        </td>\n                                        <td>{{ detail.fromPlace }}</td>\n                                        <td>\n                                            {{ detail.enteredDate |\n                                                replace(\":00 \", \" \") }}\n                                        </td>\n                                        <td>{{ detail.userGSTINTransin }}</td>\n                                        <td>-</td>\n                                        <td>-</td>\n                                    </tr>\n                                    {% endfor%}\n                                </tbody>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img class=\"barcode\" src=\"data:image/png;base64,{{ get_ewaybill_barcode(data.ewbNo) }}\">\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    {% endif %}\n\n\n\n\n\n    <div id=\"footer-html\" class=\"visible-pdf\">\n        <p class=\"text-center small page-number visible-pdf\">\n            {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n        </p>\n    </div>\n<!--</div>-->",
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2025-04-12 15:02:07.144268",
  "module": "Business Needed Solutions",
  "name": "BNS DN Dynamic V1",
  "page_number": "Bottom Center",
  "pdf_generator": null,
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "br {\n    line-height:5px;\n}\n\n.text-center {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.e-invoice-table tr:nth-child(odd) {\n    background-color: #f2f2f2;\n}\n\n.e-invoice-table tr:nth-child(even) {\n    background-color: #ffffff;\n}\n\n.e-invoice-table td{\nvertical-align:middle !important;\n}\n.e-invoice-table th{\n    background-color: #ffffff;\n}\n\n.payment_terms_table th, .payment_terms_table td{\n    word-wrap: break-word;\n    white-space: normal;\n    text-overflow: ellipsis;\n}\n\n\n.print-heading{\n    border-bottom:1px solid #000;\n    margin-bottom:0;\n    padding: 0;\n    color:#000;\n    font-weight:bold;\n}\n\n.einv-det .col-xs-7{\n    height:100%;\n}\n\n.print-format {\n    padding: 5px;\n    margin: 0 !important;\n}\n\n.print-format .row:not(.section-break) {\n    margin-top: 0px !important;\n}\n\n.section-heading {\n    margin-top: 3px;\n    margin-bottom: 0px;\n    font-weight: bold;\n}\n\n.party-details-table {\n    table-layout: fixed;\n    width: 100%;\n}\n.party-details-table td {\n    vertical-align: top;\n    padding: 8px;\n}\n\n\n.print-format h6{\n    font-weight: bold;\n    margin-top:0px;\n    margin-bottom:0px;\n}\n\n.e-invoice-table {\n    /*margin: 5px 0;*/\n}\n\n.item-det{\n    padding:0px !important;\n    font-size:0.8em;\n    height:100%;\n    width:100%;\n}\n\ntable.table {\n    border: 1px solid #000 !important;\n    margin: 0;\n    width: 100%;\n}\n\n.e-invoice-table th,\n        .e-invoice-table td{\n            text-align:center !important;\n        }\n.e-invoice-table th{\n    font-weight:bold;\n}\n.e-invoice-table{\n    padding:0;\n     \n    table-layout: fixed;\n}\n\ntable td, table th {\n    border: 1px solid #000 !important;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.print-format td, .print-format th{\n    padding:1px !important;\n}\n\n.qrcode {\n    width: 125px;\n}\n\n.no-preview-available {\n    color: grey;\n    font-size: 14px;\n}\n\n.wrap-text {\n    white-space: pre-wrap\n}\n\n.einv-det .col-xs-7.column-break.text-right {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    font-size:10px;\n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field {\n    display: flex;\n    align-items: center; \n    height: 100%;\n    padding: 0;\n    flex: 1; \n}\n\n.einv-det .col-xs-7.column-break.text-right .row.data-field label, \n.einv-det .col-xs-7.column-break.text-right .row.data-field .value {\n    padding: 2px;\n    flex: 1; \n}\n.print-format,table{\n    font-size:0.7rem;\n}\n\n.watermark {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(-45deg);\n    -webkit-transform:translate(-50%, -50%) rotate(-45deg);\n    opacity: 0.075;\n    font-size: 50px;\n    color: #000;\n    z-index: 1000;\n    white-space: normal;\n    pointer-events: none; \n}\n\n\n#header-html {\n    position: static;\n    top: 0;\n}\n#footer-html{\n    position: static;\n    bottom: 0;\n}\n\n.page{\n    /*background:rgba(0,0,0,0.1);*/\n    /*padding:0 10px 0 10px;*/\n    margin:0 0 0 0;\n    padding:0 0 0 0;\n}\n\n.main-content {\n    box-sizing: border-box;\n    /*page-break-after: always;*/\n}\n.page-number {\n    content: counter(page);\n}\n\n.no-break {\n        page-break-inside: avoid;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n.borderless,\n.borderless th,\n.borderless td {\n    border: none !important;\n}\n\n.print-format table td img.barcode,\n.print-format table td img.qr-code {\n    margin-top: 5px;\n    width: 95px !important;\n    image-rendering: -webkit-optimize-contrast;\n}\n.vehicle-info {\n    margin: 0 !important;\n    font-size: 9px;\n    border-collapse: collapse;\n}\n.vehicle-info th {\n    font-weight: bold;\n}\n.section-separator {\n    border-top: 2px solid #bbb;\n    margin: 8px 0 16px;\n}\n.ewb-no-span {\n    font-size: 13px;\n}\n.vehicle-info td,\n.vehicle-info th {\n    border: 0 !important;\n    border-top: 1px solid black !important;\n}\n.e-waybill-number {\n    font-size: 16px;\n}\nh1.title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 0;\n}\n\ntbody>tr>td,\ntbody>tr>th {\n    padding: 6px !important;\n    border-top: none;\n    color: black;\n}\n\n.ewaybill-page-layout {\n    font-size: 12px;\n    line-height: 1.4286;\n    box-sizing: border-box;\n    transform-origin: top center;\n    width: 95%;\n    margin: 0 auto;\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Quotation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value -%}\n\n{% macro format_address(address) %}\n{% if address %}\n<p>\n    {{ address.address_line1 }}\n    {% if address.address_line2 %}\n    {{ address.address_line2 }}<br>\n    {% endif %}\n    {{ address.city }}, {{ address.state }}, {{ address.country }}: {{ address.pincode }}<br>\n</p>\n{% endif %}\n{% endmacro %}\n\n{% set bns_settings = frappe.get_doc(\"BNS Settings\") %}\n<!--<div class=\"watermark text-center\">MEVABITE</div>-->\n\n<!--<div class=\"page\">-->\n\n\n    <div id=\"header-html\">\n        <div class=\"row print-heading\" style=\"line-height:1.1;padding:10px\">\n            <div class=\"col-xs-3 column-break\">\n                {% set company_logo = frappe.db.get_value(\"Company\", doc.company, \"logo_for_printing\") %}\n                {% if company_logo %}\n                <div>\n                    <img width=\"100%\" src=\"{{ company_logo }}\">\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 column-break text-center\">\n                <h2 style=\"margin:0;\">{{ doc.company }}</h2>\n                <div style=\"font-size:0.85rem\">\n                    <b>{% set seller_address = frappe.db.get_value(\"Address\", doc.company_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                        {{ format_address(seller_address) }}\n                        {% if doc.company_gstin %}\n                        GST: {{ doc.company_gstin }}<br>\n                        {% endif %}\n                        <p>PAN: {{ frappe.db.get_value(\"Company\", doc.company, \"pan\") }}</p>\n                    </b>\n                </div>\n            </div>\n            <div class=\"col-xs-3 column-break text-right\">\n                <h2 style=\"margin:0;\"><b>\n                    {% if doc.status == \"Draft\" %}\n                        Draft Quotation\n                    {% elif doc.status == \"Submitted\" %}\n                        Submitted Quotation\n                    {% elif doc.status == \"Open\" %}\n                        Open Quotation\n                    {% elif doc.status == \"Replied\" %}\n                        Replied Quotation\n                    {% elif doc.status == \"Partially Ordered\" %}\n                        Partially Ordered Quotation\n                    {% elif doc.status == \"Ordered\" %}\n                        Ordered Quotation\n                    {% elif doc.status == \"Lost\" %}\n                        Lost Quotation\n                    {% elif doc.status == \"Cancelled\" %}\n                        Cancelled Quotation\n                    {% elif doc.status == \"Expired\" %}\n                        Expired Quotation\n                    {% else %}\n                        Quotation\n                    {% endif %}\n                </b></h2>\n            \n                <div class=\"row\" style=\"font-size:0.6rem\">\n                    <div class=\"col-xs-5 text-left\" style=\"text-wrap: nowrap;font-size:0.45rem\">\n                        <b>Quotation Date:<br>Quotation No:<br>Status:</b>\n                    </div>\n                    <div class=\"col-xs-7 text-right\" style=\"text-wrap: nowrap;\">\n                        {{ frappe.utils.formatdate(doc.transaction_date) }}<br>\n                        <b>{{ doc.name }}</b><br>\n                        <div>{{ doc.status }}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!--<div class=\"main-content\">-->\n        {% if doc.irn %}\n        <div class=\"col-xs-12 column-break einv-det\" style=\"margin-bottom:2px;\">\n            <!--<div class=\"col-xs-2 column-break text-left\"></div>-->\n            <div class=\"col-xs-4 column-break text-left\">\n                {% if e_invoice_log and e_invoice_log.signed_qr_code %}\n                <img src=\"data:image/png;base64,{{ get_qr_code(e_invoice_log.signed_qr_code, scale=3) }}\" class=\"qrcode\">\n                {% endif %}\n            </div>\n            <div class=\"col-xs-8 column-break text-right\">\n                {% if invoice_data and invoice_data.Irn %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>IRN</label></div>\n                    <div class=\"col-xs-8 value\"><u>{{ invoice_data.Irn }}</u></div>\n                </div>\n                {% endif %}\n                {% if invoice_data and invoice_data.AckNo %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>Ack. No.</label></div>\n                    <div class=\"col-xs-8 value\">{{ invoice_data.AckNo }}</div>\n                </div>\n                {% endif %}\n                {% if invoice_data and invoice_data.AckDt %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>Ack. Date</label></div>\n                    <div class=\"col-xs-8 value\">{{ frappe.utils.format_datetime(invoice_data.AckDt, \"dd/MM/yyyy hh:mm:ss\") }}</div>\n                </div>\n                {% endif %}\n                {% if doc.ewaybill %}\n                <div class=\"row data-field\">\n                    <div class=\"col-xs-4\"><label>e-Waybill No.</label></div>\n                    <div class=\"col-xs-8 value\"><u>{{ doc.ewaybill }}</u></div>\n                </div>\n                {% endif %}\n            </div>\n            <div class=\"col-xs-1 column-break text-right\">\n            </div>\n        </div>\n        {% endif %}\n        <!--</div>-->\n\n        <!--<h5 class=\"section-heading\">2. Party Details</h5>-->\n        <!--<div class=\"section-break info-section\">-->\n        <div class=\"center-table\">\n            <table class=\"table table-bordered party-details-table\">\n                <tbody>\n                    <tr>\n                        <td colspan=6 rowspan=5>\n                            {% set contact_person = frappe.db.get_value(\n                        \"Contact\", doc.contact_person, (\"mobile_no\"), as_dict=True\n                    ) %}\n                            <h6><b><u>Buyer Details</u></b></h6>\n                            <p><b>{{ doc.customer_name }}</b></p>\n                            {% set customer_address = frappe.db.get_value(\"Address\", doc.customer_address, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(customer_address) }}\n\n                            {% if doc.billing_address_gstin %}\n                            GST: <u>{{ doc.billing_address_gstin }}</u><br>\n                            {% endif %}\n                            {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer_name, \"pan\")%}\n                            {% if customer_pan %}\n                            PAN: {{ customer_pan }}<br>\n                            {% endif %}\n                            {% if contact_person.mobile_no %}\n                            Phone No: {{ contact_person.mobile_no }}\n                            {% endif %}\n                            {% if doc.shipping_address %}\n                            <br><br>\n                            <h6><b><u>Shipping Details</u></b></h6>\n                            <p><b>{{ doc.shipping_address_name }}</b></p>\n                            {% set shipping_address = frappe.db.get_value(\"Address\", doc.shipping_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\",\"gstin\"], as_dict=True) %}\n                            {{ format_address(shipping_address) }}\n                            {% if shipping_address.gstin %}\n                            GST: <u>{{ shipping_address.gstin }}</u><br>\n                            {% endif %}\n                            {% endif %}\n                            {% if doc.dispatch_address %}\n                            <h6><b><u>Dispatch Details</u></b></h6>\n                            <p><b>{{ frappe.db.get_value(\"Address\", doc.dispatch_address_name, \"address_title\") }}</b></p>\n                            <!--<p>{{doc.dispatch_address}}</p>-->\n                            {% set dispatch_address = frappe.db.get_value(\"Address\", doc.dispatch_address_name, [\"address_line1\", \"address_line2\", \"city\", \"state\", \"pincode\", \"country\"], as_dict=True) %}\n                            {{ format_address(dispatch_address) }}\n                            {% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Transporter:</h6>\n                            {% if doc.transporter_name %}\n                            {{ doc.transporter_name }} <br>\n                            {{ doc.gst_transporter_id }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Vehicle No:</h6>\n                            {% if doc.vehicle_no %}\n                            {{ doc.vehicle_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Buyer's PO No:</h6>\n                            {% if doc.po_no %}\n                            {{ doc.po_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>PO Date:</h6>\n                            {% if doc.po_date %}\n                            {{ doc.po_date }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=3>\n                            <h6>Builty No:</h6>\n                            {% if doc.custom_builty_no %}\n                            {{ doc.custom_builty_no }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Remarks:</h6>\n                            {% if doc.remarks %}\n                            {{ doc.remarks }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% if doc.incoterm or doc.named_place  %}\n                    <tr>\n                        <td colspan=3>\n                            <h6>Incoterm:</h6>\n                            {% if doc.incoterm %}\n                            {{ doc.incoterm }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td colspan=3>\n                            <h6>Named Place:</h6>\n                            {% if doc.named_place %}\n                            {{ doc.named_place }}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                    {% endif %}\n                    <tr>\n                        <td colspan=2>\n                            \n                            <h6>Destination:</h6>\n                            {% if doc.custom_destination %}\n                            {{doc.custom_destination}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                        <td rowspan=2 colspan=4>\n                            <h6>Terms of Delivery:</h6>\n                            {% if doc.custom_terms_of_delivery %}\n                            {{ doc.custom_terms_of_delivery }}\n                            {% elif doc.custom_terms_of_delivery_new %}\n                            {{ doc.custom_terms_of_delivery_new }}\n                            {% else %}<br><br>{% endif %}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=2 rowspan=1>\n                            <h6>Doc No:</h6>\n                            {% if doc.custom_doc_no %}\n                            {{doc.custom_doc_no}}\n                            {% else %}<br>{% endif %}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!--<p></p>-->\n\n        <!--</div>-->\n        <div class=\"col-xs-12 column-break item-det\">\n            <table class=\"table table-bordered e-invoice-table\">\n            <thead>\n                <tr>\n                    <th colspan=\"2\">#</th>\n                    <th colspan=\"24\">Item</th>\n                    <th colspan=\"7\">HSN/SAC</th>\n                    <th colspan=\"7\">Qty</th>\n                    {% if bns_settings.rate_incl_tax %}\n                    <th colspan=\"9\">Rate(Inc Tax)</th>\n                    {% endif %}\n                    {% if bns_settings.rate_excl_tax %}\n                    <th colspan=\"9\">Rate(Exc Tax)</th>\n                    {% endif %}\n                    {% if bns_settings.discount_type == \"Triple Compounded\" %}\n                    <th colspan=\"4\">D1</th>\n                    <th colspan=\"4\">D2</th>\n                    <th colspan=\"4\">D3</th>\n                    {% else %}\n                    <th colspan=\"4\">Disc</th>\n                    {% endif %}\n                    <th colspan=\"11\">Net Total</th>\n                </tr>\n            </thead>\n            \n                <tbody>\n                    {% for item in doc.items %}\n                    <tr class=\"no-break\">\n                        <td colspan=\"2\">{{ loop.index }}</td>\n                        <td colspan=\"24\">\n                            <b style=\"font-size:0.5rem;\">{{ item.item_name }}</b><br>\n                            {% if item.barcode %}\n                            <p style=\"font-size:0.35rem;\">\n                                EAN: {{ item.barcode }}\n                            </p>\n                            {% endif %}\n                        </td>\n                        <td colspan=\"7\" style=\"font-size:0.45rem;\">{{ item.gst_hsn_code }}</td>\n                        <td colspan=\"7\" class=\"text-left\" style=\"line-height: 95%;\">\n                        <b>\n                            {{ item.qty }} {{ item.uom }}\n                            {% if bns_settings.secondary_rate_display %}\n                                {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                    {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                    {% if print_uom and item.uom != print_uom %}\n                                        {% set print_uom_conversion = frappe.db.get_value(\n                                            \"UOM Conversion Detail\",\n                                            {\"parent\": item.item_code, \"uom\": print_uom},\n                                            \"conversion_factor\"\n                                        ) %}\n                                        <br>\n                                        <small style=\"font-size:0.35rem;\">{{ (item.conversion_factor / print_uom_conversion) | int }} {{ print_uom }}/{{ item.uom }}</small>\n                                    {% endif %}\n                                {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                    {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                        <br>\n                                        <small style=\"font-size:0.6rem;\">{{ item.total_weight }} Kg</small>\n                                    {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                        <br>\n                                        <small style=\"font-size:0.6rem;\">{{ item.total_weight / 1000 }} Kg</small>\n                                    {% endif %}\n                                {% endif %}\n                            {% endif %}\n                        </b>\n                        </td>\n                        {% if doc.taxes[0].included_in_print_rate == 1 %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set inclusive_rate = item.price_list_rate %}\n                            {% set exclusive_rate = inclusive_rate*100/(100+gst_rate) %}\n                        \n                        {% else %}\n                        \n                            {% set gst_rate = frappe.db.get_value(\"Item Tax Template\",{\"name\": item.item_tax_template},[\"gst_rate\"]) %}\n                            {% set exclusive_rate = item.price_list_rate %}\n                            {% set inclusive_rate = exclusive_rate*(100+gst_rate)/100 %}\n                        \n                        {% endif %}\n                        \n                        {% if bns_settings.rate_incl_tax %}\n                        <td colspan=\"9\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </span>\n                                \n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <span style=\"font-size:0.45rem;\">\n                                            {{ frappe.utils.fmt_money(\"{:.2f}\".format(inclusive_rate * print_uom_conversion / item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                            </span>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = inclusive_rate * item.qty / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = inclusive_rate * item.qty * 1000 / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% endif %}\n                        \n                        {% if bns_settings.rate_excl_tax %}\n                        <td colspan=\"9\">\n                            <b>\n                                <span style=\"font-size:0.5rem;\">\n                                {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate), currency=doc.currency) }}/<small style=\"font-size:0.45rem;\">{{ item.uom }}</small>\n                                </span>\n                                \n                                {% if bns_settings.secondary_rate_display %}\n                                    {% if bns_settings.secondary_rate_field == \"print_uom\" %}\n                                        {% set print_uom = frappe.db.get_value(\"Item\", item.item_code, \"custom_print_uom\") %}\n                                        {% if print_uom and item.uom != print_uom %}\n                                            {% set print_uom_conversion = frappe.db.get_value(\n                                                \"UOM Conversion Detail\",\n                                                {\"parent\": item.item_code, \"uom\": print_uom},\n                                                \"conversion_factor\"\n                                            ) %}\n                                            <br>\n                                            <span style=\"font-size:0.45rem;\">\n                                            {{ frappe.utils.fmt_money(\"{:.2f}\".format(exclusive_rate * print_uom_conversion / item.conversion_factor), currency=doc.currency) }}/<small style=\"font-size:0.35rem;\">{{ print_uom }}</small>\n                                            </span>\n                                        {% endif %}\n                                    {% elif bns_settings.secondary_rate_field == \"weight_uom\" and item.total_weight != 0 %}\n                                        {% if item.weight_uom == \"Kg\" and item.weight_uom != item.uom %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = exclusive_rate * item.qty / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% elif item.weight_uom == \"Gram\" and item.weight_uom != \"Kg\" and item.weight_uom != \"Gram\" %}\n                                            <p style=\"font-size:0.6rem;\">\n                                                {% set calculated_value = exclusive_rate * item.qty * 1000 / item.total_weight %}\n                                                {{ frappe.utils.fmt_money(calculated_value, currency=doc.currency) }}/Kg\n                                            </p>\n                                        {% endif %}\n                                    {% endif %}\n                                {% endif %}\n                            </b>\n                        </td>\n                        {% endif %}\n                        \n                        {% if bns_settings.discount_type != \"Single\" %}\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d1_ == 0.0 else item.custom_d1_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d2_ == 0.0 else item.custom_d2_ ~ '%' }}</td>\n                        <td colspan=\"4\" style=\"font-size:0.45rem;\">{{ '-' if item.custom_d3_ == 0.0 else item.custom_d3_ ~ '%' }}</td>\n                        {% else %}\n                        <td colspan=\"4\">{{ item.discount_percentage }}% </td>\n                        {% endif %}\n                        <td colspan=\"11\"><b>{{ frappe.utils.fmt_money(\"{:.2f}\".format(item.net_amount), currency=doc.currency) }}</b></td>\n                        \n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        </div>\n\n\n\n    <!--</div>-->\n\n    <!--<div class=\"no-break\">-->\n        <table class=\"table table-bordered e-invoice-table\">\n            <tbody>\n                <tr>\n                    <td rowspan=1 colspan=2 style=\"vertical-align:top !important;\"><b>T&C</b></td>\n                    <td class=\"text-right\">Total Taxable Value</td>\n                    <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.net_total), currency=doc.currency) }}</td>\n                </tr>\n                {% set ns = namespace(freight_row=false) %}\n                \n                {% for tax_row in doc.taxes %}\n                    {% if \"Freight and Forwarding Charges\" in tax_row.account_head %}\n                        {% set ns.freight_row = tax_row %}\n                    {% endif %}\n                {% endfor %}\n                {% set freight_row = ns.freight_row %}\n                {% if freight_row %}\n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms%}{{doc.terms}}{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges-freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                    <tr>\n                        <td class=\"text-right\" style=\"font-size:0.8em;\">Freight and Forwarding Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(freight_row.tax_amount), currency=doc.currency) }}</td>\n                    </tr>\n                    \n                {% else %}\n                    \n                    <tr>\n                        <td rowspan={% if doc.discount_amount and freight_row %}5{%elif doc.discount_amount or freight_row %}4{%else%}3{%endif%} colspan=2 style=\"vertical-align:top !important;\">{%if doc.terms %}<span style=\"font-size:0.5rem;\">{{doc.terms}}</span>{%endif%}</td>\n                        <td class=\"text-right\">Total Taxes and Charges</td>\n                        <td class=\"text-right text-nowrap\">{{ frappe.utils.fmt_money(\"{:.2f}\".format(doc.total_taxes_and_charges), currency=doc.currency) }}</td>\n                    </tr>\n                {% endif %}\n                \n                {% if doc.discount_amount %}\n                <tr>\n                    <td class=\"text-right\">Additional Discount</td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.discount_amount, currency=\"INR\") }}</b></td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td class=\"text-right\"><b>Grand Total</b></td>\n                    <td class=\"text-right text-nowrap\"><b>{{ frappe.utils.fmt_money(doc.rounded_total, currency=\"INR\") }}</b></td>\n                </tr>\n                <tr>\n                    <td colspan=2>\n                        <b>Amount (in words): </b><span style=\"font-size:0.85em\">{{ doc.in_words }}</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    <!--</div>-->\n    {{ doc.gst_breakup_table }}\n    <div class=\"no-break\">\n        <table style=\"table-layout: fixed; border-collapse: collapse; width:100%; text-align:center; font-size:12px;\">\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4>\n                    <b>Bank Details</b>\n                </td>\n                <td colspan=4>\n                    <b>Pre Authenticated By. : </b>{{doc.company}}\n                </td>\n            </tr>\n            <tr rowspan=3>\n                <td rowspan=1 colspan=4>\n                    {% set bank_account = frappe.db.get_value(\"Bank Account\", {\"company\": doc.company, \"is_default\": 1}, [\"account_name\",\"bank\", \"bank_account_no\", \"branch_code\",\"iban\"], as_dict=True) %}\n                    {% if bank_account.account_name %}\n                    Account Name: <b><i>{{ bank_account.account_name }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank %}\n                    Bank Name: <b><i>{{ bank_account.bank }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.bank_account_no %}\n                    Account Number: <b><i>{{ bank_account.bank_account_no }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.branch_code %}\n                    Branch Code (IFSC): <b><i>{{ bank_account.branch_code }}</i></b><br>\n                    {% endif %}\n                    {% if bank_account.iban %}\n                    IBAN: <b><i>{{ bank_account.iban }}</i></b><br>\n                    {% endif %}\n                </td>\n                <td colspan=4><br><br><br><br></td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=1 colspan=4><b>{% if doc.custom_is_print==1%} Payment Terms {% endif %}</b></td>\n                <td colspan=2>\n                    Authorised Signatory\n                </td>\n                <td colspan=2>\n                    Issuing Signatory\n                </td>\n            </tr>\n            <tr rowspan=1>\n                <td rowspan=2 colspan=4>\n                    {% if doc.payment_schedule and doc.custom_is_print==1 %}\n                    <table class=\"payment_terms_table\" style=\"width: 100%; border-collapse: collapse;\">\n                        <thead>\n                            <tr>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Due Date</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Invoice Portion</b></th>\n                                <th style=\"border: 1px solid black; padding: 8px;\"><b>Payment Amount</b></th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for row in doc.payment_schedule %}\n                            <tr>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.due_date }}</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ row.invoice_portion }}%</td>\n                                <td style=\"border: 1px solid black; padding: 8px;\">{{ frappe.utils.fmt_money(row.payment_amount, currency=\"INR\") }}</td>\n                            </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                    {% endif %}\n                </td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Name:\n                </td>\n                <td colspan=1></td>\n            </tr>\n            <tr rowspan=1>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n                <td colspan=1 style=\"text-align:left\">\n                    Designation:\n                </td>\n                <td colspan=1></td>\n            </tr>\n        </table>\n    <!--</div>-->\n\n\n\n    {% if doc.ewaybill %}\n    {% set e_waybill_data = frappe.db.get_value(\"e-Waybill Log\", {\"reference_name\": doc.name, \"reference_doctype\": \"Sales Invoice\"}, \"data\") %}\n    <div class=\"page-break\"></div>\n    {% set data = _dict(json.loads(e_waybill_data)) %}\n    {%- set irn = doc.irn -%}\n\n    {% if data.supplyType == \"O\" %}\n    {% set generated_by = data.fromTrdName %}\n    {% else %}\n    {% set generated_by = data.toTrdName %}\n    {% endif %}\n\n    <div class=\"ewaybill-page-layout\">\n        <table class=\"table borderless\" style=\"border:0\">\n            <tbody>\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <h1 class=\"title\">e-Waybill</h1>\n                    </td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img src=\"data:image/png;base64,{{ get_e_waybill_qr_code(data.ewbNo,data.userGstin, data.ewayBillDate) }}\" class=\"qr-code\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table class=\"table borderless\">\n            <tbody>\n                <tr>\n                    <td style=\"width: 200px\">\n                        <span>e-Waybill No:</span>\n                    </td>\n                    <td>\n                        <span class=\"e-waybill-number\">\n                            <strong>{{ add_spacing(data.ewbNo, 4) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>e-Waybill Date:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \"\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Generated By:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>\n                                {{ add_spacing(data.userGstin, 5) }} - {{ generated_by }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid From:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.ewayBillDate | replace(\":00 \", \" \") }}\n                                {{ \" [\" }}{{ data.actualDist }}{{ \"Kms]\" }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Valid Until:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ data.validUpto[:10] }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if irn %}\n                <tr>\n                    <td>\n                        <span>IRN:</span>\n                    </td>\n                    <td>\n                        <span>\n                            <strong>{{ irn }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - A</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Supplier</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.fromGstin, 5) }}-{{ data.fromTrdName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Dispatch</td>\n                    <td>\n                        <span>\n                            <strong>{{ data.fromPlace }},\n                                {{ get_state(data.actFromStateCode) }} -\n                                {{ data.fromPincode }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>GSTIN of Recipient</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.toGstin, 5) }}-{{ data.toTrdName }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Place of Delivery</td>\n                    <td>\n                        <span><strong>\n                                {{ data.toPlace }},\n                                {{ get_state(data.actToStateCode) }} -{{ data.toPincode }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document No.</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docNo }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Document Date</td>\n                    <td>\n                        <span><strong>\n                                {{ data.docDate }}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <span>Transaction Type:</span>\n                    </td>\n                    <td>\n                        <span><strong>{{ get_transport_type(data.transactionType) }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Value of Goods</td>\n                    <td>\n                        <span class=\"classfont\">\n                            <strong>\n                                {{ frappe.utils.fmt_money(data.totInvValue, currency=\"INR\") }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>HSN Code</td>\n                    <td>\n                        <span class=\"form-control1\" onkeydown=\"expandtext(this);\">\n                            <strong>{{ data.itemList[0].hsnCode }}\n                                {%if data.itemList[0].productDesc%}\n                                {{ \" - \" ~data.itemList[0].productDesc }}\n                                {%endif%}\n                            </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Reason for Transportation</td>\n                    <td>\n                        <span>\n                            <strong>{{ get_supply_type(data.supplyType) }} - {{ get_sub_supply_type(data.subSupplyType) }} </strong>\n                        </span>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Transporter</td>\n                    <td>\n                        <span>\n                            <strong>{{ add_spacing(data.transporterId, 5) }}-\n                                {{ data.transporterName }}</strong>\n                        </span>\n                    </td>\n                </tr>\n                {% if data.VehiclListDetails|length > 0 %}\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                        <strong>Part - B</strong>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div>\n                            <table cellspacing=\"0\" cellpadding=\"3\" rules=\"all\" class=\"table table-responsive vehicle-info\" border=\"1\">\n                                <tbody>\n                                    <tr>\n                                        <th scope=\"col\">Mode</th>\n                                        <th scope=\"col\">\n                                            Vehicle / Trans <br />\n                                            Doc No &amp; Dt.\n                                        </th>\n                                        <th scope=\"col\">From</th>\n                                        <th scope=\"col\">Entered Date</th>\n                                        <th scope=\"col\">Entered By</th>\n                                        <th scope=\"col\">\n                                            Cdata No. <br />\n                                            (If any)\n                                        </th>\n                                        <th scope=\"col\">\n                                            Multi Veh.Info <br />\n                                            (If any)\n                                        </th>\n                                    </tr>\n                                    {% for detail in data.VehiclListDetails %}\n                                    <tr>\n                                        <td>\n                                            {{ get_transport_mode(detail.transMode) }}\n                                        </td>\n                                        <td>\n                                            {{ detail.vehicleNo }} /\n                                            {{ detail.transDocNo }} Dt:\n                                            {{ detail.transDocDate }}\n                                        </td>\n                                        <td>{{ detail.fromPlace }}</td>\n                                        <td>\n                                            {{ detail.enteredDate |\n                                                replace(\":00 \", \" \") }}\n                                        </td>\n                                        <td>{{ detail.userGSTINTransin }}</td>\n                                        <td>-</td>\n                                        <td>-</td>\n                                    </tr>\n                                    {% endfor%}\n                                </tbody>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n                {% endif %}\n                <tr>\n                    <td colspan=\"2\" class=\"text-center\">\n                        <img class=\"barcode\" src=\"data:image/png;base64,{{ get_ewaybill_barcode(data.ewbNo) }}\">\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">\n                        <div class=\"section-separator\"></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    {% endif %}\n\n\n\n\n\n    <div id=\"footer-html\" class=\"visible-pdf\">\n        <p class=\"text-center small page-number visible-pdf\">\n            {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n        </p>\n    </div>\n<!--</div>-->",
  "line_breaks": 0,
  "margin_bottom": 0.0,
  "margin_left": 0.0,
  "margin_right": 0.0,
  "margin_top": 0.0,
  "modified": "2025-04-12 01:31:38.105920",
  "module": "Business Needed Solutions",
  "name": "BNS QT Dynamic V1",
  "page_number": "Bottom Center",
  "pdf_generator": null,
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 }
]